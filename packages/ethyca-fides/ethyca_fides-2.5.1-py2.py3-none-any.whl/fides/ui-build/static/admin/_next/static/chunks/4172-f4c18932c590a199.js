"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4172],{45431:function(e,n,r){r.d(n,{g:function(){return c}});var t=r(64598),i=r(52565),s=r(89816),o=r(67294);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},a.apply(this,arguments)}var l=["className","rows"],c=(0,i.Gp)((function(e,n){var r=(0,i.mq)("Textarea",e),c=(0,i.Lr)(e),u=c.className,d=c.rows,h=function(e,n){if(null==e)return{};var r,t,i={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(c,l),f=(0,t.Yp)(h),p=d?(0,s.CE)(r,["h","minH","height","minHeight"]):r;return o.createElement(i.m$.textarea,a({ref:n,rows:d},f,{className:(0,s.cx)("chakra-textarea",u),__css:p}))}));s.Ts&&(c.displayName="Textarea")},90710:function(e,n,r){var t=r(59252),i=(r(67294),r(85893));n.Z=function(e){var n=e.daysLeft,r=e.includeText;if(!n)return null;var s="";switch(!0){case n>=10:s="green.500";break;case n<10&&n>4:s="orange.500";break;case n<5:s="red.400"}var o=r?"".concat(n," days left"):n;return(0,i.jsx)(t.Vp,{backgroundColor:s,color:"white",children:o})}},1258:function(e,n,r){r.d(n,{Z:function(){return a}});var t=r(14416),i=r(70918),s=function(e){var n=(0,t.useSelector)(i.hG);return n||n?e:e.replace(/./g,"*")},o=(r(67294),r(85893)),a=function(e){var n=e.data;return(0,o.jsx)(o.Fragment,{children:s(n)})}},26012:function(e,n,r){var t=r(78254),i=r(70918),s=(r(67294),r(14416)),o=r(85893);n.Z=function(){var e=(0,s.useDispatch)();return(0,o.jsx)(t.r,{colorScheme:"secondary",onChange:function(n){return e((0,i.dX)(n.target.checked))}})}},68293:function(e,n,r){var t=r(1396),i=r(43894),s=r(85893);n.Z=function(e){var n=e.page,r=e.size,o=e.total,a=e.handleNextPage,l=e.handlePreviousPage,c=(n-1)*r+1,u=Math.min(o,n*r);return(0,s.jsxs)(t.kC,{justifyContent:"space-between",mt:6,children:[(0,s.jsx)(t.xv,{fontSize:"xs",color:"gray.600",children:o>0?(0,s.jsxs)(s.Fragment,{children:["Showing ",Number.isNaN(c)?0:c," to"," ",Number.isNaN(u)?0:u," of"," ",Number.isNaN(o)?0:o," results"]}):"0 results"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.zx,{disabled:n<=1,onClick:l,mr:2,size:"sm",children:"Previous"}),(0,s.jsx)(i.zx,{disabled:n*r>=o,onClick:a,size:"sm",children:"Next"})]})]})}},9234:function(e,n,r){var t=r(1396),i=r(85893),s={approved:{bg:"yellow.500",label:"Approved"},complete:{bg:"green.500",label:"Completed"},denied:{bg:"red.500",label:"Denied"},canceled:{bg:"red.600",label:"Canceled"},error:{bg:"red.800",label:"Error"},in_processing:{bg:"orange.500",label:"In Progress"},paused:{bg:"gray.400",label:"Paused"},pending:{bg:"blue.400",label:"New"},identity_unverified:{bg:"red.400",label:"Unverified"},requires_input:{bg:"yellow.400",label:"Requires Input"}};n.Z=function(e){var n=e.status;return(0,i.jsx)(t.Ct,{color:"white",bg:s[n].bg,width:107,lineHeight:"18px",textAlign:"center",children:s[n].label})}},44068:function(e,n,r){r.d(n,{Z:function(){return p}});var t=r(16835),i=r(27812),s=r(1396),o=r(75568),a=r(35839),l=r(43894),c=r(48591),u=r(67294),d=r(12156),h=r(85893),f=function(e){var n=e.defaultValues,r=e.items,a=e.onSelection,c=(0,u.useState)(r),f=c[0],p=c[1];return(0,h.jsxs)(o.qy,{lineHeight:"1rem",p:"0",children:[(0,h.jsxs)(s.kC,{borderBottom:"1px",borderColor:"gray.200",cursor:"auto",p:"8px",children:[(0,h.jsx)(l.zx,{onClick:function(){p(r),a(new Map)},size:"xs",variant:"outline",children:"Clear"}),(0,h.jsx)(s.LZ,{}),(0,h.jsx)(l.zx,{backgroundColor:"primary.800",color:"white",onClick:function(){a(f)},size:"xs",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Done"})]}),(0,h.jsx)(s.xu,{maxH:"360px",overflow:"auto",children:(0,h.jsx)(d.cO,{colorScheme:"purple",defaultValue:n,onChange:function(e){var n=new Map(f);n.forEach((function(e,r){n.set(r,!1)})),e.forEach((function(e){n.set(e,!0)})),p(n)},children:(0,i.Z)(r).sort().map((function(e){var n=(0,t.Z)(e,1)[0];return(0,h.jsx)(o.sN,{paddingTop:"10px",paddingRight:"8.5px",paddingBottom:"10px",paddingLeft:"8.5px",_focus:{bg:"gray.100"},children:(0,h.jsx)(d.XZ,{"aria-label":n,isChecked:r.get(n),spacing:".5rem",value:n,width:"100%",children:(0,h.jsx)(s.xv,{fontSize:"0.75rem",children:n})})},n)}))})})]})},p=function(e){var n=e.closeOnSelect,r=void 0!==n&&n,d=e.list,p=e.onChange,x=e.selectedList,v=e.label,g=e.tooltipDisabled,j=void 0!==g&&g,b=e.tooltipPlacement,m=void 0===b?"auto":b,y=e.width,C=new Map(d),w=(0,u.useState)(!1),S=w[0],k=w[1],O=function(){k(!1)},z=function(){return j?v:x.size>0?(0,i.Z)(x.keys()).sort().join(", "):v};return(0,h.jsx)(s.xu,{children:(0,h.jsxs)(o.v2,{closeOnSelect:r,isLazy:!0,onClose:O,onOpen:function(){k(!0)},children:[(0,h.jsx)(a.u,{fontSize:".75rem",hasArrow:!0,"aria-label":"",label:z(),lineHeight:"1.25rem",isDisabled:j||!(x.size>0),placement:m,children:(0,h.jsxs)(o.j2,{"aria-label":z(),as:l.zx,fontWeight:"normal",rightIcon:(0,h.jsx)(c.mC,{}),size:"sm",variant:"outline",_active:{bg:"none"},_hover:{bg:"none"},children:[!j&&(0,h.jsx)(s.xv,{display:"inline-block",isTruncated:!0,width:y,children:z()}),j&&(0,h.jsxs)(s.Ug,{children:[(0,h.jsx)(s.xv,{children:z()}),x.size>0&&(0,h.jsx)(s.xv,{color:"complimentary.500",children:x.size})]})]})}),S?(0,h.jsx)(f,{defaultValues:(0,i.Z)(x.keys()),items:C,onSelection:function(e){var n=new Map((0,i.Z)(e).filter((function(e){return!0===(0,t.Z)(e,2)[1]})));p((0,i.Z)(n.keys())),O()}}):null]})})}},70783:function(e,n,r){r.d(n,{HK:function(){return s},VY:function(){return t.V}});var t=r(63719),i=r(65698),s=function(){var e=(0,t.V)().errorAlert;return{handleError:function(n){var r="An unexpected error occurred. Please try again.";(0,i.Ot)(n)?r=n.data.detail:(0,i.tB)(n)&&(r=n.data.detail[0].msg),e(r)}}};r(67294)},63719:function(e,n,r){r.d(n,{V:function(){return d}});var t=r(59499),i=r(9555),s=r(34532),o=r(1396),a=r(46995),l=r(85893);function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var d=function(){var e=(0,i.pm)();return{errorAlert:function(n,r,t){var i=u(u({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,l.jsxs)(s.bZ,{alignItems:"normal",status:"error",children:[(0,l.jsx)(s.zM,{}),(0,l.jsxs)(o.xu,{children:[r&&(0,l.jsx)(s.Cd,{children:r}),(0,l.jsx)(s.X,{children:n})]}),(0,l.jsx)(a.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)},successAlert:function(n,r,t){var i=u(u({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,l.jsxs)(s.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,l.jsx)(s.zM,{}),(0,l.jsxs)(o.xu,{children:[r&&(0,l.jsx)(s.Cd,{children:r}),(0,l.jsx)(s.X,{children:n})]}),(0,l.jsx)(a.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)}}}},24172:function(e,n,r){r.d(n,{Z:function(){return J}});var t=r(1396),i=r(5152),s=r.n(i),o=r(67294),a=r(70783),l=r(70918),c=r(85893),u=r(16835),d=r(27812),h=r(59499),f=r(50029),p=r(87794),x=r.n(p),v=r(9555),g=r(7906),j=r(48591),b=r(43894),m=r(44068),y=r(26012),C=r(14416),w=r(37161),S=new Map([["Approved","approved"],["Canceled","canceled"],["Completed","complete"],["Denied","denied"],["Error","error"],["In Progress","in_processing"],["New","pending"],["Paused","paused"],["Unverified","identity_unverified"],["Requires input","requires_input"]]);function k(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function O(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?k(Object(r),!0).forEach((function(n){(0,h.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var z,R=function(){var e=function(){var e=(0,C.useSelector)(l.dp),n=(0,C.useSelector)(w.rK),r=(0,C.useDispatch)(),t=(0,v.pm)(),i=(0,o.useCallback)((function(e){var n=[];e.forEach((function(e){S.forEach((function(r,t){t===e&&n.push(r)}))})),r((0,l.CI)(n))}),[r]),s=function(){var r=(0,f.Z)(x().mark((function r(){var i;return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,l.py)(O(O({},e),{},{token:n}));case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),i=r.t0 instanceof Error?r.t0.message:"Unknown error occurred";case 8:i&&t({description:"".concat(i),duration:5e3,status:"error"});case 9:case"end":return r.stop()}}),r,null,[[0,5]])})));return function(){return r.apply(this,arguments)}}(),a=function(e){var n=new Map;return S.forEach((function(r,t){var i=!1;e.includes(r)&&(i=!0),n.set(t,i)})),n},c=(0,o.useMemo)((function(){return a(e.status||[])}),[e.status]),h=new Map((0,d.Z)(c).filter((function(e){return!0===(0,u.Z)(e,2)[1]})));return O(O({handleSearchChange:function(e){return r((0,l.Nl)(e.target.value))},handleStatusChange:i,handleFromChange:function(e){return r((0,l.su)(null===e||void 0===e?void 0:e.target.value))},handleToChange:function(e){return r((0,l.Ue)(null===e||void 0===e?void 0:e.target.value))},handleClearAllFilters:function(){return r((0,l.Mk)())},handleDownloadClick:s,loadStatusList:a},e),{},{selectedStatusList:h,statusList:c})}(),n=e.handleSearchChange,r=e.handleStatusChange,i=e.handleFromChange,s=e.handleToChange,a=e.handleClearAllFilters,h=e.handleDownloadClick,p=e.id,k=e.from,z=e.selectedStatusList,R=e.statusList,D=e.to;return(0,c.jsxs)(t.Kq,{direction:"row",spacing:4,mb:6,children:[(0,c.jsx)(m.Z,{label:"Select Status",list:R,selectedList:z,width:"144px",onChange:r,tooltipPlacement:"top"}),(0,c.jsxs)(g.BZ,{size:"sm",children:[(0,c.jsx)(g.Z8,{pointerEvents:"none",children:(0,c.jsx)(j.PT,{color:"gray.300",w:"17px",h:"17px"})}),(0,c.jsx)(g.II,{autoComplete:"off",autoFocus:!0,type:"search",minWidth:200,placeholder:"Search",size:"sm",borderRadius:"md",value:p,name:"search",onChange:n})]}),(0,c.jsxs)(g.BZ,{size:"sm",children:[(0,c.jsx)(g.Ui,{borderRadius:"md",children:"From"}),(0,c.jsx)(g.II,{type:"date",name:"From",value:k,max:D||void 0,onChange:i,borderRadius:"md"})]}),(0,c.jsxs)(g.BZ,{size:"sm",children:[(0,c.jsx)(g.Ui,{borderRadius:"md",children:"To"}),(0,c.jsx)(g.II,{type:"date",borderRadius:"md",name:"To",value:D,min:k||void 0,onChange:s})]}),(0,c.jsxs)(t.kC,{flexShrink:0,alignItems:"center",children:[(0,c.jsx)(t.xv,{fontSize:"xs",mr:2,size:"sm",children:"Reveal PII"}),(0,c.jsx)(y.Z,{})]}),(0,c.jsx)(b.zx,{variant:"ghost",flexShrink:0,rightIcon:(0,c.jsx)(j.$I,{}),size:"sm",onClick:h,children:"Download"}),(0,c.jsx)(b.zx,{variant:"ghost",flexShrink:0,rightIcon:(0,c.jsx)(j.LG,{width:"17px"}),size:"sm",onClick:a,children:"Clear all filters"})]})},D=r(35922),P=r(12156),E=r(97142),T=r(68293),Z=r(20650),q=r(34532),L=r(59252),_=r(75568),A=r(83739),M=r(90710),N=r(10061),I=r(11163),F=r(53700),B=r(1258),V=r(9234),U=r(1521),W=r(37023),H=r(45431),X=function(e){var n=e.isOpen,r=e.isLoading,t=e.handleMenuClose,i=e.denialReason,s=e.onChange,o=e.handleDenyRequest;return(0,c.jsxs)(W.u_,{isOpen:n,onClose:t,isCentered:!0,returnFocusOnClose:!1,children:[(0,c.jsx)(W.ZA,{}),(0,c.jsxs)(W.hz,{width:"100%",maxWidth:"456px",children:[(0,c.jsx)(W.xB,{children:"Privacy Request Denial"}),(0,c.jsx)(W.fe,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,c.jsx)(W.fe,{children:(0,c.jsx)(H.g,{focusBorderColor:"primary.600",value:i,onChange:s,disabled:r})}),(0,c.jsxs)(W.mz,{children:[(0,c.jsx)(b.zx,{size:"sm",width:"100%",maxWidth:"198px",colorScheme:"gray.200",mr:3,disabled:r,onClick:t,children:"Close"}),(0,c.jsx)(b.zx,{size:"sm",width:"100%",maxWidth:"198px",colorScheme:"primary",variant:"solid",isLoading:r,onClick:function(){!function(e,n,r){n(r).then((function(){e()}))}(t,o,i)},children:"Confirm"})]})]})]})},K=function(e){var n=e.isChecked,r=e.onCheckChange,i=e.request,s=function(e){var n=(0,F.hz)().flags.navV2,r=(0,v.pm)(),t=(0,o.useRef)(null),i=(0,o.useState)(!1),s=i[0],a=i[1],d=(0,o.useState)(!1),h=d[0],f=d[1],p=(0,o.useState)(!1),x=p[0],g=p[1],j=(0,o.useState)(!1),b=j[0],m=j[1],y=(0,o.useState)(""),C=y[0],w=y[1],S=(0,l.RW)(),k=(0,u.Z)(S,2),O=k[0],z=k[1],R=(0,l.F1)(),D=(0,u.Z)(R,2),P=D[0],E=D[1],T=(0,Z.VP)(e.id).onCopy,L=(0,I.useRouter)();return{approveRequestResult:z,denyRequestResult:E,hovered:s,focused:h,menuOpen:x,modalOpen:b,handleModalOpen:function(){return m(!0)},handleModalClose:function(){m(!1),f(!1),a(!1),g(!1),E.isLoading||w("")},handleMenuClose:function(){return g(!1)},handleMenuOpen:function(){return g(!0)},handleMouseEnter:function(){return a(!0)},handleMouseLeave:function(){return a(!1)},handleFocus:function(){return f(!0)},handleBlur:function(){return f(!1)},handleIdCopy:function(){T(),r({title:"Request ID copied",duration:5e3,render:function(){return(0,c.jsx)(q.bZ,{bg:"gray.600",borderRadius:"6px",display:"flex",children:(0,c.jsx)(q.Cd,{color:"white",children:"Request ID copied"})})},containerStyle:{minWidth:"0px"}})},handleApproveRequest:function(){return O(e)},handleDenyRequest:function(n){return P({id:e.id,reason:n})},hoverButtonRef:t,shiftFocusToHoverMenu:function(){t.current&&t.current.focus()},denialReason:C,setDenialReason:w,handleViewDetails:function(){var r="/".concat(n?"privacy-requests":"subject-request","/").concat(e.id);L.push(r)}}}(i),a=s.hovered,d=s.handleMenuOpen,h=s.handleMenuClose,f=s.handleMouseEnter,p=s.handleMouseLeave,x=s.handleApproveRequest,g=s.handleDenyRequest,m=s.handleIdCopy,y=s.menuOpen,C=s.approveRequestResult,w=s.denyRequestResult,S=s.hoverButtonRef,k=s.modalOpen,O=s.handleModalClose,z=s.handleModalOpen,R=s.shiftFocusToHoverMenu,E=s.handleFocus,T=s.handleBlur,W=s.focused,H=s.denialReason,K=s.setDenialReason,Y=s.handleViewDetails,G=a||y||W;return(0,c.jsxs)(D.Tr,{_hover:{bg:"gray.50"},bg:G?"gray.50":"white",onMouseEnter:f,onMouseLeave:p,height:"36px",children:[(0,c.jsx)(D.Td,{px:0,children:(0,c.jsx)(P.XZ,{"aria-label":"Select request",isChecked:!!n,isDisabled:"error"!==i.status,onChange:function(e){return r(i.id,e.target.checked)}})}),(0,c.jsx)(D.Td,{pl:0,py:1,children:(0,c.jsx)(V.Z,{status:i.status})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(M.Z,{daysLeft:i.days_left,includeText:!1})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(L.Vp,{color:"white",bg:"primary.400",px:2,py:.5,size:"sm",fontWeight:"medium",children:i.policy.name})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(t.xv,{fontSize:"xs",children:(0,c.jsx)(B.Z,{data:i.identity&&(i.identity.email||i.identity.phone_number)||""})})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(t.xv,{fontSize:"xs",children:(0,N.p6)(i.created_at)})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(t.xv,{fontSize:"xs",children:(0,c.jsx)(B.Z,{data:i.reviewer?i.reviewer.username:""})})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(t.xv,{isTruncated:!0,fontSize:"xs",maxWidth:"87px",children:i.id})}),(0,c.jsxs)(D.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:[(0,c.jsx)(b.zx,{size:"xs",variant:"ghost",mr:2.5,onFocus:R,tabIndex:G?-1:0,children:(0,c.jsx)(j.nX,{color:"gray.700",w:18,h:18})}),(0,c.jsxs)(b.hE,{isAttached:!0,variant:"outline",position:"absolute",right:2.5,top:"50%",transform:"translate(1px, -50%)",opacity:G?1:0,pointerEvents:G?"auto":"none",onFocus:E,onBlur:T,shadow:"base",borderRadius:"md",children:["error"===i.status&&(0,c.jsx)(U.Z,{buttonProps:{mr:"-px",size:"xs"},handleBlur:T,subjectRequest:i}),"pending"===i.status&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(b.zx,{size:"xs",mr:"-px",bg:"white",onClick:function(){x(),T()},isLoading:C.isLoading,_loading:{opacity:1,div:{opacity:.4}},_hover:{bg:"gray.100"},ref:S,children:"Approve"}),(0,c.jsx)(b.zx,{size:"xs",mr:"-px",bg:"white",onClick:z,_loading:{opacity:1,div:{opacity:.4}},_hover:{bg:"gray.100"},children:"Deny"}),(0,c.jsx)(X,{isOpen:k,isLoading:w.isLoading,handleMenuClose:O,handleDenyRequest:g,denialReason:H,onChange:function(e){K(e.target.value)}})]}),(0,c.jsxs)(_.v2,{onOpen:d,onClose:h,children:[(0,c.jsx)(_.j2,{as:b.zx,size:"xs",bg:"white",ref:"pending"!==i.status?S:null,children:(0,c.jsx)(j.nX,{color:"gray.700",w:18,h:18})}),(0,c.jsx)(A.h_,{children:(0,c.jsxs)(_.qy,{shadow:"xl",children:[(0,c.jsx)(_.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:m,children:(0,c.jsx)(t.xv,{fontSize:"sm",children:"Copy Request ID"})}),(0,c.jsx)(_.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:Y,children:(0,c.jsx)(t.xv,{fontSize:"sm",children:"View Details"})})]})})]})]})]})]},i.id)};!function(e){e.ASC="asc",e.DESC="desc",e.UNSELECTED="unselected"}(z||(z={}));var Y=function(e){var n=e.sortField,r=e.isLoading,i=function(e){var n=e.sortField,r=e.isLoading,t=(0,C.useSelector)(l.dp),i=(0,C.useDispatch)(),s=(0,o.useState)(z.UNSELECTED),a=s[0],c=s[1],u=(0,o.useState)(!1),d=u[0],h=u[1];return(0,o.useEffect)((function(){r||h(!1)}),[r]),(0,o.useEffect)((function(){void 0===t.sort_direction&&c(z.UNSELECTED)}),[t]),{handleButtonClick:(0,o.useCallback)((function(){switch(h(!0),i((0,l.PU)(n)),a){case z.UNSELECTED:i((0,l.iX)(z.ASC)),c(z.ASC);break;case z.ASC:i((0,l.iX)(z.DESC)),c(z.DESC);break;case z.DESC:i((0,l.p2)()),c(z.UNSELECTED)}}),[a,c,i,n]),buttonState:a,wasButtonJustClicked:d}}({sortField:n,isLoading:r}),s=i.buttonState,a=i.handleButtonClick,u=i.wasButtonJustClicked,d=null;switch(s){case z.ASC:d=(0,c.jsx)(j.HK,{up:!0});break;case z.DESC:d=(0,c.jsx)(j.HK,{up:!1});break;case z.UNSELECTED:default:d=(0,c.jsx)(j.HK,{})}return(0,c.jsx)(t.kC,{paddingLeft:"3px",children:(0,c.jsx)(b.hU,{variant:"ghost","aria-label":"Sort requests",icon:d,isLoading:r&&u,onClick:a})})},G=function(){var e=(0,E.T)(),n=(0,E.C)(l.dp),r=(0,E.C)(l.fe),i=r.checkAll,s=r.errorRequests,a=(0,l.QA)(n),u=a.data,h=a.isFetching,f=u||{items:[],total:0},p=f.items,x=f.total,v=(0,o.useCallback)((function(){return p.filter((function(e){return"error"===e.status})).map((function(e){return e.id}))}),[p]),g=function(n,r){var t;t=r?[].concat((0,d.Z)(s),[n]):s.filter((function(e){return e!==n})),e((0,l.uT)({checkAll:r&&i,errorRequests:t}))};return(0,o.useEffect)((function(){var r;h&&null!==(r=n.status)&&void 0!==r&&r.includes("error")&&e((0,l.uT)({checkAll:!1,errorRequests:[]}))}),[e,n.status,h]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(D.iA,{size:"sm",children:[(0,c.jsx)(D.hr,{children:(0,c.jsxs)(D.Tr,{children:[(0,c.jsx)(D.Th,{px:0,children:(0,c.jsx)(P.XZ,{"aria-label":"Select all",isChecked:i,isDisabled:!p.some((function(e){return"error"===e.status})),onChange:function(){var n=!i;e((0,l.uT)({checkAll:n,errorRequests:n?v():[]}))}})}),(0,c.jsx)(D.Th,{pl:0,children:"Status"}),(0,c.jsx)(D.Th,{children:(0,c.jsxs)(t.kC,{alignItems:"center",children:["Days Left"," ",(0,c.jsx)(Y,{sortField:"due_date",isLoading:h})]})}),(0,c.jsx)(D.Th,{children:"Request Type"}),(0,c.jsx)(D.Th,{children:"Subject Identity"}),(0,c.jsx)(D.Th,{children:"Time Received"}),(0,c.jsx)(D.Th,{children:"Reviewed By"}),(0,c.jsx)(D.Th,{children:"Request ID"}),(0,c.jsx)(D.Th,{})]})}),(0,c.jsx)(D.p3,{children:p.map((function(e){return(0,c.jsx)(K,{isChecked:s.includes(e.id),onCheckChange:g,request:e},e.id)}))})]}),(0,c.jsx)(T.Z,{page:n.page,size:n.size,total:x,handleNextPage:function(){e((0,l.YA)(n.page+1))},handlePreviousPage:function(){e((0,l.YA)(n.page-1))}})]})},$=s()((function(){return Promise.all([r.e(4231),r.e(3893),r.e(7036)]).then(r.bind(r,67036))}),{loading:function(){return(0,c.jsx)("div",{children:"Loading..."})},loadableGenerated:{webpack:function(){return[67036]}}}),J=function(){var e=function(){var e=(0,a.VY)().errorAlert,n=(0,o.useState)(!1),r=n[0],i=n[1],s=(0,o.useState)({count:0,total:0}),u=s[0],d=s[1],h=(0,o.useState)(!0),f=h[0],p=h[1],x=(0,l.tE)().data,v=(0,l.QA)({status:["error"]},{pollingInterval:15e3,skip:f}).data;return(0,o.useEffect)((function(){p(!(x&&x.notify_after_failures>0))}),[x]),(0,o.useEffect)((function(){var e=(null===v||void 0===v?void 0:v.total)||0;e>=((null===x||void 0===x?void 0:x.notify_after_failures)||0)&&e>u.total?(d({count:e-u.total,total:e}),i(!0)):i(!1)}),[null===v||void 0===v?void 0:v.total,null===x||void 0===x?void 0:x.notify_after_failures,u.total]),{processing:function(){r&&e((0,c.jsxs)(t.xu,{children:["DSR automation has failed for"," ",(0,c.jsx)(t.xv,{as:"span",fontWeight:"semibold",children:u.count})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null,id:"dsrErrorAlert"})}}}().processing;return(0,o.useEffect)((function(){e()}),[e]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(t.kC,{children:[(0,c.jsx)(t.X6,{mb:8,fontSize:"2xl",fontWeight:"semibold",children:"Privacy Requests"}),(0,c.jsx)(t.LZ,{}),(0,c.jsx)($,{})]}),(0,c.jsx)(R,{}),(0,c.jsx)(G,{})]})}},1521:function(e,n,r){var t=r(59499),i=r(50029),s=r(16835),o=r(87794),a=r.n(o),l=r(52565),c=r(1396),u=r(43894),d=r(67294),h=r(97142),f=r(65698),p=r(70783),x=r(70918),v=r(85893);function g(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function j(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?g(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var b=(0,l.Gp)((function(e,n){var r=e.buttonProps,t=e.handleBlur,o=e.subjectRequest,l=(0,h.T)(),g=(0,d.useState)(!1),b=g[0],m=g[1],y=(0,p.VY)(),C=y.errorAlert,w=y.successAlert,S=(0,h.C)(x.fe).errorRequests,k=(0,x.JD)(),O=(0,s.Z)(k,1)[0],z=(0,x.Fq)(),R=(0,s.Z)(z,1)[0],D=function(){var e=(0,i.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,O(S);case 3:"error"in(n=e.sent)?(l((0,x.uT)({checkAll:!1,errorRequests:[]})),C((0,f.e$)(n.error),"DSR batch automation has failed due to the following:",{duration:null})):(n.data.failed.length>0&&C((0,v.jsxs)(c.xu,{children:["DSR automation has failed for"," ",(0,v.jsx)(c.xv,{as:"span",fontWeight:"semibold",children:n.data.failed.length})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null}),n.data.succeeded.length>0&&w("Privacy request(s) are now being reprocessed.")),m(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.Z)(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.next=5,R(o);case 5:"error"in(r=e.sent)?C((0,f.e$)(r.error),"DSR automation has failed for this privacy request due to the following:",{duration:null}):w("Privacy request is now being reprocessed."),m(!1),t&&t(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(u.zx,j(j({},r),{},{isDisabled:b,isLoading:b,loadingText:"Reprocessing",onClick:o?P:D,ref:n,spinnerPlacement:"end",variant:"outline",_hover:{bg:"gray.100"},_loading:{opacity:1,div:{opacity:.4}},children:"Reprocess"}))}));n.Z=b}}]);