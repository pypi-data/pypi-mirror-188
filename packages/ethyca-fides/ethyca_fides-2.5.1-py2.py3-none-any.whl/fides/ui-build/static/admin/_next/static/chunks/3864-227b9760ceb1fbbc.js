"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3864],{77336:function(e,r,n){n.d(r,{At:function(){return h},aG:function(){return v},gN:function(){return f}});var a=n(52565),s=n(89816),t=n(40125),i=n(67294);function c(){return c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}function o(e,r){if(null==e)return{};var n,a,s={},t=Object.keys(e);for(a=0;a<t.length;a++)n=t[a],r.indexOf(n)>=0||(s[n]=e[n]);return s}var l=["spacing"],d=["isCurrentPage","as","className","href"],u=["isCurrentPage","separator","isLastChild","spacing","children","className"],p=["children","spacing","separator","className"],m=(0,a.Gp)((function(e,r){var n=e.spacing,s=o(e,l),t=c({mx:n},(0,a.yK)().separator);return i.createElement(a.m$.span,c({ref:r,role:"presentation"},s,{__css:t}))}));s.Ts&&(m.displayName="BreadcrumbSeparator");var h=(0,a.Gp)((function(e,r){var n=e.isCurrentPage,t=e.as,l=e.className,u=e.href,p=o(e,d),m=(0,a.yK)(),h=c({ref:r,as:t,className:(0,s.cx)("chakra-breadcrumb__link",l)},p);return n?i.createElement(a.m$.span,c({"aria-current":"page",__css:m.link},h)):i.createElement(a.m$.a,c({__css:m.link,href:u},h))}));s.Ts&&(h.displayName="BreadcrumbLink");var f=(0,a.Gp)((function(e,r){var n=e.isCurrentPage,l=e.separator,d=e.isLastChild,p=e.spacing,f=e.children,v=e.className,b=o(e,u),x=(0,t.WR)(f).map((function(e){return e.type===h?i.cloneElement(e,{isCurrentPage:n}):e.type===m?i.cloneElement(e,{spacing:p,children:e.props.children||l}):e})),g=c({display:"inline-flex",alignItems:"center"},(0,a.yK)().item),j=(0,s.cx)("chakra-breadcrumb__list-item",v);return i.createElement(a.m$.li,c({ref:r,className:j},b,{__css:g}),x,!d&&i.createElement(m,{spacing:p},l))}));s.Ts&&(f.displayName="BreadcrumbItem");var v=(0,a.Gp)((function(e,r){var n=(0,a.jC)("Breadcrumb",e),l=(0,a.Lr)(e),d=l.children,u=l.spacing,m=void 0===u?"0.5rem":u,h=l.separator,f=void 0===h?"/":h,v=l.className,b=o(l,p),x=(0,t.WR)(d),g=x.length,j=x.map((function(e,r){return i.cloneElement(e,{separator:f,spacing:m,isLastChild:g===r+1})})),w=(0,s.cx)("chakra-breadcrumb",v);return i.createElement(a.m$.nav,c({ref:r,"aria-label":"breadcrumb",className:w,__css:n.container},b),i.createElement(a.Fo,{value:n},i.createElement(a.m$.ol,{className:"chakra-breadcrumb__list"},j)))}));s.Ts&&(v.displayName="Breadcrumb")},70783:function(e,r,n){n.d(r,{HK:function(){return t},VY:function(){return a.V}});var a=n(63719),s=n(65698),t=function(){var e=(0,a.V)().errorAlert;return{handleError:function(r){var n="An unexpected error occurred. Please try again.";(0,s.Ot)(r)?n=r.data.detail:(0,s.tB)(r)&&(n=r.data.detail[0].msg),e(n)}}};n(67294)},63719:function(e,r,n){n.d(r,{V:function(){return u}});var a=n(59499),s=n(9555),t=n(34532),i=n(1396),c=n(46995),o=n(85893);function l(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?l(Object(n),!0).forEach((function(r){(0,a.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var u=function(){var e=(0,s.pm)();return{errorAlert:function(r,n,a){var s=d(d({},a),{},{position:(null===a||void 0===a?void 0:a.position)||"top",render:function(e){var a=e.onClose;return(0,o.jsxs)(t.bZ,{alignItems:"normal",status:"error",children:[(0,o.jsx)(t.zM,{}),(0,o.jsxs)(i.xu,{children:[n&&(0,o.jsx)(t.Cd,{children:n}),(0,o.jsx)(t.X,{children:r})]}),(0,o.jsx)(c.P,{onClick:a,position:"relative",right:0,size:"sm",top:-1})]})}});null!==a&&void 0!==a&&a.id&&e.isActive(a.id)?e.update(a.id,s):e(s)},successAlert:function(r,n,a){var s=d(d({},a),{},{position:(null===a||void 0===a?void 0:a.position)||"top",render:function(e){var a=e.onClose;return(0,o.jsxs)(t.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,o.jsx)(t.zM,{}),(0,o.jsxs)(i.xu,{children:[n&&(0,o.jsx)(t.Cd,{children:n}),(0,o.jsx)(t.X,{children:r})]}),(0,o.jsx)(c.P,{onClick:a,position:"relative",right:0,size:"sm",top:-1})]})}});null!==a&&void 0!==a&&a.id&&e.isActive(a.id)?e.update(a.id,s):e(s)}}}},83339:function(e,r,n){n.d(r,{Z:function(){return S}});var a=n(27812),s=n(50029),t=n(16835),i=n(87794),c=n.n(i),o=n(1396),l=n(12156),d=n(43894),u=n(70783),p=n(82175),m=n(41664),h=n.n(m),f=n(11163),v=n(74231),b=n(96016),x=n(18459),g=n(59499),j=n(20650),w=n(37023),y=n(64598),P=n(7906),O=n(67294),_=n(43072),C=n(85893);function N(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?N(Object(n),!0).forEach((function(r){(0,g.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var E=function(e){var r=function(e){var r=(0,j.qY)(),n=(0,O.useState)(""),a=n[0],i=n[1],o=(0,O.useState)(""),l=o[0],d=o[1],u=(0,_.ev)(),p=(0,t.Z)(u,2),m=p[0],h=p[1].isLoading,f=!!(e&&l&&a),v=function(){var n=(0,s.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f&&m({id:e,old_password:a,new_password:l}).unwrap().then((function(){return r.onClose()}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return k(k({},r),{},{changePasswordValidation:f,handleChange:function(e){"oldPassword"===e.target.name?i(e.target.value):d(e.target.value)},handleChangePassword:v,isLoading:h,newPasswordValue:l,oldPasswordValue:a})}(e.id),n=r.changePasswordValidation,a=r.handleChange,i=r.handleChangePassword,l=r.isLoading,u=r.isOpen,p=r.newPasswordValue,m=r.oldPasswordValue,h=r.onClose,f=r.onOpen;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.zx,{bg:"primary.800",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},colorScheme:"primary",maxWidth:"40%",size:"sm",onClick:f,children:"Update Password"}),(0,C.jsxs)(w.u_,{isCentered:!0,isOpen:u,onClose:h,children:[(0,C.jsx)(w.ZA,{}),(0,C.jsxs)(w.hz,{children:[(0,C.jsx)(w.xB,{children:"Update Password"}),(0,C.jsx)(w.ol,{}),(0,C.jsx)(w.fe,{pb:6,children:(0,C.jsxs)(o.Kq,{direction:"column",spacing:"15px",children:[(0,C.jsx)(y.NI,{children:(0,C.jsx)(P.II,{isRequired:!0,name:"oldPassword",onChange:a,placeholder:"Old Password",type:"password",value:m})}),(0,C.jsx)(y.NI,{children:(0,C.jsx)(P.II,{isRequired:!0,name:"newPassword",onChange:a,placeholder:"New Password",type:"password",value:p})})]})}),(0,C.jsxs)(w.mz,{children:[(0,C.jsx)(d.zx,{bg:"white",marginRight:"10px",onClick:h,size:"sm",variant:"solid",width:"50%",children:"Cancel"}),(0,C.jsx)(d.zx,{bg:"primary.800",color:"white",disabled:!n,isLoading:l,mr:3,onClick:i,size:"sm",type:"submit",variant:"solid",width:"50%",children:"Change Password"})]})]})]})]})},z={username:"",first_name:"",last_name:"",password:"",scopes:["privacy-request:read"]},Z=v.Ry().shape({username:v.Z_().required().label("Username"),first_name:v.Z_().label("First name"),last_name:v.Z_().label("Last name"),password:v.Z_().required().min(8,"Password must have at least eight characters.").matches(/[0-9]/,"Password must have at least one number.").matches(/[A-Z]/,"Password must have at least one capital letter.").matches(/[a-z]/,"Password must have at least one lowercase letter.").matches(/[\W]/,"Password must have at least one symbol.").label("Password"),scopes:v.IX().of(v.Z_())}),S=function(e){var r=e.onSubmit,n=e.initialValues,i=e.canEditNames,m=e.canChangePassword,v=(0,f.useRouter)(),g=(0,u.HK)().handleError,j=Array.isArray(v.query.id)?v.query.id[0]:v.query.id,w=null==j,y=!w&&!i,P=(0,_.lD)(),O=(0,t.Z)(P,1)[0],N=function(){var e=(0,s.Z)(c().mark((function e(n){var s,t,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n);case 2:if(!("error"in(s=e.sent))){e.next=6;break}return g(s.error),e.abrupt("return");case 6:return t=s.data,i={user_id:t.id,scopes:(0,a.Z)(new Set([].concat((0,a.Z)(n.scopes),["privacy-request:read"])))},e.next=10,O(i);case 10:"error"in e.sent||v.push(x.e3);case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),k=m?Z:Z.omit(["password"]);return(0,C.jsx)(p.J9,{onSubmit:N,initialValues:null!==n&&void 0!==n?n:z,validationSchema:k,children:function(e){var r=e.values,n=e.setFieldValue;return(0,C.jsx)(p.l0,{children:(0,C.jsxs)(o.xu,{maxW:["xs","xs","100%"],width:"100%",children:[(0,C.jsxs)(o.Kq,{mb:8,spacing:6,children:[(0,C.jsxs)(o.Kq,{mb:8,spacing:6,maxWidth:"40%",children:[(0,C.jsx)(b.j0,{name:"username",label:"Username",placeholder:"Enter new username"}),(0,C.jsx)(b.j0,{name:"first_name",label:"First Name",placeholder:"Enter first name of user",disabled:y}),(0,C.jsx)(b.j0,{name:"last_name",label:"Last Name",placeholder:"Enter last name of user",disabled:y}),w?(0,C.jsx)(b.j0,{name:"password",label:"Password",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol."}):m&&null!=j&&(0,C.jsx)(E,{id:j})]}),(0,C.jsx)(o.iz,{mb:7,mt:7}),(0,C.jsx)(o.X6,{fontSize:"xl",colorScheme:"primary",children:"Privileges"}),(0,C.jsx)(o.xv,{children:"Select privileges to assign to this user"}),(0,C.jsx)(o.iz,{mb:2,mt:2}),(0,C.jsx)(o.Kq,{spacing:[1,5],direction:"column",children:x.GM.map((function(e){var s=r.scopes.indexOf(e.scope)>=0;return(0,C.jsx)(l.XZ,{colorScheme:"purple",onChange:function(){n("scopes",s?r.scopes.filter((function(r){return r!==e.scope})):[].concat((0,a.Z)(r.scopes),[e.scope]))},id:"scopes-".concat(e.privilege),name:"scopes",isChecked:s,value:"privacy-request:read"===e.scope?void 0:e.scope,isDisabled:"privacy-request:read"===e.scope,isReadOnly:"privacy-request:read"===e.scope,children:e.privilege},e.privilege)}))})]}),(0,C.jsx)(h(),{href:x.e3,passHref:!0,children:(0,C.jsx)(d.zx,{variant:"outline",mr:3,size:"sm",children:"Cancel"})}),(0,C.jsx)(d.zx,{type:"submit",bg:"primary.800",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},colorScheme:"primary",size:"sm",children:"Save"})]})})}})}},33278:function(e,r,n){var a=n(1396),s=n(77336),t=n(41664),i=n.n(t),c=(n(67294),n(84247)),o=n(18459),l=n(85893);r.Z=function(e){var r=e.title,n=e.children;return(0,l.jsxs)(c.Z,{title:"User Management",children:[(0,l.jsxs)(a.X6,{fontSize:"2xl",fontWeight:"semibold",children:["User Management",(0,l.jsx)(a.xu,{mt:2,mb:7,children:(0,l.jsxs)(s.aG,{fontWeight:"medium",fontSize:"sm",children:[(0,l.jsx)(s.gN,{children:(0,l.jsx)(i(),{href:o.e3,passHref:!0,children:(0,l.jsx)(s.At,{href:o.e3,children:"User Management"})})}),(0,l.jsx)(s.gN,{children:(0,l.jsx)(s.At,{href:"#",children:r})})]})})]}),n]})}}}]);