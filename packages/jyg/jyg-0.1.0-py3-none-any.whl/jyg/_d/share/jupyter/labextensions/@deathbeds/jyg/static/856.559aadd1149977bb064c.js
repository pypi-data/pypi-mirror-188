"use strict";(self.webpackChunk_deathbeds_jyg=self.webpackChunk_deathbeds_jyg||[]).push([[856,523,101],{820:(e,s,t)=>{t.d(s,{h:()=>r,j:()=>o});var n=t(152);const i='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">\n <g class="jp-icon3 jp-icon-selectable" transform="matrix(.92922 0 0 .92922 .22474 .22474)" fill="#f57c00">\n  <path transform="scale(.26458)" d="m12-0.03125a12.032 12.032 0 0 0-12.031 12.031 12.032 12.032 0 0 0 12.031 12.031 12.032 12.032 0 0 0 12.031-12.031 12.032 12.032 0 0 0-12.031-12.031zm0 0.91602a11.116 11.116 0 0 1 11.115 11.115 11.116 11.116 0 0 1-11.115 11.115 11.116 11.116 0 0 1-11.115-11.115 11.116 11.116 0 0 1 11.115-11.115zm0 0.71484a10.401 10.401 0 0 0-10.4 10.4 10.401 10.401 0 0 0 10.4 10.4 10.401 10.401 0 0 0 10.4-10.4 10.401 10.401 0 0 0-10.4-10.4zm-1.3672 3.7871c0.26068-7.824e-4 0.45697-7.106e-4 0.60156 0 0.28918 0.00113 0.37693 0.00573 0.38672 0.013672 0.06982 0.057938 0.1076 0.24281 0.07813 0.38477-0.01342 0.064547-0.03092 0.093419-0.07813 0.14062-0.06013 0.06017-0.094 0.073824-0.29492 0.11914-0.19108 0.04309-0.37373 0.17724-0.45117 0.33008-0.11641 0.22974-0.10759 0.36919 0.05273 0.98828 0.11894 0.45929 0.43333 1.5431 0.74219 2.5508 0.67068 2.1882 0.74551 2.4178 0.78516 2.4473 0.02653 0.01999 0.10163 0.02482 0.12695 0.0078 0.03772-0.02482 0.09743-0.18285 0.27734-0.7207 0.52807-1.6142 1.0158-3.1455 1.5176-4.7539 0.07018-0.26237 0.02869-0.50274-0.10938-0.63672-0.07453-0.07234-0.20986-0.15128-0.30469-0.17773-0.23953-0.066939-0.39308-0.16247-0.43945-0.27344-0.04532-0.10851 4.56e-4 -0.31255 0.08398-0.38281l0.04102-0.037109 1.3008 0.00977 1.2988 0.00781 0.08008 0.056641c0.14754 0.10269 0.17598 0.20816 0.0957 0.35938-0.07083 0.13341-0.14138 0.19942-0.26758 0.24609-0.19246 0.071199-0.38694 0.18051-0.47266 0.26562-0.11911 0.11826-0.26091 0.39812-0.43359 0.85938-0.98009 2.8113-1.617 4.8332-2.5449 7.5957 7.94e-4 0.87099 4e-3 2.2963 0.0098 2.4629 0.01777 0.52257 0.01604 0.50823 0.14844 0.64062 0.09405 0.09404 0.18756 0.13649 0.41992 0.19141 0.37201 0.08787 0.46115 0.15293 0.46094 0.32617-7.2e-5 0.06853-0.01091 0.106-0.04492 0.14844l-0.04492 0.05664h-1.4121c-0.77606 0-1.4433-0.0073-1.4824-0.01563-0.0511-0.01096-0.0792-0.0307-0.09961-0.07031-0.03247-0.0632-0.03654-0.23089-0.0078-0.28516 0.02536-0.04702 0.12112-0.09566 0.37109-0.1875 0.11037-0.04055 0.22197-0.09495 0.24805-0.11914 0.09548-0.0892 0.10107-1.5209 0.11328-3.0078-0.90713-2.6362-1.6524-5.3279-2.6954-8.209-0.077779-0.15408-0.31265-0.41201-0.48242-0.53125-0.037908-0.026528-0.18222-0.10679-0.32422-0.17773-0.22133-0.11055-0.26601-0.13772-0.30078-0.1875-0.08417-0.12015-0.06153-0.2986 0.048828-0.38281l0.048828-0.037109 1.959-0.00977c0.40761-0.00224 0.73343-0.00312 0.99414-0.00391zm6.9434 6.2871c0.0853-0.0029 0.17262 2e-3 0.25781 0.01172 0.23176 0.02684 0.49636 0.09132 0.70703 0.17383 0.26309 0.10307 0.34415 0.09664 0.55078-0.04883 0.06618-0.0466 0.14762-0.08932 0.18164-0.0957 0.13535-0.02532 0.26899 0.07085 0.35547 0.25586 0.03892 0.0833 0.04102 0.11325 0.04102 0.65625 0 0.60568-0.0082 0.68311-0.08984 0.74024-0.06002 0.04204-0.16694 0.03426-0.23438-0.01563-0.08496-0.06271-0.14315-0.1359-0.24414-0.31641-0.1068-0.19087-0.26947-0.4124-0.3457-0.46875-0.16875-0.12468-0.42058-0.19516-0.68945-0.19531-0.25138-1.48e-4 -0.43216 0.06053-0.65039 0.2207-0.16358 0.12008-0.32441 0.36353-0.44727 0.67383-0.21789 0.55019-0.28223 1.2576-0.16602 1.8281 0.09581 0.47039 0.21946 0.7718 0.42969 1.0508 0.23592 0.31306 0.46426 0.46274 0.72461 0.47461 0.18334 0.0083 0.38258-0.03418 0.55859-0.11914 0.28411-0.13681 0.62487-0.44755 0.82812-0.75195h-0.0078c0.05124-0.11714 0.14401-0.72585 0.0098-0.95508-0.0015-0.01595-0.012-0.0823-0.09375-0.08789l-0.35938 0.01367a0.66963 0.66963 0 0 1 0.02344 0.17188 0.66963 0.66963 0 0 1-0.66992 0.66992 0.66963 0.66963 0 0 1-0.66992-0.66992 0.66963 0.66963 0 0 1 0.46875-0.63672c9.93e-4 -8e-4 0.0028-0.0012 0.0039-2e-3 0.01028-0.0067 0.02275-0.01197 0.04297-0.01367 0.0012-9.5e-5 0.0027 7.6e-5 0.0039 0a0.66963 0.66963 0 0 1 0.15039-0.01758 0.66963 0.66963 0 0 1 0.13672 0.01563h2e-3l1.2637-0.0078c0.0898-0.01259 0.15953 0.03542 0.17578 0.16211 0.0091 0.2462-0.0049 1.1493-0.04297 1.3652h-0.0039c-0.01392 0.08842-0.04832 0.19151-0.10547 0.30664-0.243 0.48974-0.7617 0.90754-1.2988 1.0469-0.14838 0.03852-0.23883 0.04744-0.47656 0.05273-0.1618 0.0036-0.31572 0.0025-0.3418-2e-3 -0.02607-0.0045-0.11115-0.01638-0.18945-0.02734-0.44571-0.0632-0.7918-0.23409-1.0625-0.52344-0.36484-0.39-0.69952-1.1406-0.78125-1.752-0.02722-0.20383-0.01039-0.74842 0.0293-0.96484 0.10168-0.5533 0.26771-1.0099 0.49024-1.3418 0.3547-0.52896 0.93805-0.85654 1.5352-0.87695zm-12.154 0.26953h1.4121c0.77606 0 1.4433 0.0073 1.4824 0.01563 0.051062 0.01096 0.079124 0.0307 0.099609 0.07031 0.032504 0.0632 0.03665 0.23089 0.00781 0.28516-0.025319 0.04702-0.12112 0.09566-0.37109 0.1875-0.11037 0.04055-0.22201 0.09484-0.24805 0.11914-0.10742 0.1003-0.10225 0.02613-0.11914 1.6914-0.01474 1.4561-0.018593 1.549-0.054687 1.6836-0.10431 0.38846-0.29646 0.72462-0.57617 1.0078-0.26185 0.26513-0.52193 0.39401-0.89844 0.44336-0.49983 0.06554-1.0302-0.0097-1.3281-0.18945-0.15572-0.09392-0.44576-0.33317-0.53125-0.4375-0.1079-0.13168-0.19432-0.28666-0.22656-0.4043-0.015874-0.05855-0.056319-0.16263-0.089844-0.23047-0.044924-0.09098-0.062955-0.15568-0.068359-0.24805-0.00794-0.13769 0.033086-0.382 0.082031-0.47656 0.05983-0.1157 0.19357-0.23607 0.33594-0.30274 0.12778-0.05984 0.15159-0.06438 0.32812-0.06445 0.17666-4.2e-5 0.19887 0.0048 0.31641 0.0625 0.069619 0.03439 0.14914 0.08747 0.17578 0.11914 0.15766 0.18731 0.14829 0.69932-0.015625 0.86328-0.03363 0.03363-0.097501 0.07238-0.14062 0.08398-0.073931 0.02003-0.077825 0.02557-0.089844 0.10547-0.026461 0.17658 0.031294 0.31056 0.17578 0.40625 0.23176 0.15353 0.49953 0.11787 0.76758-0.10156 0.21302-0.17438 0.36121-0.39713 0.47266-0.71289 0.04292-0.1217 0.044696-0.13646 0.050781-1.1289 0.0034-0.55325-6.57e-4 -1.2219-0.00977-1.4844-0.01776-0.52256-0.016033-0.50824-0.14843-0.64063-0.094029-0.094039-0.18756-0.13649-0.41992-0.19141-0.37202-0.08787-0.46115-0.15292-0.46094-0.32617 7.19e-5 -0.068527 0.01102-0.106 0.044922-0.14844z"/>\n </g>\n</svg>\n',o=new n.LabIcon({name:"jyg:logo",svgstr:i}),r=new n.LabIcon({name:"jyg:danger",svgstr:i.replace("jp-icon3","jp-error-color1")})},856:(e,s,t)=>{t.r(s),t.d(s,{CSS:()=>a.ux,CommandIds:()=>a.OF,DEBUG:()=>a.eM,EMOJI:()=>a.Dd,IBoardManager:()=>a.PI,INFO_METHODS:()=>a.xT,IRemoteCommandManager:()=>a.WT,IWindowProxyCommandSource:()=>a.GC,NS:()=>a.NS,PACKAGE:()=>a.iR,PLUGIN_ID:()=>a.Uu,RemoteCommandManager:()=>i.i,VERSION:()=>a.q4,WebSocketCommandSource:()=>r.WebSocketCommandSource,WindowProxyCommandSource:()=>o.WindowProxyCommandSource,danger:()=>n.h,logo:()=>n.j});var n=t(820),i=t(784),o=t(101),r=t(523),a=t(512)},784:(e,s,t)=>{t.d(s,{i:()=>a});var n=t(526),i=t(512);const{emptyObject:o}=n.JSONExt,r=Object.freeze("");class a{constructor(e){this._sources=new Map,this._commandsInfo={},this._skipCommandMethod=new Map,this.onInitFail=e=>{console.error(i.Dd,"failed to initialize",e)},this.getAppInfo=async()=>{const e=await this.getCommandsInfo();return{url:`${window.location.origin}${window.location.pathname}`,version:this._app.version,plugins:this._app.listPlugins(),name:this._app.name,title:document.title,commands:e}},this.run=async(e,s)=>await this._app.commands.execute(e,s),this._app=e.app,this._initialize().catch(this.onInitFail)}async _initialize(){await this._app.started}addSource(e,s){if(this._sources.has(e))throw new Error(`${e} source already registered`);this._sources.set(e,s)}async getCommandsInfo(){const{commands:e}=this._app,s={};for(const t of e.listCommands()){const n=s[t]={};for(const s of i.xT){if(this._skipCommandMethod.get([t,s]))continue;let i=null;try{i=e[s](t,o)}catch(e){this._skipCommandMethod.set([t,s],!0);continue}switch(i){case null:case void 0:case o:case r:continue}switch(s){case"isToggled":case"isToggleable":case"isVisible":case"isEnabled":if(0==i)continue;break;case"mnemonic":if(-1==i)continue;break;case"dataset":if(!Object.keys(i).length)continue;break;case"icon":i.svgstr&&(i=i.svgstr)}n[s]=i}}return s}}},494:(e,s,t)=>{t.d(s,{W:()=>o});var n=t(526),i=t(512);class o{constructor(e){this._client=null,this._ready=new n.PromiseDelegate,this.onRequest=async(e,s)=>{let t;await this._ready,i.eM&&console.warn(i.Dd,"message received",e);let n=null;const{request_id:o,request_type:r}=e,a={request_id:o,request_type:r};switch(r){case"app_info":t=await this._remoteCommands.getAppInfo();break;case"run":try{t=await this._remoteCommands.run(e.content.id,e.content.args||{})}catch(e){n=e}break;default:return console.warn(i.Dd,"unexpected request",e),{}}try{n?await this.sendError({error:`${n}`,...a},s):await this.sendResponse({content:t,...a},s)}catch(e){await this.sendError({error:`multiple errors\n${e}\n${n}`,...a},s)}},this._remoteCommands=e.remoteCommands}async initialize(e){this._client=await this.initClient(e)}async initClient(e){return null}async sendError(e,s){}async sendResponse(e,s){}}},523:(e,s,t)=>{t.r(s),t.d(s,{API_URL:()=>a,WS_URL:()=>c,WebSocketCommandSource:()=>l});var n=t(671),i=t(526),o=t(512),r=t(494);const a=n.URLExt.join(n.PageConfig.getBaseUrl(),"jyg"),c=n.URLExt.join(a,"ws").replace(/^http/,"ws");class l extends r.W{constructor(){super(...arguments),this._ready=new i.PromiseDelegate,this.onMessage=async e=>{this.onRequest(JSON.parse(e.data),this._client).catch(this.onError)},this.onClose=async e=>{console.warn(o.Dd,"websocket was closed",e)},this.onError=async e=>{console.error(o.Dd,"encountered a websocket error",e)}}async initClient(e){const s=new e.serverSettings.WebSocket(c);return s.onopen=()=>this._ready.resolve(),s.onmessage=this.onMessage,s.onclose=this.onClose,s.onerror=this.onError,s}async sendResponse(e){this._client.send(JSON.stringify(e))}async sendError(e){this._client.send(JSON.stringify(e))}}},101:(e,s,t)=>{t.r(s),t.d(s,{WindowProxyCommandSource:()=>o});var n=t(512),i=t(494);class o extends i.W{constructor(){super(...arguments),this._sources=[],this._listening=!1,this._settings=null,this.onSourceMessage=async e=>{if(!this.composite.enabled)return void this.unlisten();const{source:s,origin:t}=e,n=this.isAllowedSource(s,t);n&&this.onRequest(JSON.parse(e.data),n).catch(this.onError)}}async initClient(e){return await e.appReady,null}set settings(e){if(this._settings)throw new Error("already has settings");this._settings=e,e.changed.connect(this.onSettingsChanged,this),this.onSettingsChanged()}onSettingsChanged(){var e;(null===(e=this._settings)||void 0===e?void 0:e.composite.enabled)&&this._listening&&this.unlisten()}listen(){this.composite.enabled&&(window.addEventListener("message",this.onSourceMessage),this._listening=!0)}unlisten(){window.removeEventListener("message",this.onSourceMessage),this._listening=!1,this._sources=[]}addSource(e,s){const t=this.isAllowedSource(e,s);t&&(this._sources.push(t),this._listening||this.listen())}removeSource(e){const s=this._sources.indexOf(e);-1!=s&&(this._sources=this._sources.splice(s,1)),this._sources.length||this.unlisten()}get composite(){var e;return(null===(e=this._settings)||void 0===e?void 0:e.composite)||{}}isAllowedSource(e,s){if(!this.composite.enabled||!e)return null;const{composite:t}=this;return t.allow_same_origin&&s==window.origin||t.allowed_origins&&t.allowed_origins.includes(s)?e:null}async sendResponse(e,s){s.postMessage(JSON.stringify(e))}async sendError(e,s){s.postMessage(JSON.stringify(e))}async onError(e){console.error(n.Dd,"encountered an error",e)}}},512:(e,s,t)=>{t.d(s,{ux:()=>y,OF:()=>g,eM:()=>h,Dd:()=>m,PI:()=>u,xT:()=>p,WT:()=>l,GC:()=>d,NS:()=>r,iR:()=>o,Uu:()=>c,q4:()=>a});var n=t(526);const i=JSON.parse('{"name":"@deathbeds/jyg","version":"0.1.0","description":"run Jupyter browser client commands from a CLI, REST API, or other browser windows","license":"BSD-3-Clause","author":"jyg contributors","homepage":"https://github.com/deathbeds/jyg","repository":{"type":"git","url":"https://github.com/deathbeds/jyg.git"},"bugs":{"url":"https://github.com/deathbeds/jyg/issues"},"main":"lib/index.js","files":["{lib,schema,style,src}/**/*.{ts,tsx,eot,gif,html,jpg,js,js.map,json,png,svg,woff2,css}"],"scripts":{"build:ext":"jupyter labextension build .","build:ext:cov":"tsc -b js/tsconfig.cov.json && jlpm build:ext","build:lib":"tsc -b js","build:schema":"jlpm build:schema:msg && jlpm build:schema:boards && jlpm build:schema:window-proxy","build:schema:boards":"json2ts -i schema/boards.json | prettier --stdin-filepath x.ts > js/_boards.ts","build:schema:msg":"json2ts -i src/jyg/schema/jyg-msg.v0.schema.json | prettier --stdin-filepath x.ts > js/_msgV0.ts","build:schema:window-proxy":"json2ts -i schema/window-proxy.json | prettier --stdin-filepath x.ts > js/_windowProxy.ts","watch":"run-p watch:lib watch:ext","watch:ext":"jupyter labextension watch .","watch:lib":"jlpm build:lib -w"},"types":"lib/index.d.ts","resolutions":{"loader-utils":"^2.0.0"},"dependencies":{"@jupyterlab/application":"^3.1.0","@jupyterlab/launcher":"^3.1.0","nunjucks":"^3.2.3"},"devDependencies":{"@ephesoft/webpack.istanbul.loader":"^2.2.0","@istanbuljs/nyc-config-typescript":"^1.0.2","@jupyterlab/builder":"^3.4.8","@types/nunjucks":"^3.2.1","@typescript-eslint/eslint-plugin":"^5.39.0","@typescript-eslint/parser":"^5.39.0","eslint":"^8.24.0","eslint-config-prettier":"^8.5.0","eslint-plugin-import":"^2.26.0","eslint-plugin-prettier":"^4.2.1","eslint-plugin-react":"^7.31.8","json-schema-to-typescript":"^11.0.3","npm-run-all":"^4.1.5","nyc":"^15.1.0","prettier":"^2.7.1","prettier-package-json":"^2.7.0","prettier-plugin-sort-json":"^1.0.0","source-map-loader":"^4.0.1","typescript":"~4.8.4","yarn-deduplicate":"^6.0.0"},"jupyterlab":{"extension":"lib/plugin.js","outputDir":"src/jyg/_d/share/jupyter/labextensions/@deathbeds/jyg","schemaDir":"schema","sharedPackages":{"nunjucks":{"bundled":true,"singleton":false}},"webpackConfig":"./webpack.config.js"},"nyc":{"all":true,"extends":"@istanbuljs/nyc-config-typescript","extension":[".js",".jsx",".ts",".tsx"],"reporter":["lcov","html","text","text-summary"],"require":["ts-node/register","source-map-support/register"],"skip-full":true},"prettier":{"jsonRecursiveSort":true,"overrides":[{"files":"*.jupyterlab-settings","options":{"parser":"json"}}],"printWidth":88,"proseWrap":"always","singleQuote":true}}'),o=t.t(i,2),r=o.name,a=o.version,c=`${r}:plugin`,l=new n.Token(`${r}:IRemoteCommandManager`),d=new n.Token(`${r}:IWindowProxyCommandSource`),u=new n.Token(`${r}:IBoardManager`),h=window.location.href.includes("JYG_DEBUG"),p=["caption","className","dataset","icon","iconClass","iconLabel","isEnabled","isToggleable","isToggled","isVisible","label","mnemonic","usage"],m="ðŸ“º",g={openBoard:"jyg:open-board",closeAllBoards:"jyg:close-all-boards"},y={frame:"jp-Jyg-Frame",switchArea:"jp-Jyg-SwitchArea",htmlSelect:"jp-HTMLSelect",defaultStyle:"jp-DefaultStyle"}}}]);
//# sourceMappingURL=856.559aadd1149977bb064c.js.map?v=559aadd1149977bb064c