(self.webpackChunkPaddleLabel_Frontend=self.webpackChunkPaddleLabel_Frontend||[]).push([[580],{38619:function(v){v.exports={modal:"modal___2aO7U"}},41180:function(v){v.exports={ppcard:"ppcard___27hGd",title:"title___22R8f"}},48627:function(v){v.exports={container:"container___2RXc3"}},26389:function(v){v.exports={modal:"modal___2gJ6d"}},31982:function(v,C,e){"use strict";var z=e(89032),P=e(15746),j=e(11849),i=e(13062),D=e(71230),f=e(11700),B=e(67294),c=e(41180),U=e.n(c),N=function(d){return B.createElement("div",{className:U().ppcard,style:d.style,hidden:d.hidden},B.createElement(D.Z,{className:U().titleRow,style:{display:d.title?void 0:"none"}},B.createElement(f.Z,{className:U().title},d.title)),B.createElement(D.Z,{style:{marginTop:26}},B.createElement(P.Z,{span:24,style:(0,j.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},d.innerStyle)},d.children)))};C.Z=N},11428:function(v,C,e){"use strict";var z=e(67294),P=e(48627),j=e.n(P),i=function(f){return z.createElement("div",{className:"".concat(j().container),style:{backgroundImage:"url(./pics/background.png)"}},f.children)};C.Z=i},35261:function(v,C,e){"use strict";var z=e(71194),P=e(50146),j=e(49111),i=e(19650),D=e(88983),f=e(47933),B=e(47673),c=e(35920),U=e(34792),N=e(48086),u=e(57663),d=e(71577),te=e(9715),_=e(96709),t=e(2824),n=e(67294),Q=e(26389),L=e.n(Q),h=e(83721),A=e(36505),q=function(V){var K,W,b,k=(0,h.Ad)("component.PPExportModal"),E=(0,A.I)("component.PPExportModal"),X=(0,n.useState)(!1),G=(0,t.Z)(X,2),Y=G[0],J=G[1],M=(0,n.useState)(!1),y=(0,t.Z)(M,2),I=y[0],l=y[1],F=_.Z.useForm(),m=(0,t.Z)(F,1),Z=m[0],O=(0,h.os)((K=V.project)===null||K===void 0||(W=K.taskCategory)===null||W===void 0?void 0:W.name),x=O&&(b=h.ux[O])!==null&&b!==void 0&&b.labelFormats?Object.keys(h.ux[O].labelFormats):[],g=(0,n.useState)(),R=(0,t.Z)(g,2),o=R[0],$=R[1];return n.createElement("span",{hidden:V.visible==!1},n.createElement(d.Z,{type:"primary",onClick:function(){return l(!0)}},E("title")),n.createElement(P.Z,{className:L().modal,title:E("title"),open:I,onCancel:function(){return l(!1)},footer:null},n.createElement(_.Z,{form:Z,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(a){console.log("values",a),J(!0),console.log("export values",a),(0,h.Tr)(V.project.projectId,a).then(function(){N.default.success(E("exportSuccess")),l(!1)}).catch(function(r){console.log(r)}).finally(function(){J(!1)})},autoComplete:"off"},n.createElement(_.Z.Item,{label:k("path"),name:"exportDir",rules:[{required:!0,message:E("nullPath")}]},n.createElement(c.Z,null)),n.createElement(_.Z.Item,{name:"exportFormat",label:n.createElement("p",{style:{marginBottom:"0px"}},E("labelFormat")," "),labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:E("nullLabelFormat")}],style:{fontSize:"1.5rem"}},n.createElement(f.ZP.Group,{size:"large",style:{height:"3.13rem"},onChange:function(){$(Z.getFieldValue("exportFormat"))}},x.map(function(s){return n.createElement(f.ZP,{key:s,value:s,disabled:s=="eiseg"},E((0,h.os)(s),"global.labelFormat"))}))),n.createElement(_.Z.Item,{name:"segMaskType",label:k("segMaskType","component.PPCreater"),labelCol:{span:6},wrapperCol:{span:16},style:{fontSize:"1.5rem",display:o=="mask"&&O=="semanticSegmentation"?void 0:"none"}},n.createElement(f.ZP.Group,{size:"large",style:{height:"3.13rem"},value:"grayscale"},["grayscale","pseudo"].map(function(s){return n.createElement(f.ZP,{key:s,value:s},E(s,"global.segMaskType"))}))),n.createElement(_.Z.Item,{wrapperCol:{offset:8,span:16}},n.createElement(i.Z,null,n.createElement(d.Z,{onClick:function(){l(!1),Z.resetFields()}},E("cancel","global")),n.createElement(d.Z,{type:"primary",htmlType:"submit",loading:Y},E("export")))))))};C.Z=q},65732:function(v,C,e){"use strict";e.r(C),e.d(C,{default:function(){return Y}});var z=e(47673),P=e(35920),j=e(57663),i=e(71577),D=e(11849),f=e(39428),B=e(34792),c=e(48086),U=e(3182),N=e(9715),u=e(96709),d=e(2824),te=e(43358),_=e(42239),t=e(67294),n=e(48971),Q=e(11428),L=e(31982),h=e(37071),A=e(83721),q=e(71194),ee=e(50146),V=e(49111),K=e(19650),W=e(38619),b=e.n(W),k=function(M){var y=(0,n.YB)(),I=(0,t.useState)(!1),l=(0,d.Z)(I,2),F=l[0],m=l[1],Z=y.formatMessage({id:"component.PPCreater.cancel"}),O=u.Z.useForm(),x=(0,d.Z)(O,1),g=x[0];function R(){var o=M.project.otherSettings;return o!=null&&o.perviousModel&&o!==null&&o!==void 0&&o.models&&o!==null&&o!==void 0&&o.models[o==null?void 0:o.perviousModel]?!0:(c.default.error("Please set and save ML settings first!"),!1)}return t.createElement("span",{hidden:M.visible==!1},t.createElement(i.Z,{type:"primary",onClick:function(){R()&&m(!0)}},"Train Model"),t.createElement(ee.Z,{className:b().modal,title:"Train Model",visible:F,onCancel:function(){return m(!1)},footer:null},t.createElement(u.Z,{form:g,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function($){var s=$.path;M.trainModel(s),m(!1)},autoComplete:"off"},t.createElement(u.Z.Item,{label:"Dataset Path",name:"path",rules:[{required:!0,message:"Please input dataset path"}]},t.createElement(P.Z,{autoComplete:"off"})),t.createElement(u.Z.Item,{wrapperCol:{offset:8,span:16}},t.createElement(K.Z,null,t.createElement(i.Z,{onClick:function(){m(!1),g.resetFields()}},Z),t.createElement(i.Z,{type:"primary",htmlType:"submit"},"Train"))))))},E=k,X=e(35261),G=function(){var M,y,I,l=(0,A.Gd)(t.useState),F=h.Z.getQueryVariable("projectId"),m=(0,A.RZ)(t.useState),Z=_.Z.Option,O=u.Z.useForm(),x=(0,d.Z)(O,1),g=x[0];(0,t.useEffect)(function(){function a(){return r.apply(this,arguments)}function r(){return r=(0,U.Z)((0,f.Z)().mark(function S(){var H,w,T;return(0,f.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,A.bo)();case 2:if(p.sent){p.next=4;break}return p.abrupt("return");case 4:if(l.getAll(),F){p.next=8;break}return c.default.error("Machine Learning settings are specific to every project. Please choose a project first."),p.abrupt("return");case 8:return p.next=10,l.getCurr(F);case 10:T=p.sent,T!=null&&(H=T.otherSettings)!==null&&H!==void 0&&H.mlBackendUrl&&m.setMlBackendUrl(T==null||(w=T.otherSettings)===null||w===void 0?void 0:w.mlBackendUrl);case 12:case"end":return p.stop()}},S)})),r.apply(this,arguments)}a()},[]),(0,t.useEffect)(function(){if(!!l.curr){var a=l.curr.otherSettings?l.curr.otherSettings:{},r=a.models&&a.perviousModel?a.models[a.perviousModel]:{},S={mlBackendUrl:a.mlBackendUrl,modelName:a.perviousModel,trainBatchSize:r.trainBatchSize};g.setFieldsValue(S),a!=null&&a.mlBackendUrl&&m.setMlBackendUrl(a.mlBackendUrl)}},[l.curr]);function R(){if(!l.curr){c.default.error("Please choose a project first!");return}var a=g.getFieldValue("mlBackendUrl");m.setMlBackendUrl(a);var r=(0,D.Z)((0,D.Z)({},l.curr.otherSettings),{},{mlBackendUrl:a});l.update(l.curr.projectId,{otherSettings:r})}function o(a){if(!l.curr){c.default.error("Please select model first!");return}l.curr.otherSettings||(l.curr.otherSettings={});var r=l.curr.otherSettings.models?l.curr.otherSettings.models:{};r[a.modelName]=a,l.curr.otherSettings.mlBackendUrl=g.getFieldValue("mlBackendUrl"),l.curr.otherSettings.perviousModel=a.modelName,l.curr.otherSettings.models=r,l.update(l.curr.projectId,{otherSettings:l.curr.otherSettings}),c.default.info("Ml setting saved. Let's start trainig or inference!")}function $(a){var r=l.curr.otherSettings;m.train(r.perviousModel,a,r.models[r.perviousModel])}function s(){var a=l.curr.otherSettings;if(!a||!a.mlBackendUrl||!a.perviousModel){c.default.error("Please set and save ml settings first.");return}c.default.info("Running inference."),l.predict(l.curr.projectId,{mlBackendUrl:a.mlBackendUrl,model:a.perviousModel,sameServer:!1,createLabel:!0}).then(function(){c.default.info("Prediction Complete")})}return t.createElement(Q.Z,null,t.createElement(L.Z,null,"Project:",t.createElement(_.Z,{placeholder:"Select a project",onChange:function(r){return l.getCurr(r)},value:(M=l.curr)===null||M===void 0?void 0:M.projectId},(y=l.all)===null||y===void 0?void 0:y.map(function(a){return t.createElement(Z,{value:a.projectId},a.name)}))),t.createElement(L.Z,{hidden:l.curr==null},t.createElement(E,{model:m,project:l.curr,trainModel:$}),t.createElement(X.Z,{project:l.curr}),t.createElement(i.Z,{type:"primary",onClick:function(){var r,S;if(!((r=l.curr)!==null&&r!==void 0&&(S=r.otherSettings)!==null&&S!==void 0&&S.mlBackendUrl)){c.default.error("Set backend url first");return}window.open("".concat(l.curr.otherSettings.mlBackendUrl.replace("model","visualdl")),"_blank")}},"Progress"),t.createElement(i.Z,{type:"primary",onClick:s},"Run Inference")),t.createElement(L.Z,null,t.createElement(i.Z,{type:"primary",onClick:function(){n.m8.push("/".concat(l.curr.taskCategory.name,"?projectId=").concat(l.curr.projectId))}},"Label"),t.createElement(i.Z,{type:"primary",onClick:function(){n.m8.push("/project_overview?projectId=".concat(l.curr.projectId))}},"Project Overview")),t.createElement(L.Z,null,t.createElement(u.Z,{form:g,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(r){o(r)},hidden:l.curr==null},t.createElement(P.Z.Group,{compact:!0},t.createElement(u.Z.Item,{name:"mlBackendUrl",rules:[{required:!0,message:"Please input ml backend url"}],style:{fontSize:"1.5rem"}},t.createElement(P.Z,{autoComplete:"off",allowClear:!0,addonBefore:"ML Backend URL ",style:{textAlign:"left"}})),t.createElement(i.Z,{type:"primary",onClick:R},"Set")),t.createElement(u.Z.Item,{name:"modelName",label:"Model",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please select a model"}],style:{fontSize:"1.5rem"}},t.createElement(_.Z,{placeholder:"Select a model"},(I=m.all)===null||I===void 0?void 0:I.map(function(a){return t.createElement(Z,{value:a.name},a.name)}))),t.createElement(u.Z.Item,{name:"trainBatchSize",label:"Training Batch Size",labelCol:{span:6},wrapperCol:{span:16},style:{fontSize:"1.5rem"}},t.createElement(P.Z,{autoComplete:"off",placeholder:"Training batch size"})),t.createElement(u.Z.Item,{wrapperCol:{span:16,offset:6}},t.createElement(i.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0},"Save")))))},Y=G}}]);
