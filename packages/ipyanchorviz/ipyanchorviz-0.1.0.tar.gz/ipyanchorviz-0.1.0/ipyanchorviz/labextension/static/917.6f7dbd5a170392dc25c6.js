(self.webpackChunkipyanchorviz=self.webpackChunkipyanchorviz||[]).push([[917],{917:(t,n,r)=>{"use strict";r.r(n),r.d(n,{lasso:()=>d});var e=r(301),o=r(626),a=r(72),i=r(299);function s(t){return function(){return t}}function u(t,n,r,e,o,a,i,s,u,c){this.target=t,this.type=n,this.subject=r,this.identifier=e,this.active=o,this.x=a,this.y=i,this.dx=s,this.dy=u,this._=c}function c(){return!e.B.ctrlKey&&!e.B.button}function l(){return this.parentNode}function f(t){return null==t?{x:e.B.x,y:e.B.y}:t}function h(){return navigator.maxTouchPoints||"ontouchstart"in this}u.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var v=r(707),p=r.n(v);function d(){var t,n=[],r=75,v=!0,d=!1,g=!0,_={start:function(){},draw:function(){},end:function(){}};function y(y){var b,m,M,w,B=y.append("g").attr("class","lasso"),x=B.append("path").attr("class","drawn"),k=B.append("path").attr("class","loop_close"),E=B.append("circle").attr("class","origin"),S=function(){var t,n,r,v,p=c,d=l,g=f,_=h,y={},b=(0,o.Z)("start","drag","end"),m=0,M=0;function w(t){t.on("mousedown.drag",B).filter(_).on("touchstart.drag",E).on("touchmove.drag",S).on("touchend.drag touchcancel.drag",P).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function B(){if(!v&&p.apply(this,arguments)){var o=T("mouse",d.apply(this,arguments),e.Jz,this,arguments);o&&((0,e.Ys)(e.B.view).on("mousemove.drag",x,!0).on("mouseup.drag",k,!0),(0,a.Z)(e.B.view),(0,i.r)(),r=!1,t=e.B.clientX,n=e.B.clientY,o("start"))}}function x(){if((0,i.Z)(),!r){var o=e.B.clientX-t,a=e.B.clientY-n;r=o*o+a*a>M}y.mouse("drag")}function k(){(0,e.Ys)(e.B.view).on("mousemove.drag mouseup.drag",null),(0,a.D)(e.B.view,r),(0,i.Z)(),y.mouse("end")}function E(){if(p.apply(this,arguments)){var t,n,r=e.B.changedTouches,o=d.apply(this,arguments),a=r.length;for(t=0;t<a;++t)(n=T(r[t].identifier,o,e.Fq,this,arguments))&&((0,i.r)(),n("start"))}}function S(){var t,n,r=e.B.changedTouches,o=r.length;for(t=0;t<o;++t)(n=y[r[t].identifier])&&((0,i.Z)(),n("drag"))}function P(){var t,n,r=e.B.changedTouches,o=r.length;for(v&&clearTimeout(v),v=setTimeout((function(){v=null}),500),t=0;t<o;++t)(n=y[r[t].identifier])&&((0,i.r)(),n("end"))}function T(t,n,r,o,a){var i,s,c,l=r(n,t),f=b.copy();if((0,e._H)(new u(w,"beforestart",i,t,m,l[0],l[1],0,0,f),(function(){return null!=(e.B.subject=i=g.apply(o,a))&&(s=i.x-l[0]||0,c=i.y-l[1]||0,!0)})))return function h(v){var p,d=l;switch(v){case"start":y[t]=h,p=m++;break;case"end":delete y[t],--m;case"drag":l=r(n,t),p=m}(0,e._H)(new u(w,v,i,t,p,l[0]+s,l[1]+c,l[0]-d[0],l[1]-d[1],f),f.apply,f,[v,o,a])}}return w.filter=function(t){return arguments.length?(p="function"==typeof t?t:s(!!t),w):p},w.container=function(t){return arguments.length?(d="function"==typeof t?t:s(t),w):d},w.subject=function(t){return arguments.length?(g="function"==typeof t?t:s(t),w):g},w.touchable=function(t){return arguments.length?(_="function"==typeof t?t:s(!!t),w):_},w.on=function(){var t=b.on.apply(b,arguments);return t===b?w:t},w.clickDistance=function(t){return arguments.length?(M=(t=+t)*t,w):Math.sqrt(M)},w}().on("start",(function(){w=[],b="",x.attr("d",null),k.attr("d",null),n.nodes().forEach((function(t){t.__lasso.possible=!1,t.__lasso.selected=!1,t.__lasso.hoverSelect=!1,t.__lasso.loopSelect=!1;var n=t.getBoundingClientRect();t.__lasso.lassoPoint=[Math.round(n.left+n.width/2),Math.round(n.top+n.height/2)]})),g&&n.on("mouseover.lasso",(function(){this.__lasso.hoverSelect=!0})),_.start()})).on("drag",(function(){var t,o;"touchmove"===e.B.sourceEvent.type?(t=e.B.sourceEvent.touches[0].clientX,o=e.B.sourceEvent.touches[0].clientY):(t=e.B.sourceEvent.clientX,o=e.B.sourceEvent.clientY);var a=e.Jz(this)[0],i=e.Jz(this)[1];""===b?(b=b+"M "+a+" "+i,m=[t,o],M=[a,i],E.attr("cx",a).attr("cy",i).attr("r",7).attr("display",null)):b=b+" L "+a+" "+i,w.push([t,o]);var s=Math.sqrt(Math.pow(t-m[0],2)+Math.pow(o-m[1],2)),u="M "+a+" "+i+" L "+M[0]+" "+M[1];x.attr("d",b),k.attr("d",u),(d=s<=r)&&v?k.attr("display",null):k.attr("display","none"),n.nodes().forEach((function(t){t.__lasso.loopSelect=!(!d||!v)&&p()(w,t.__lasso.lassoPoint)<1,t.__lasso.possible=t.__lasso.hoverSelect||t.__lasso.loopSelect})),_.draw()})).on("end",(function(){n.on("mouseover.lasso",null),n.nodes().forEach((function(t){t.__lasso.selected=t.__lasso.possible,t.__lasso.possible=!1})),x.attr("d",null),k.attr("d",null),E.attr("display","none"),_.end()}));t.call(S)}return y.items=function(t){if(!arguments.length)return n;var r=(n=t).nodes();return r.forEach((function(t){t.__lasso={possible:!1,selected:!1}})),y},y.possibleItems=function(){return n.filter((function(){return this.__lasso.possible}))},y.selectedItems=function(){return n.filter((function(){return this.__lasso.selected}))},y.notPossibleItems=function(){return n.filter((function(){return!this.__lasso.possible}))},y.notSelectedItems=function(){return n.filter((function(){return!this.__lasso.selected}))},y.closePathDistance=function(t){return arguments.length?(r=t,y):r},y.closePathSelect=function(t){return arguments.length?(v=!0===t,y):v},y.isPathClosed=function(t){return arguments.length?(d=!0===t,y):d},y.hoverSelect=function(t){return arguments.length?(g=!0===t,y):g},y.on=function(t,n){if(!arguments.length)return _;if(1===arguments.length)return _[t];var r=["start","draw","end"];return r.indexOf(t)>-1&&(_[t]=n),y},y.targetArea=function(n){return arguments.length?(t=n,y):t},y}},146:(t,n,r)=>{"use strict";var e=r(5),o=r(740),a=r(442),i=r(972);function s(t,n,r,e){return function(r,o,a){var i=t(t(n(o[1],a[0]),n(-a[1],o[0])),t(n(r[1],o[0]),n(-o[1],r[0]))),s=t(n(r[1],a[0]),n(-a[1],r[0])),u=e(i,s);return u[u.length-1]}}function u(t,n,r,e){return function(o,a,i,s){var u=t(t(r(t(n(i[1],s[0]),n(-s[1],i[0])),a[2]),t(r(t(n(a[1],s[0]),n(-s[1],a[0])),-i[2]),r(t(n(a[1],i[0]),n(-i[1],a[0])),s[2]))),t(r(t(n(a[1],s[0]),n(-s[1],a[0])),o[2]),t(r(t(n(o[1],s[0]),n(-s[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),s[2])))),c=t(t(r(t(n(i[1],s[0]),n(-s[1],i[0])),o[2]),t(r(t(n(o[1],s[0]),n(-s[1],o[0])),-i[2]),r(t(n(o[1],i[0]),n(-i[1],o[0])),s[2]))),t(r(t(n(a[1],i[0]),n(-i[1],a[0])),o[2]),t(r(t(n(o[1],i[0]),n(-i[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),i[2])))),l=e(u,c);return l[l.length-1]}}function c(t,n,r,e){return function(o,a,i,s,u){var c=t(t(t(r(t(r(t(n(s[1],u[0]),n(-u[1],s[0])),i[2]),t(r(t(n(i[1],u[0]),n(-u[1],i[0])),-s[2]),r(t(n(i[1],s[0]),n(-s[1],i[0])),u[2]))),a[3]),t(r(t(r(t(n(s[1],u[0]),n(-u[1],s[0])),a[2]),t(r(t(n(a[1],u[0]),n(-u[1],a[0])),-s[2]),r(t(n(a[1],s[0]),n(-s[1],a[0])),u[2]))),-i[3]),r(t(r(t(n(i[1],u[0]),n(-u[1],i[0])),a[2]),t(r(t(n(a[1],u[0]),n(-u[1],a[0])),-i[2]),r(t(n(a[1],i[0]),n(-i[1],a[0])),u[2]))),s[3]))),t(r(t(r(t(n(i[1],s[0]),n(-s[1],i[0])),a[2]),t(r(t(n(a[1],s[0]),n(-s[1],a[0])),-i[2]),r(t(n(a[1],i[0]),n(-i[1],a[0])),s[2]))),-u[3]),t(r(t(r(t(n(s[1],u[0]),n(-u[1],s[0])),a[2]),t(r(t(n(a[1],u[0]),n(-u[1],a[0])),-s[2]),r(t(n(a[1],s[0]),n(-s[1],a[0])),u[2]))),o[3]),r(t(r(t(n(s[1],u[0]),n(-u[1],s[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-s[2]),r(t(n(o[1],s[0]),n(-s[1],o[0])),u[2]))),-a[3])))),t(t(r(t(r(t(n(a[1],u[0]),n(-u[1],a[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),u[2]))),s[3]),t(r(t(r(t(n(a[1],s[0]),n(-s[1],a[0])),o[2]),t(r(t(n(o[1],s[0]),n(-s[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),s[2]))),-u[3]),r(t(r(t(n(i[1],s[0]),n(-s[1],i[0])),a[2]),t(r(t(n(a[1],s[0]),n(-s[1],a[0])),-i[2]),r(t(n(a[1],i[0]),n(-i[1],a[0])),s[2]))),o[3]))),t(r(t(r(t(n(i[1],s[0]),n(-s[1],i[0])),o[2]),t(r(t(n(o[1],s[0]),n(-s[1],o[0])),-i[2]),r(t(n(o[1],i[0]),n(-i[1],o[0])),s[2]))),-a[3]),t(r(t(r(t(n(a[1],s[0]),n(-s[1],a[0])),o[2]),t(r(t(n(o[1],s[0]),n(-s[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),s[2]))),i[3]),r(t(r(t(n(a[1],i[0]),n(-i[1],a[0])),o[2]),t(r(t(n(o[1],i[0]),n(-i[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),i[2]))),-s[3]))))),l=t(t(t(r(t(r(t(n(s[1],u[0]),n(-u[1],s[0])),i[2]),t(r(t(n(i[1],u[0]),n(-u[1],i[0])),-s[2]),r(t(n(i[1],s[0]),n(-s[1],i[0])),u[2]))),o[3]),r(t(r(t(n(s[1],u[0]),n(-u[1],s[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-s[2]),r(t(n(o[1],s[0]),n(-s[1],o[0])),u[2]))),-i[3])),t(r(t(r(t(n(i[1],u[0]),n(-u[1],i[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-i[2]),r(t(n(o[1],i[0]),n(-i[1],o[0])),u[2]))),s[3]),r(t(r(t(n(i[1],s[0]),n(-s[1],i[0])),o[2]),t(r(t(n(o[1],s[0]),n(-s[1],o[0])),-i[2]),r(t(n(o[1],i[0]),n(-i[1],o[0])),s[2]))),-u[3]))),t(t(r(t(r(t(n(i[1],u[0]),n(-u[1],i[0])),a[2]),t(r(t(n(a[1],u[0]),n(-u[1],a[0])),-i[2]),r(t(n(a[1],i[0]),n(-i[1],a[0])),u[2]))),o[3]),r(t(r(t(n(i[1],u[0]),n(-u[1],i[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-i[2]),r(t(n(o[1],i[0]),n(-i[1],o[0])),u[2]))),-a[3])),t(r(t(r(t(n(a[1],u[0]),n(-u[1],a[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),u[2]))),i[3]),r(t(r(t(n(a[1],i[0]),n(-i[1],a[0])),o[2]),t(r(t(n(o[1],i[0]),n(-i[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),i[2]))),-u[3])))),f=e(c,l);return f[f.length-1]}}function l(t){return(3===t?s:4===t?u:c)(o,e,a,i)}var f=l(3),h=l(4),v=[function(){return 0},function(){return 0},function(t,n){return n[0]-t[0]},function(t,n,r){var e,o=(t[1]-r[1])*(n[0]-r[0]),a=(t[0]-r[0])*(n[1]-r[1]),i=o-a;if(o>0){if(a<=0)return i;e=o+a}else{if(!(o<0))return i;if(a>=0)return i;e=-(o+a)}var s=33306690738754716e-32*e;return i>=s||i<=-s?i:f(t,n,r)},function(t,n,r,e){var o=t[0]-e[0],a=n[0]-e[0],i=r[0]-e[0],s=t[1]-e[1],u=n[1]-e[1],c=r[1]-e[1],l=t[2]-e[2],f=n[2]-e[2],v=r[2]-e[2],p=a*c,d=i*u,g=i*s,_=o*c,y=o*u,b=a*s,m=l*(p-d)+f*(g-_)+v*(y-b),M=7771561172376103e-31*((Math.abs(p)+Math.abs(d))*Math.abs(l)+(Math.abs(g)+Math.abs(_))*Math.abs(f)+(Math.abs(y)+Math.abs(b))*Math.abs(v));return m>M||-m>M?m:h(t,n,r,e)}];function p(t){var n=v[t.length];return n||(n=v[t.length]=l(t.length)),n.apply(void 0,t)}function d(t,n,r,e,o,a,i){return function(n,r,s,u,c){switch(arguments.length){case 0:case 1:return 0;case 2:return e(n,r);case 3:return o(n,r,s);case 4:return a(n,r,s,u);case 5:return i(n,r,s,u,c)}for(var l=new Array(arguments.length),f=0;f<arguments.length;++f)l[f]=arguments[f];return t(l)}}!function(){for(;v.length<=5;)v.push(l(v.length));t.exports=d.apply(void 0,[p].concat(v));for(var n=0;n<=5;++n)t.exports[n]=v[n]}()},707:(t,n,r)=>{t.exports=function(t,n){for(var r=n[0],o=n[1],a=t.length,i=1,s=a,u=0,c=a-1;u<s;c=u++){var l=t[u],f=t[c],h=l[1],v=f[1];if(v<h){if(v<o&&o<h){if(0===(g=e(l,f,n)))return 0;i^=0<g|0}else if(o===h){var p=(d=t[(u+1)%a])[1];if(h<p){if(0===(g=e(l,f,n)))return 0;i^=0<g|0}}}else if(h<v){if(h<o&&o<v){if(0===(g=e(l,f,n)))return 0;i^=g<0|0}else if(o===h){var d=t[(u+1)%a];if((p=d[1])<h){var g;if(0===(g=e(l,f,n)))return 0;i^=g<0|0}}}else if(o===h){var _=Math.min(l[0],f[0]),y=Math.max(l[0],f[0]);if(0===u){for(;c>0;){var b=(c+a-1)%a;if((w=t[b])[1]!==o)break;var m=w[0];_=Math.min(_,m),y=Math.max(y,m),c=b}if(0===c)return _<=r&&r<=y?0:1;s=c+1}for(var M=t[(c+a-1)%a][1];u+1<s;){var w;if((w=t[u+1])[1]!==o)break;m=w[0],_=Math.min(_,m),y=Math.max(y,m),u+=1}if(_<=r&&r<=y)return 0;var B=t[(u+1)%a][1];r<_&&M<o!=B<o&&(i^=1)}}return 2*i-1};var e=r(146)},442:(t,n,r)=>{"use strict";var e=r(5),o=r(359);t.exports=function(t,n){var r=t.length;if(1===r){var a=e(t[0],n);return a[0]?a:[a[1]]}var i=new Array(2*r),s=[.1,.1],u=[.1,.1],c=0;e(t[0],n,s),s[0]&&(i[c++]=s[0]);for(var l=1;l<r;++l){e(t[l],n,u);var f=s[1];o(f,u[0],s),s[0]&&(i[c++]=s[0]);var h=u[1],v=s[1],p=h+v,d=v-(p-h);s[1]=p,d&&(i[c++]=d)}return s[1]&&(i[c++]=s[1]),0===c&&(i[c++]=0),i.length=c,i}},972:t=>{"use strict";t.exports=function(t,n){var r=0|t.length,e=0|n.length;if(1===r&&1===e)return function(t,n){var r=t+n,e=r-t,o=t-(r-e)+(n-e);return o?[o,r]:[r]}(t[0],-n[0]);var o,a,i=new Array(r+e),s=0,u=0,c=0,l=Math.abs,f=t[u],h=l(f),v=-n[c],p=l(v);h<p?(a=f,(u+=1)<r&&(h=l(f=t[u]))):(a=v,(c+=1)<e&&(p=l(v=-n[c]))),u<r&&h<p||c>=e?(o=f,(u+=1)<r&&(h=l(f=t[u]))):(o=v,(c+=1)<e&&(p=l(v=-n[c])));for(var d,g,_=o+a,y=_-o,b=a-y,m=b,M=_;u<r&&c<e;)h<p?(o=f,(u+=1)<r&&(h=l(f=t[u]))):(o=v,(c+=1)<e&&(p=l(v=-n[c]))),(b=(a=m)-(y=(_=o+a)-o))&&(i[s++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d;for(;u<r;)(b=(a=m)-(y=(_=(o=f)+a)-o))&&(i[s++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d,(u+=1)<r&&(f=t[u]);for(;c<e;)(b=(a=m)-(y=(_=(o=v)+a)-o))&&(i[s++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d,(c+=1)<e&&(v=-n[c]);return m&&(i[s++]=m),M&&(i[s++]=M),s||(i[s++]=0),i.length=s,i}},740:t=>{"use strict";t.exports=function(t,n){var r=0|t.length,e=0|n.length;if(1===r&&1===e)return function(t,n){var r=t+n,e=r-t,o=t-(r-e)+(n-e);return o?[o,r]:[r]}(t[0],n[0]);var o,a,i=new Array(r+e),s=0,u=0,c=0,l=Math.abs,f=t[u],h=l(f),v=n[c],p=l(v);h<p?(a=f,(u+=1)<r&&(h=l(f=t[u]))):(a=v,(c+=1)<e&&(p=l(v=n[c]))),u<r&&h<p||c>=e?(o=f,(u+=1)<r&&(h=l(f=t[u]))):(o=v,(c+=1)<e&&(p=l(v=n[c])));for(var d,g,_=o+a,y=_-o,b=a-y,m=b,M=_;u<r&&c<e;)h<p?(o=f,(u+=1)<r&&(h=l(f=t[u]))):(o=v,(c+=1)<e&&(p=l(v=n[c]))),(b=(a=m)-(y=(_=o+a)-o))&&(i[s++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d;for(;u<r;)(b=(a=m)-(y=(_=(o=f)+a)-o))&&(i[s++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d,(u+=1)<r&&(f=t[u]);for(;c<e;)(b=(a=m)-(y=(_=(o=v)+a)-o))&&(i[s++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d,(c+=1)<e&&(v=n[c]);return m&&(i[s++]=m),M&&(i[s++]=M),s||(i[s++]=0),i.length=s,i}},5:t=>{"use strict";t.exports=function(t,r,e){var o=t*r,a=n*t,i=a-(a-t),s=t-i,u=n*r,c=u-(u-r),l=r-c,f=s*l-(o-i*c-s*c-i*l);return e?(e[0]=f,e[1]=o,e):[f,o]};var n=+(Math.pow(2,27)+1)},359:t=>{"use strict";t.exports=function(t,n,r){var e=t+n,o=e-t,a=n-o,i=t-(e-o);return r?(r[0]=i+a,r[1]=e,r):[i+a,e]}}}]);