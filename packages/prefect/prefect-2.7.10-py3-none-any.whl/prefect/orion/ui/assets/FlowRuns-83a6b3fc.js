import{n as j,Z as z,d as G,$ as Z,a0 as r,c as u,a1 as $,r as q,a as o,w as c,a2 as b,a3 as I,o as s,b as a,u as e,a4 as J,h as g,a5 as K,a6 as k,a7 as L,X as F,a8 as M,a9 as Q,e as i,aa as w,ab as W,ac as Y,ad as ee,ae as se,af as C,ag as oe,ah as te,ai as ne,aj as ae,ak as le}from"./index-3e9b5a4f-22e45b7a.js";import{u as ue}from"./usePageTitle-9cf51495.js";import"./index-8ec704cb.js";import{A as re}from"./ApiRoute-3ed0c406.js";import{r as ce}from"./routes-f61735ce.js";import"./meta-26546594.js";class ie extends re(z){}const de=j(new ie),pe={class:"flow-runs__list"},fe={class:"flow-runs__list-controls"},me={class:"flow-runs__list-controls--right"},ge=G({__name:"FlowRuns",setup(V){const x=I(),d=Z(),y=r(d.flowRuns.getFlowRunsCount,[{}]),S=u(()=>y.executed),A=u(()=>y.response===0),{filter:p,hasFilters:B,startDate:D,endDate:N,name:f,sort:m}=$(),_={interval:3e4},R=r(d.flowRuns.getFlowRunsCount,[p],_),U=u(()=>R.response),H=r(de.getFlowRunHistory,[p],_),O=u(()=>H.response??[]),h=r(d.flowRuns.getFlowRuns,[p],_),v=u(()=>h.response??[]),t=q([]);function T(){x.push(ce.flowRuns())}const E=()=>{t.value=[],h.refresh(),R.refresh()};return ue("Flow Runs"),(_e,n)=>{const P=b("p-button"),X=b("p-layout-default");return s(),o(X,{class:"flow-runs"},{header:c(()=>[a(e(J))]),default:c(()=>[e(S)?(s(),g(k,{key:0},[e(A)?(s(),o(e(K),{key:0})):(s(),g(k,{key:1},[a(e(L)),e(F).md?(s(),o(e(M),Q({key:0,history:e(O)},{startDate:e(D),endDate:e(N)},{class:"flow-runs__chart"}),null,16,["history"])):i("",!0),w("div",pe,[w("div",fe,[w("div",me,[t.value.length==0?(s(),o(e(W),{key:0,count:e(U),label:"Flow run"},null,8,["count"])):(s(),o(e(Y),{key:1,count:t.value.length},null,8,["count"])),a(e(ee),{selected:t.value,onDelete:E},null,8,["selected"])]),e(F).md?(s(),o(e(se),{key:0,modelValue:e(f),"onUpdate:modelValue":n[0]||(n[0]=l=>C(f)?f.value=l:null),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):i("",!0),a(e(oe),{modelValue:e(m),"onUpdate:modelValue":n[1]||(n[1]=l=>C(m)?m.value=l:null)},null,8,["modelValue"])]),a(e(te),{selected:t.value,"onUpdate:selected":n[2]||(n[2]=l=>t.value=l),"flow-runs":e(v)},null,8,["selected","flow-runs"]),e(v).length?i("",!0):(s(),o(e(ne),{key:0},ae({_:2},[e(B)?{name:"actions",fn:c(()=>[a(P,{size:"sm",secondary:"",onClick:T},{default:c(()=>[le(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):i("",!0)]),_:1})}}});export{ge as default};
