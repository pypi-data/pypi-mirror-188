"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_index_tsx"],{"./app/components/events/errorLevel.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const i="13px",o=(0,r.Z)("span",{target:"efr73n80"})("padding:0;position:relative;width:",(e=>e.size||i),";height:",(e=>e.size||i),";text-indent:-9999em;display:inline-block;border-radius:50%;flex-shrink:0;background-color:",(e=>e.level?e.theme.level[e.level]:e.theme.level.error),";")},"./app/components/events/eventMessage.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("./app/components/events/errorLevel.tsx"),o=s("./app/styles/space.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,r.Z)((e=>{let{className:t,level:s,levelIndicatorSize:r,message:o,annotations:a}=e;return(0,n.BX)("div",{className:t,children:[s&&(0,n.tZ)(i.Z,{size:r,level:s,children:s}),o&&(0,n.tZ)(l,{children:o}),a]})}),{target:"e1ms02k71"})("display:flex;gap:",(0,o.Z)(1),";align-items:center;position:relative;line-height:1.2;overflow:hidden;"),l=(0,r.Z)("span",{target:"e1ms02k70"})((e=>e.theme.overflowEllipsis)," width:auto;max-height:38px;"),d=a},"./app/components/events/interfaces/crashContent/exception/setupSourceMapsAlert.tsx":(e,t,s)=>{s.d(t,{I:()=>f,m:()=>Z}),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("./app/components/alert.tsx"),i=s("./app/components/events/interfaces/spans/utils.tsx"),o=s("./app/components/links/externalLink.tsx"),n=s("./app/data/platformCategories.tsx"),a=s("./app/locale.tsx"),l=s("./app/types/index.tsx"),d=s("./app/utils.tsx"),p=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),c=s("./app/utils/events.tsx"),u=s("./app/utils/fileExtension.tsx"),h=s("./app/utils/useOrganization.tsx"),g=s("./app/utils/useRouter.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v=["@webkit-masked-url"],y={react:"https://docs.sentry.io/platforms/javascript/guides/react/sourcemaps/",electron:"https://docs.sentry.io/platforms/javascript/guides/electron/sourcemaps/",cordova:"https://docs.sentry.io/platforms/javascript/guides/cordova/sourcemaps/","javascript-angularjs":"https://docs.sentry.io/platforms/javascript/guides/angular/sourcemaps/","javascript-angular":"https://docs.sentry.io/platforms/javascript/guides/angular/sourcemaps/","javascript-ember":"https://docs.sentry.io/platforms/javascript/guides/ember/sourcemaps/","javascript-gatsby":"https://docs.sentry.io/platforms/javascript/guides/gatsby/sourcemaps/","javascript-vue":"https://docs.sentry.io/platforms/javascript/guides/vue/sourcemaps/","javascript-nextjs":"https://docs.sentry.io/platforms/javascript/guides/nextjs/sourcemaps/","javascript-remix":"https://docs.sentry.io/platforms/javascript/guides/remix/sourcemaps/","javascript-svelte":"https://docs.sentry.io/platforms/javascript/guides/svelte/sourcemaps/"};function b(e){return!!e&&(e.includes("localhost")||e.includes("127.0.0.1"))}function f(e,t,s){if(!(0,d.ri)(t)||!(0,d.ri)(s))return!1;if(!e.features?.includes("source-maps-cta"))return!1;const r=s?.platform??"other",o=(0,i.PC)(s),a=s?.entries.find((e=>e.type===l.UZ.EXCEPTION)),p=a?.data.values;return!(!o&&!n.H.includes(r)||(0,c.OL)(s)||!a||0===p?.length||p?.every((e=>!e.stacktrace&&!e.rawStacktrace))||p?.every((e=>e.stacktrace?.frames?.every((e=>!e.inApp))))||p?.every((e=>e.stacktrace?.frames?.every((e=>{let t="";try{t=new URL(e.absPath??"").pathname.split("/").reverse()[0]}catch{}return"<anonymous>"===e.filename&&e.inApp||v.includes(e.function??"")||e.absPath&&!(0,u.m)(t)})))))}function Z(e){let{event:t}=e;const s=(0,h.Z)(),n=(0,g.Z)().location.query.project,d=t.platform??"other",c=(0,i.PC)(t);if(!f(s,n,t))return null;const u=t.entries?.find((e=>e.type===l.UZ.REQUEST))?.data?.url??t.tags.find((e=>"url"===e.key))?.value,v=c?t.sdk?.name?.substring("sentry.javascript.".length)??"other":d,Z=y[v]??y[d]??"https://docs.sentry.io/platforms/javascript/sourcemaps/";return(0,m.tZ)(r.bZ,{type:"info",showIcon:!0,trailingItems:(0,m.tZ)(o.Z,{href:Z,onClick:()=>{(0,p.Z)("issue_group_details.stack_traces.setup_source_maps_alert.clicked",{organization:s,project_id:n,platform:v})},children:(0,a.t)("Upload Source Maps")}),children:b(u)?(0,a.t)("In production, you might have minified JS code that makes stack traces hard to read. Sentry can un-minify it for you"):(0,a.t)("Sentry can un-minify your code to show you more readable stack traces")})}Z.displayName="SetupSourceMapsAlert"},"./app/components/pageAlertBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e4nzktk0"})("display:flex;align-items:center;justify-content:center;color:",(e=>e.theme.headerBackground),";background-color:",(e=>e.theme.bannerBackground),";padding:6px 30px;font-size:14px;")},"./app/components/replays/replayCountBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./app/components/badge.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{count:t}=e;const s=t&&t>50?"50+":t??null;return(0,i.tZ)(r.Z,{text:s})}o.displayName="ReplayCountBadge";const n=o},"./app/components/replays/replaysFeatureBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./app/components/featureBadge.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){return(0,i.tZ)(r.Z,{...e,type:"beta"})}o.displayName="ReplaysFeatureBadge";const n=o},"./app/components/seenByList.tsx":(e,t,s)=>{s.d(t,{Z:()=>y});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),o=s("../node_modules/moment/moment.js"),n=s.n(o),a=s("./app/components/avatar/avatarList.tsx"),l=s("./app/components/tooltip.tsx"),d=s("./app/icons/index.tsx"),p=s("./app/locale.tsx"),c=s("./app/stores/configStore.tsx"),u=s("./app/utils/formatters.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=e=>{let{avatarSize:t=28,seenBy:s=[],iconTooltip:r=(0,p.t)("People who have viewed this"),maxVisibleAvatars:o=10,iconPosition:g="left",className:y}=e;const b=c.Z.get("user"),f=s.filter((e=>b.id!==e.id));return 0===f.length?null:(0,h.BX)(m,{iconPosition:g,className:y,children:[(0,h.tZ)(a.Z,{users:f,avatarSize:t,maxVisibleAvatars:o,renderTooltip:e=>(0,h.BX)(i.Fragment,{children:[(0,u.He)(e),(0,h.tZ)("br",{}),n()(e.lastSeen).format("LL")]})}),(0,h.tZ)(v,{iconPosition:g,children:(0,h.tZ)(l.u,{title:r,skipWrapper:!0,children:(0,h.tZ)(d.fn,{size:"sm",color:"subText"})})})]})};g.displayName="SeenByList";const m=(0,r.Z)("div",{target:"e3bqk9x1"})("display:flex;",(e=>"left"===e.iconPosition?"flex-direction: row-reverse":""),";"),v=(0,r.Z)("div",{target:"e3bqk9x0"})("display:flex;align-items:center;background-color:transparent;color:",(e=>e.theme.textColor),";height:28px;width:24px;text-align:center;",(e=>"left"===e.iconPosition?"margin-right: 10px":""),";"),y=g},"./app/stores/organizationEnvironmentsStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("../node_modules/reflux/src/index.js"),i=s("./app/utils/environment.tsx");const o={state:{environments:null,error:null},init(){this.state={environments:null,error:null}},makeEnvironment:e=>({id:e.id,name:e.name,get displayName(){return(0,i.G)(e)},get urlRoutingName(){return(0,i.z)(e)}}),onFetchEnvironments(){this.state={environments:null,error:null},this.trigger(this.state)},onFetchEnvironmentsSuccess(e){this.state={error:null,environments:e.map(this.makeEnvironment)},this.trigger(this.state)},onFetchEnvironmentsError(e){this.state={error:e,environments:null},this.trigger(this.state)},getState(){return this.state}},n=(0,r.createStore)(o)},"./app/utils/displayReprocessEventAction.tsx":(e,t,s)=>{s.d(t,{B:()=>n}),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("./app/types/index.tsx");const i=["cocoa","native"];function o(e){const t=e?.frames??[],s=e?.stacktrace?.frames??[];return t.length||s.length?[...t,...s].map((e=>e.platform)).filter((e=>!!e)):[]}function n(e,t){if(!t||!e.includes("reprocessing-v2"))return!1;const{entries:s}=t,n=s.find((e=>e.type===r.UZ.EXCEPTION));return!!n&&!!(function(e){const{data:t}=e;return(t.values??[]).some((e=>"minidump"===e.mechanism?.type))}(n)||function(e){const{data:t}=e;return(t.values??[]).some((e=>"applecrashreport"===e.mechanism?.type))}(n)||function(e,t){const{platform:s}=e;if(s&&i.includes(s))return!0;const n=function(e,t){const s=(t.data.values??[]).flatMap(o),i=e.entries.find((e=>e.type===r.UZ.STACKTRACE))?.data??{},n=Object.keys(i).flatMap((e=>o(i[e]))),a=(e.entries.find((e=>e.type===r.UZ.THREADS))?.data.values??[]).flatMap((e=>{let{stacktrace:t}=e;return o(t)}));return new Set([...s,...n,...a])}(e,t);return i.some((e=>n.has(e)))}(t,n))}},"./app/utils/environment.tsx":(e,t,s)=>{function r(e){return e.name?encodeURIComponent(e.name):e.displayName?encodeURIComponent(e.displayName):"none"}function i(e){return e.name||e.displayName||"(No Environment)"}s.d(t,{G:()=>i,z:()=>r})},"./app/views/organizationGroupDetails/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>It});var r=s("../node_modules/react/index.js"),i=s("./app/actionCreators/indicator.tsx"),o=s("./app/locale.tsx"),n=s("./app/stores/projectsStore.tsx"),a=s("./app/utils/handleXhrErrorResponse.tsx"),l=s("./app/utils/analytics.tsx"),d=s("./app/utils/useApi.tsx"),p=s("./app/utils/useOrganization.tsx"),c=s("./app/utils/useProjects.tsx"),u=s("./app/utils/withPageFilters.tsx"),h=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),g=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),m=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react-router/es/index.js")),v=s("../node_modules/@sentry/core/esm/exports.js"),y=s("../node_modules/@sentry/react/esm/profiler.js"),b=s("../node_modules/prop-types/index.js"),f=s("./app/stores/organizationEnvironmentsStore.tsx"),Z=s("./app/components/events/interfaces/crashContent/exception/setupSourceMapsAlert.tsx"),x=s("./app/components/loadingError.tsx"),E=s("./app/components/loadingIndicator.tsx"),S=s("./app/components/organizations/pageFilters/container.tsx"),k=s("./app/components/projects/missingProjectMembership.tsx"),I=s("./app/components/sentryDocumentTitle.tsx"),_=s("./app/components/tabs/index.tsx"),w=s("./app/sentryTypes.tsx"),j=s("./app/stores/groupStore.tsx"),R=s("./app/styles/space.tsx"),C=s("./app/types/index.tsx"),T=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),A=s("./app/utils/dates.tsx"),D=s("./app/utils/events.tsx"),z=s("./app/utils/projects.tsx"),N=s("./app/utils/recreateRoute.tsx"),O=s("./app/utils/routeAnalytics/withRouteAnalytics.tsx"),B=s("./app/utils/withApi.tsx"),U=s("./app/utils/withDomainRequired.tsx");const P="GROUP_NOT_FOUND",$="MISSING_MEMBERSHIP";var q=s("../node_modules/lodash/omit.js"),M=s.n(q),G=s("./app/components/assistant/guideAnchor.tsx"),F=s("./app/components/badge.tsx"),L=s("./app/components/breadcrumbs.tsx"),X=s("./app/components/count.tsx"),V=s("./app/components/environmentPageFilter.tsx"),H=s("./app/components/eventOrGroupTitle.tsx"),Y=s("./app/components/events/errorLevel.tsx"),Q=s("./app/components/events/eventMessage.tsx"),K=s("./app/components/featureBadge.tsx"),J=s("./app/components/group/inboxBadges/inboxReason.tsx"),W=s("./app/components/group/inboxBadges/unhandledTag.tsx"),ee=s("./app/components/idBadge/projectBadge.tsx"),te=s("./app/components/layouts/thirds.tsx"),se=s("./app/components/links/link.tsx"),re=s("./app/components/replays/replayCountBadge.tsx"),ie=s("./app/components/replays/replaysFeatureBadge.tsx"),oe=s("./app/components/replays/useReplaysCount.tsx"),ne=s("./app/components/seenByList.tsx"),ae=s("./app/components/shortId.tsx"),le=s("./app/components/tooltip.tsx"),de=s("./app/icons/index.tsx"),pe=s("./app/utils/groupCapabilities.tsx"),ce=s("./app/utils/replays/projectSupportsReplay.tsx"),ue=s("./app/utils/useLocation.tsx"),he=s("./app/actionCreators/group.tsx"),ge=s("./app/actionCreators/modal.tsx"),me=s("./app/components/acl/feature.tsx"),ve=s("./app/components/acl/featureDisabled.tsx"),ye=s("./app/components/actions/button.tsx"),be=s("./app/components/actions/ignore.tsx"),fe=s("./app/components/actions/resolve.tsx"),Ze=s("./app/components/button.tsx"),xe=s("./app/components/dropdownMenu/index.tsx"),Ee=s("./app/utils/discover/eventView.tsx"),Se=s("./app/utils/displayReprocessEventAction.tsx"),ke=s("./app/utils/guid.tsx"),Ie=s("./app/utils/withOrganization.tsx"),_e=s("./app/views/issueList/actions/reviewAction.tsx"),we=s("./app/components/autoSelectText.tsx"),je=s("./app/components/switchButton.tsx"),Re=s("./app/stores/useLegacyStore.tsx"),Ce=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Te(e){let{Header:t,Body:s,Footer:n,organization:a,projectSlug:l,groupId:p,onToggle:c,closeModal:u}=e;const h=(0,d.Z)({persistInFlight:!0}),[g,m]=(0,r.useState)(!1),v=(0,r.useRef)(null),y=(0,Re.X)(j.Z).find((e=>e.id===p)),b=y?.isPublic,f=(0,r.useCallback)(((e,t)=>{e?.preventDefault(),m(!0),c(),(0,he.Gv)(h,{orgId:a.slug,projectId:l,itemIds:[p],data:{isPublic:t??!b}},{error:()=>{(0,i.Iw)((0,o.t)("Error sharing"))},complete:()=>{m(!1)}})}),[h,m,c,b,a.slug,l,p]);(0,r.useEffect)((()=>{b||f(null,!0)}),[]);const Z=y?.shareId?function(){const e=`/share/issue/${y.shareId}/`,{host:t,protocol:s}=window.location;return`${s}//${t}${e}`}():null;return(0,Ce.BX)(r.Fragment,{children:[(0,Ce.tZ)(t,{closeButton:!0,children:(0,Ce.tZ)("h4",{children:(0,o.t)("Share Issue")})}),(0,Ce.tZ)(s,{children:(0,Ce.BX)(De,{children:[(0,Ce.BX)(ze,{children:[(0,Ce.BX)("div",{children:[(0,Ce.tZ)(Ne,{children:(0,o.t)("Create a public link")}),(0,Ce.tZ)(Oe,{children:(0,o.t)("Share a link with anyone outside your organization")})]}),(0,Ce.tZ)(je.Z,{"aria-label":b?(0,o.t)("Unshare"):(0,o.t)("Share"),isActive:b,size:"lg",toggle:f})]}),(!y||g)&&(0,Ce.tZ)(Be,{children:(0,Ce.tZ)(E.Z,{mini:!0})}),y&&!g&&b&&Z&&(0,Ce.BX)(Ue,{children:[(0,Ce.tZ)($e,{children:(0,Ce.tZ)(Pe,{ref:v,children:Z})}),(0,Ce.tZ)(qe,{title:(0,o.t)("Copy to clipboard"),borderless:!0,size:"sm",onClick:()=>{navigator.clipboard.writeText(Z),v.current?.selectText()},icon:(0,Ce.tZ)(de.vU,{}),"aria-label":(0,o.t)("Copy to clipboard")}),(0,Ce.tZ)(Me,{title:(0,o.t)("Generate new URL. Invalidates previous URL"),"aria-label":(0,o.t)("Generate new URL"),borderless:!0,size:"sm",icon:(0,Ce.tZ)(de.tr,{}),onClick:()=>f(null,!0)})]})]})}),(0,Ce.tZ)(n,{children:!g&&b&&Z?(0,Ce.tZ)(Ze.zx,{priority:"primary",onClick:()=>{navigator.clipboard.writeText(Z),u()},children:(0,o.t)("Copy Link")}):(0,Ce.tZ)(Ze.zx,{priority:"primary",onClick:()=>{u()},children:(0,o.t)("Close")})})]})}Te.displayName="ShareIssueModal";const Ae=Te,De=(0,g.Z)("div",{target:"e1tq57sv9"})("display:flex;gap:",(0,R.Z)(2),";flex-direction:column;min-height:100px;"),ze=(0,g.Z)("div",{target:"e1tq57sv8"})("display:flex;justify-content:space-between;align-items:center;gap:",(0,R.Z)(2),";"),Ne=(0,g.Z)("div",{target:"e1tq57sv7"})("padding-right:",(0,R.Z)(4),";white-space:nowrap;"),Oe=(0,g.Z)("p",{target:"e1tq57sv6"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeSmall),";"),Be=(0,g.Z)("div",{target:"e1tq57sv5"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),Ue=(0,g.Z)("div",{target:"e1tq57sv4"})("display:flex;align-items:stretch;border:1px solid ",(e=>e.theme.border),";border-radius:",(0,R.Z)(.5),";"),Pe=(0,g.Z)(we.Z,{target:"e1tq57sv3"})("padding:",(0,R.Z)(1)," ",(0,R.Z)(1),";",(e=>e.theme.overflowEllipsis),";"),$e=(0,g.Z)("div",{target:"e1tq57sv2"})("position:relative;display:flex;flex-grow:1;background-color:transparent;border-right:1px solid ",(e=>e.theme.border),";min-width:0;"),qe=(0,g.Z)(Ze.zx,{target:"e1tq57sv1"})("border-radius:0;border-right:1px solid ",(e=>e.theme.border),";height:100%;flex-shrink:0;&:hover{border-right:1px solid ",(e=>e.theme.border),";}"),Me=(0,g.Z)(Ze.zx,{target:"e1tq57sv0"})({name:"vdwx3d",styles:"height:100%;flex-shrink:0"});function Ge(e){let{onToggle:t,disabled:s,group:r,organization:i,disabledReason:n}=e;return(0,Ce.tZ)(le.u,{title:n,disabled:!s,children:(0,Ce.tZ)(Ze.zx,{size:"xs",onClick:()=>{(0,ge.openModal)((e=>(0,Ce.tZ)(Ae,{...e,organization:i,projectSlug:r.project.slug,groupId:r.id,onToggle:t})))},disabled:s,icon:(0,Ce.tZ)(Le,{"aria-label":r.isPublic?(0,o.t)("Shared"):(0,o.t)("Not Shared"),isShared:r.isPublic}),children:(0,o.t)("Share")})})}Ge.displayName="ShareIssue";const Fe=Ge,Le=(0,g.Z)("div",{target:"e3101yr0"})("border-radius:50%;width:10px;height:10px;background:",(e=>e.isShared?e.theme.active:e.theme.border),";");var Xe=s("./app/views/organizationGroupDetails/utils.tsx");function Ve(e){let{className:t,disabled:s,group:r,icon:i,onClick:n,disablePriority:a,size:l="xs"}=e;const d=r.subscriptionDetails?.disabled??!1;return(0,Ce.tZ)(ye.Z,{className:t,disabled:s||d,title:(0,Xe.sC)(r),tooltipProps:{delay:300},priority:!a&&r.isSubscribed?"primary":"default",size:l,"aria-label":(0,o.t)("Subscribe"),onClick:n,icon:i??(0,Ce.tZ)(de.lJ,{size:l})})}Ve.displayName="SubscribeAction";const He=Ve;class Ye extends r.Component{constructor(){super(...arguments),(0,h.Z)(this,"onDelete",(()=>{const{group:e,project:t,organization:s,api:r}=this.props;(0,i.E3)((0,o.t)("Delete event…")),(0,he.MU)(r,{orgId:s.slug,projectId:t.slug,itemIds:[e.id]},{complete:()=>{(0,i.B8)(),m.browserHistory.push(`/${s.slug}/${t.slug}/`)}}),this.trackIssueAction("deleted")})),(0,h.Z)(this,"onUpdate",(e=>{const{group:t,project:s,organization:r,api:n}=this.props;(0,i.E3)((0,o.t)("Saving changes…")),(0,he.Gv)(n,{orgId:r.slug,projectId:s.slug,itemIds:[t.id],data:e},{complete:i.B8}),e.status&&this.trackIssueAction(e.status),void 0!==e.inbox&&this.trackIssueAction("mark_reviewed")})),(0,h.Z)(this,"onReprocessEvent",(()=>{const{group:e,organization:t}=this.props;(0,ge.openReprocessEventModal)({organization:t,groupId:e.id})})),(0,h.Z)(this,"onToggleShare",(()=>{!this.props.group.isPublic&&(0,T.Z)("issue.shared_publicly",{organization:this.props.organization}),this.trackIssueAction("shared")})),(0,h.Z)(this,"onToggleBookmark",(()=>{this.onUpdate({isBookmarked:!this.props.group.isBookmarked}),this.trackIssueAction("bookmarked")})),(0,h.Z)(this,"onToggleSubscribe",(()=>{this.onUpdate({isSubscribed:!this.props.group.isSubscribed}),this.trackIssueAction("subscribed")})),(0,h.Z)(this,"onDiscard",(()=>{const{group:e,project:t,organization:s,api:r}=this.props,n=(0,ke.E)();(0,i.E3)((0,o.t)("Discarding event…")),j.Z.onDiscard(n,e.id),r.request(`/issues/${e.id}/`,{method:"PUT",data:{discard:!0},success:r=>{j.Z.onDiscardSuccess(n,e.id,r),m.browserHistory.push(`/${s.slug}/${t.slug}/`)},error:t=>{j.Z.onDiscardError(n,e.id,t)},complete:i.B8}),this.trackIssueAction("discarded")})),(0,h.Z)(this,"renderDiscardModal",(e=>{let{Body:t,Footer:s,closeModal:i}=e;const{organization:n,project:a}=this.props;return(0,Ce.tZ)(me.Z,{features:["projects:discard-groups"],hookName:"feature-disabled:discard-groups",organization:n,project:a,renderDisabled:function(e){let{children:t,...s}=e;return t({...s,renderDisabled:e=>{let{features:t}=e;return(0,Ce.tZ)(ve.Z,{alert:!0,featureName:(0,o.t)("Discard and Delete"),features:t})}})},children:e=>{let{hasFeature:n,renderDisabled:a,...l}=e;return(0,Ce.BX)(r.Fragment,{children:[(0,Ce.BX)(t,{children:[!n&&"function"==typeof a&&a({...l,hasFeature:n,children:null}),(0,o.t)("Discarding this event will result in the deletion of most data associated with this issue and future events being discarded before reaching your stream. Are you sure you wish to continue?")]}),(0,Ce.BX)(s,{children:[(0,Ce.tZ)(Ze.zx,{onClick:i,children:(0,o.t)("Cancel")}),(0,Ce.tZ)(Ze.zx,{style:{marginLeft:(0,R.Z)(1)},priority:"primary",onClick:this.onDiscard,disabled:!n,children:(0,o.t)("Discard Future Events")})]})]})}})})),(0,h.Z)(this,"openDeleteModal",(()=>(0,ge.openModal)((e=>{let{Body:t,Footer:s,closeModal:i}=e;return(0,Ce.BX)(r.Fragment,{children:[(0,Ce.tZ)(t,{children:(0,o.t)("Deleting this issue is permanent. Are you sure you wish to continue?")}),(0,Ce.BX)(s,{children:[(0,Ce.tZ)(Ze.zx,{onClick:i,children:(0,o.t)("Cancel")}),(0,Ce.tZ)(Ze.zx,{style:{marginLeft:(0,R.Z)(1)},priority:"primary",onClick:this.onDelete,children:(0,o.t)("Delete")})]})]})})))),(0,h.Z)(this,"openDiscardModal",(()=>{const{organization:e}=this.props;(0,ge.openModal)(this.renderDiscardModal),(0,l.co)("feature.discard_group.modal_opened",{org_id:parseInt(e.id,10)})})),(0,h.Z)(this,"openShareModal",(()=>{const{group:e,organization:t}=this.props;(0,ge.openModal)((s=>(0,Ce.tZ)(Ae,{...s,organization:t,projectSlug:e.project.slug,groupId:e.id,onToggle:this.onToggleShare})))}))}getShareUrl(e){if(!e)return"";const t=`/share/issue/${e}/`,{host:s,protocol:r}=window.location;return`${r}//${s}${t}`}getDiscoverUrl(){const{group:e,project:t,organization:s}=this.props,{title:r,type:i,shortId:o}=e,n={id:void 0,name:r||i,fields:["title","release","environment","user.display","timestamp"],orderby:"-timestamp",query:`issue:${o}`,projects:[Number(t.id)],version:2,range:"90d"};return Ee.ZP.fromSavedQuery(n).getResultsViewUrlTarget(s.slug)}trackIssueAction(e){const{group:t,project:s,organization:r,query:i={}}=this.props,{alert_date:o,alert_rule_id:n,alert_type:a}=i;(0,T.Z)("issue_details.action_clicked",{organization:r,project_id:parseInt(s.id,10),group_id:parseInt(t.id,10),issue_category:t.issueCategory,action_type:e,alert_date:"string"==typeof o?(0,A.v5)(Number(o)):void 0,alert_rule_id:"string"==typeof n?n:void 0,alert_type:"string"==typeof a?a:void 0})}handleClick(e,t){return function(s){if(e)return s.preventDefault(),void s.stopPropagation();t(s)}}render(){const{group:e,project:t,organization:s,disabled:i,event:n}=this.props,{status:a,isBookmarked:l}=e,d=new Set(s.features),p=l?"unbookmark":"bookmark",c=l?(0,o.t)("Remove bookmark"):(0,o.t)("Bookmark"),u=!!t.features?.includes("releases"),h="resolved"===a,g="resolved"===e.status?e.statusDetails.autoResolved:void 0,m="ignored"===a,v=(0,pe.t)(e.issueCategory,"delete"),y=(0,pe.t)(e.issueCategory,"deleteAndDiscard"),b=(0,pe.t)(e.issueCategory,"share"),f=s.access.includes("event:admin"),Z=[{key:p,label:c,onAction:this.onToggleBookmark},{key:"reprocess",label:(0,o.t)("Reprocess events"),hidden:!(0,Se.B)(s.features,n),onAction:this.onReprocessEvent},{key:"delete-issue",priority:"danger",label:(0,o.t)("Delete"),hidden:!f,disabled:!v.enabled,details:v.disabledReason,onAction:this.openDeleteModal},{key:"delete-and-discard",priority:"danger",label:(0,o.t)("Delete and discard future events"),hidden:!f,disabled:!y.enabled,details:y.disabledReason,onAction:this.openDiscardModal}];if(d.has("issue-actions-v2")){const{dropdownItems:n,onIgnore:a}=(0,be.c)({onUpdate:this.onUpdate});return(0,Ce.BX)(Ke,{children:[(0,Ce.tZ)(xe.Z,{triggerProps:{"aria-label":(0,o.t)("More Actions"),icon:(0,Ce.tZ)(de.YR,{size:"xs"}),showChevron:!1,size:"sm"},items:[...m?[]:[{key:"ignore",className:"hidden-sm hidden-md hidden-lg",label:(0,o.t)("Ignore"),isSubmenu:!0,disabled:i,children:[{key:"ignore-now",label:(0,o.t)("Ignore Issue"),onAction:()=>a()},...n]}],{key:"open-in-discover",className:"hidden-sm hidden-md hidden-lg",label:(0,o.t)("Open in Discover"),to:i?"":this.getDiscoverUrl(),onAction:()=>this.trackIssueAction("open_in_discover")},{key:e.isSubscribed?"unsubscribe":"subscribe",className:"hidden-sm hidden-md hidden-lg",label:e.isSubscribed?(0,o.t)("Unsubscribe"):(0,o.t)("Subscribe"),disabled:i||e.subscriptionDetails?.disabled,onAction:this.onToggleSubscribe},{key:"mark-review",label:(0,o.t)("Mark reviewed"),disabled:!e.inbox||i,details:!e.inbox||i?(0,o.t)("Issue has been reviewed"):void 0,onAction:()=>this.onUpdate({inbox:!1})},{key:"share",label:(0,o.t)("Share"),disabled:i||!b.enabled,hidden:!d.has("shared-issues"),onAction:this.openShareModal},...Z]}),(0,Ce.tZ)(He,{className:"hidden-xs",disabled:i,disablePriority:!0,group:e,onClick:this.handleClick(i,this.onToggleSubscribe),icon:e.isSubscribed?(0,Ce.tZ)(de.lJ,{}):(0,Ce.tZ)(de.mA,{}),size:"sm"}),(0,Ce.tZ)("div",{className:"hidden-xs",children:(0,Ce.tZ)(V.Z,{alignDropdown:"right",size:"sm"})}),(0,Ce.tZ)(me.Z,{hookName:"feature-disabled:open-in-discover",features:["discover-basic"],organization:s,children:(0,Ce.tZ)(ye.Z,{className:"hidden-xs",disabled:i,to:i?"":this.getDiscoverUrl(),onClick:()=>this.trackIssueAction("open_in_discover"),size:"sm",children:(0,Ce.tZ)(G.Z,{target:"open_in_discover",children:(0,o.t)("Open in Discover")})})}),h||m?(0,Ce.tZ)(ye.Z,{priority:"primary",title:g?(0,o.t)("This event is resolved due to the Auto Resolve configuration for this project"):(0,o.t)("Change status to unresolved"),size:"sm",icon:h?(0,Ce.tZ)(de.DL,{}):(0,Ce.tZ)(de.i1,{}),disabled:i||g,onClick:()=>this.onUpdate({status:C.d7.UNRESOLVED,statusDetails:{}}),children:m?(0,o.t)("Ignored"):(0,o.t)("Resolved")}):(0,Ce.BX)(r.Fragment,{children:[(0,Ce.tZ)(G.Z,{target:"ignore_delete_discard",position:"bottom",offset:20,children:(0,Ce.tZ)(be.Z,{className:"hidden-xs",isIgnored:m,onUpdate:this.onUpdate,disabled:i,size:"sm",hideIcon:!0,disableTooltip:!0})}),(0,Ce.tZ)(G.Z,{target:"resolve",position:"bottom",offset:20,children:(0,Ce.tZ)(fe.Z,{disableTooltip:!0,disabled:i,disableDropdown:i,hasRelease:u,latestRelease:t.latestRelease,onUpdate:this.onUpdate,orgSlug:s.slug,projectSlug:t.slug,isResolved:h,isAutoResolved:g,size:"sm",hideIcon:!0,priority:"primary"})})]})]})}return(0,Ce.BX)(Qe,{children:[(0,Ce.tZ)(G.Z,{target:"resolve",position:"bottom",offset:20,children:(0,Ce.tZ)(fe.Z,{disabled:i,disableDropdown:i,hasRelease:u,latestRelease:t.latestRelease,onUpdate:this.onUpdate,orgSlug:s.slug,projectSlug:t.slug,isResolved:h,isAutoResolved:"resolved"===e.status?e.statusDetails.autoResolved:void 0})}),(0,Ce.tZ)(G.Z,{target:"ignore_delete_discard",position:"bottom",offset:20,children:(0,Ce.tZ)(be.Z,{isIgnored:m,onUpdate:this.onUpdate,disabled:i})}),(0,Ce.tZ)(_e.Z,{onUpdate:this.onUpdate,disabled:!e.inbox||i,tooltip:(0,o.t)("Issue has been reviewed"),tooltipProps:{disabled:!!e.inbox||i,delay:300}}),(0,Ce.tZ)(me.Z,{hookName:"feature-disabled:open-in-discover",features:["discover-basic"],organization:s,children:(0,Ce.tZ)(ye.Z,{disabled:i,to:i?"":this.getDiscoverUrl(),onClick:()=>this.trackIssueAction("open_in_discover"),children:(0,Ce.tZ)(G.Z,{target:"open_in_discover",children:(0,o.t)("Open in Discover")})})}),d.has("shared-issues")&&(0,Ce.tZ)(Fe,{organization:s,group:e,disabled:i||!b.enabled,disabledReason:b.disabledReason,onToggle:this.onToggleShare}),(0,Ce.tZ)(He,{disabled:i,group:e,onClick:this.handleClick(i,this.onToggleSubscribe)}),(0,Ce.tZ)(xe.Z,{triggerProps:{"aria-label":(0,o.t)("More Actions"),icon:(0,Ce.tZ)(de.YR,{size:"xs"}),showChevron:!1,size:"xs"},items:Z})]})}}Ye.displayName="Actions";const Qe=(0,g.Z)("div",{target:"egxtq5e1"})("display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:center;grid-auto-flow:column;gap:",(0,R.Z)(.5),";white-space:nowrap;"),Ke=(0,g.Z)("div",{target:"egxtq5e0"})("display:flex;align-items:center;gap:",(0,R.Z)(.5),";"),Je=(0,B.Z)((0,Ie.Z)(Ye));var We=s("./app/views/organizationGroupDetails/types.tsx"),et=s("./app/views/organizationGroupDetails/unhandledTag.tsx");function tt(e){let{baseUrl:t,disabledTabs:s,eventRoute:r,group:i,project:n}=e;const a=(0,p.Z)(),l=(0,oe.Z)({groupIds:i.id,organization:a,projectIds:[Number(n.id)]})[i.id],d=new Set(n?n.features:[]),c=new Set(a?a.features:[]),u=c.has("grouping-tree-ui"),h=d.has("similarity-view"),g=c.has("event-attachments"),m=c.has("session-replay-ui")&&(0,ce.Z)(n);return(0,Ce.BX)(mt,{hideBorder:!0,children:[(0,Ce.tZ)(_.ck,{disabled:s.includes(We.O.DETAILS),to:`${t}${location.search}`,children:(0,o.t)("Details")},We.O.DETAILS),(0,Ce.BX)(_.ck,{textValue:(0,o.t)("Activity"),disabled:s.includes(We.O.ACTIVITY),to:`${t}activity/${location.search}`,children:[(0,o.t)("Activity"),(0,Ce.BX)(gt,{children:[i.numComments,(0,Ce.tZ)(de.f7,{size:"xs"})]})]},We.O.ACTIVITY),(0,Ce.BX)(_.ck,{textValue:(0,o.t)("User Feedback"),hidden:!(0,pe.t)(i.issueCategory,"userFeedback").enabled,disabled:s.includes(We.O.USER_FEEDBACK),to:`${t}feedback/${location.search}`,children:[(0,o.t)("User Feedback")," ",(0,Ce.tZ)(F.Z,{text:i.userReportCount})]},We.O.USER_FEEDBACK),(0,Ce.tZ)(_.ck,{hidden:!g||!(0,pe.t)(i.issueCategory,"attachments").enabled,disabled:s.includes(We.O.ATTACHMENTS),to:`${t}attachments/${location.search}`,children:(0,o.t)("Attachments")},We.O.ATTACHMENTS),(0,Ce.tZ)(_.ck,{disabled:s.includes(We.O.TAGS),to:`${t}tags/${location.search}`,children:(0,o.t)("Tags")},We.O.TAGS),(0,Ce.tZ)(_.ck,{disabled:s.includes(We.O.EVENTS),to:r,children:(0,o.t)("All Events")},We.O.EVENTS),(0,Ce.tZ)(_.ck,{hidden:!(0,pe.t)(i.issueCategory,"mergedIssues").enabled,disabled:s.includes(We.O.MERGED),to:`${t}merged/${location.search}`,children:(0,o.t)("Merged Issues")},We.O.MERGED),(0,Ce.tZ)(_.ck,{hidden:!u||!(0,pe.t)(i.issueCategory,"grouping").enabled,disabled:s.includes(We.O.GROUPING),to:`${t}grouping/${location.search}`,children:(0,o.t)("Grouping")},We.O.GROUPING),(0,Ce.tZ)(_.ck,{hidden:!h||!(0,pe.t)(i.issueCategory,"similarIssues").enabled,disabled:s.includes(We.O.SIMILAR_ISSUES),to:`${t}similar/${location.search}`,children:(0,o.t)("Similar Issues")},We.O.SIMILAR_ISSUES),(0,Ce.BX)(_.ck,{textValue:(0,o.t)("Replays"),hidden:!m||!(0,pe.t)(i.issueCategory,"replays").enabled,to:`${t}replays/${location.search}`,children:[(0,o.t)("Replays"),(0,Ce.tZ)(re.Z,{count:l}),(0,Ce.tZ)(ie.Z,{noTooltip:!0})]},We.O.REPLAYS)]})}function st(e){let{baseUrl:t,group:s,groupReprocessingStatus:i,organization:n,event:a,project:l}=e;const d=(0,ue.T)(),p=(0,r.useMemo)((()=>n.features.includes("reprocessing-v2")?i===Xe.m7.REPROCESSING?[We.O.ACTIVITY,We.O.USER_FEEDBACK,We.O.ATTACHMENTS,We.O.EVENTS,We.O.MERGED,We.O.GROUPING,We.O.SIMILAR_ISSUES,We.O.TAGS]:i===Xe.m7.REPROCESSED_AND_HASNT_EVENT?[We.O.DETAILS,We.O.ATTACHMENTS,We.O.EVENTS,We.O.MERGED,We.O.GROUPING,We.O.SIMILAR_ISSUES,We.O.TAGS,We.O.USER_FEEDBACK]:[]:[]),[n,i]),c=(0,r.useMemo)((()=>{const e=M()(d.query,"query");return{pathname:`${t}events/`,query:e}}),[d,t]),{userCount:u}=s;let h="group-detail";s.hasSeen&&(h+=" hasSeen"),"resolved"===s.status&&(h+=" isResolved");const g=(0,D.FC)(s),m=!!p.length,v=s.shortId&&(0,Ce.tZ)(G.Z,{target:"issue_number",position:"bottom",children:(0,Ce.BX)(ot,{children:[(0,Ce.tZ)(ee.Z,{project:l,avatarSize:16,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:l.slug}}),(0,Ce.tZ)(le.u,{className:"help-link",title:(0,o.t)("This identifier is unique across your organization, and can be used to reference an issue in various places, like commit messages."),position:"bottom",children:(0,Ce.tZ)(nt,{shortId:s.shortId})}),s.issueType===C.EM.PERFORMANCE_N_PLUS_ONE_API_CALLS&&(0,Ce.tZ)(K.Z,{type:"beta",title:(0,o.t)("N+1 API Calls Performance Issues are in active development and may change")}),s.issueType===C.EM.PERFORMANCE_SLOW_DB_QUERY&&(0,Ce.tZ)(K.Z,{type:"alpha",title:(0,o.t)("Slow DB Query Performance Issues are in active development and may change")}),s.issueType===C.EM.PERFORMANCE_CONSECUTIVE_DB_QUERIES&&(0,Ce.tZ)(K.Z,{type:"beta",title:(0,o.t)("Consecutive DB Query Performance Issues are in active development and may change")}),s.issueType===C.EM.PERFORMANCE_RENDER_BLOCKING_ASSET&&(0,Ce.tZ)(K.Z,{type:"alpha",title:(0,o.t)("Large Render Blocking Asset Performance Issues are in active development and may change")}),s.issueType===C.EM.PERFORMANCE_UNCOMPRESSED_ASSET&&(0,Ce.tZ)(K.Z,{type:"alpha",title:(0,o.t)("Uncompressed Asset Performance Issues are in active development and may change")})]})}),y=n.features.includes("issue-actions-v2");return(0,Ce.tZ)(te.h4,{children:(0,Ce.BX)("div",{className:h,children:[(0,Ce.BX)(it,{children:[(0,Ce.tZ)(L.Z,{crumbs:[{label:"Issues",to:`/organizations/${n.slug}/issues/${d.search}`},{label:v}]}),y&&(0,Ce.tZ)(Je,{group:s,project:l,disabled:m,event:a,query:d.query})]}),(0,Ce.BX)(at,{children:[(0,Ce.BX)(lt,{children:[(0,Ce.BX)(dt,{children:[(0,Ce.tZ)("h3",{children:(0,Ce.tZ)(ct,{hasGuideAnchor:!0,data:s})}),s.inbox&&(0,Ce.tZ)(J.Z,{inbox:s.inbox,fontSize:"md"})]}),(0,Ce.BX)(ht,{children:[s.level&&(0,Ce.tZ)(Y.Z,{level:s.level,size:"11px"}),s.isUnhandled&&(0,Ce.tZ)(W.Z,{}),(0,Ce.tZ)(Q.Z,{message:g})]})]}),(0,Ce.BX)(ut,{children:[(0,Ce.BX)("div",{className:"count",children:[(0,Ce.tZ)("h6",{className:"nav-header",children:(0,o.t)("Events")}),(0,Ce.tZ)(se.Z,{disabled:m,to:c,children:(0,Ce.tZ)(X.Z,{className:"count",value:s.count})})]}),(0,Ce.BX)("div",{className:"count",children:[(0,Ce.tZ)("h6",{className:"nav-header",children:(0,o.t)("Users")}),0!==u?(0,Ce.tZ)(se.Z,{disabled:m,to:`${t}tags/user/${d.search}`,children:(0,Ce.tZ)(X.Z,{className:"count",value:u})}):(0,Ce.tZ)("span",{children:"0"})]})]})]}),y?(0,Ce.tZ)(at,{className:"hidden-sm hidden-md hidden-lg",children:(0,Ce.tZ)(V.Z,{alignDropdown:"right"})}):(0,Ce.BX)(at,{children:[(0,Ce.tZ)(Je,{group:s,project:l,disabled:m,event:a,query:d.query}),(0,Ce.tZ)(pt,{seenBy:s.seenBy,iconTooltip:(0,o.t)("People who have viewed this issue")})]}),(0,Ce.tZ)(tt,{baseUrl:t,disabledTabs:p,eventRoute:c,group:s,project:l})]})})}tt.displayName="GroupHeaderTabs",st.displayName="GroupHeader";const rt=st,it=(0,g.Z)("div",{target:"elqp5my11"})("display:flex;flex-direction:row;justify-content:space-between;gap:",(0,R.Z)(1),";align-items:center;"),ot=(0,g.Z)("div",{target:"elqp5my10"})("display:flex;gap:",(0,R.Z)(1),";align-items:center;"),nt=(0,g.Z)(ae.Z,{target:"elqp5my9"})("font-family:",(e=>e.theme.text.family),";font-size:",(e=>e.theme.fontSizeMedium),";line-height:1;"),at=(0,g.Z)("div",{target:"elqp5my8"})("display:flex;gap:",(0,R.Z)(2),";justify-content:space-between;margin-top:",(0,R.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){flex-direction:column;}"),lt=(0,g.Z)("div",{target:"elqp5my7"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){max-width:65%;}"),dt=(0,g.Z)("div",{target:"elqp5my6"})("display:flex;line-height:2;gap:",(0,R.Z)(1),";"),pt=(0,g.Z)(ne.Z,{target:"elqp5my5"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){display:none;}"),ct=(0,g.Z)(H.Z,{target:"elqp5my4"})({name:"870gjp",styles:"font-size:inherit"}),ut=(0,g.Z)("div",{target:"elqp5my3"})("display:grid;grid-template-columns:repeat(2, min-content);gap:calc(",(0,R.Z)(3)," + ",(0,R.Z)(3),");@media (min-width: ",(e=>e.theme.breakpoints.small),"){justify-content:flex-end;}"),ht=(0,g.Z)(et.S,{target:"elqp5my2"})("display:flex;gap:",(0,R.Z)(1),";justify-content:flex-start;line-height:1.2;"),gt=(0,g.Z)(F.Z,{target:"elqp5my1"})("display:flex;align-items:center;gap:",(0,R.Z)(.5),";"),mt=(0,g.Z)(_.td,{target:"elqp5my0"})("margin-top:",(0,R.Z)(2),";");var vt=s("./app/components/pageAlertBar.tsx");function yt(e){let{organization:t,project:s}=e;return(0,Ce.BX)(vt.Z,{children:[(0,Ce.tZ)(de.Db,{}),(0,Ce.tZ)(ft,{children:(0,o.t)("You are viewing a sample error. Configure Sentry to start viewing real errors.")}),(0,Ce.tZ)(Ze.zx,{size:"xs",priority:"primary",to:`/${t.slug}/${s.slug}/getting-started/${s.platform||""}`,onClick:()=>(0,T.Z)("growth.sample_error_onboarding_link_clicked",{project_id:s.id?.toString(),organization:t,platform:s.platform}),children:(0,o.t)("Get Started")})]})}yt.displayName="SampleEventAlert";const bt=yt,ft=(0,g.Z)("span",{target:"eyszuz80"})("margin:0 ",(0,R.Z)(1),";");class Zt extends r.Component{constructor(){super(...arguments),(0,h.Z)(this,"state",this.initialState),(0,h.Z)(this,"refetchInterval",null),(0,h.Z)(this,"remountComponent",(()=>{this.setState(this.initialState),this.fetchData()})),(0,h.Z)(this,"refetchGroup",(async()=>{const{loadingGroup:e,loading:t,loadingEvent:s,group:r}=this.state;if(r?.status!==Xe.m7.REPROCESSING||e||t||s)return;const{api:i}=this.props;this.setState({loadingGroup:!0});try{const e=await i.requestPromise(this.groupDetailsEndpoint,{query:this.getGroupQuery()}),t=this.getReprocessingNewRoute(e);if(t)return void m.browserHistory.push(t);this.setState({group:e,loadingGroup:!1})}catch(e){this.handleRequestError(e)}})),(0,h.Z)(this,"listener",j.Z.listen((e=>this.onGroupChange(e)),void 0))}getChildContext(){return{group:this.state.group,location:this.props.location}}componentDidMount(){this.fetchData(this.canLoadEventEarly(this.props)),this.updateReprocessingProgress(),async function(e,t){f.Z.onFetchEnvironments();try{const s=await e.requestPromise(`/organizations/${t}/environments/`);if(!s)return void f.Z.onFetchEnvironmentsError(new Error("retrieved environments is falsey"));f.Z.onFetchEnvironmentsSuccess(s)}catch(e){f.Z.onFetchEnvironmentsError(e)}}(this.props.api,this.props.organization.slug)}componentDidUpdate(e,t){const s=e.isGlobalSelectionReady!==this.props.isGlobalSelectionReady;(s||e.location.pathname!==this.props.location.pathname)&&this.fetchData(s&&this.canLoadEventEarly(this.props)),(!this.canLoadEventEarly(e)&&!t?.group&&this.state.group||e.params?.eventId!==this.props.params?.eventId&&this.state.group)&&this.getEvent(this.state.group).then((()=>{if(!this.state.group?.project)return;const e=this.props.projects.find((e=>e.id===this.state.group?.project.id));e&&this.trackView(e)}))}componentWillUnmount(){j.Z.reset(),this.listener?.(),this.refetchInterval&&window.clearInterval(this.refetchInterval)}get initialState(){return{group:null,loading:!0,loadingEvent:!0,loadingGroup:!0,error:!1,eventError:!1,errorType:null,project:null}}trackView(e){const{group:t,event:s}=this.state,{location:r,organization:i,router:o}=this.props,{alert_date:n,alert_rule_id:a,alert_type:l}=r.query;this.props.setEventNames("issue_details.viewed","Issue Details: Viewed"),this.props.setRouteAnalyticsParams({...(0,D.cU)(t),...(0,D.UF)(s),...(0,z.p)(e),alert_date:"string"==typeof n?(0,A.v5)(Number(n)):void 0,alert_rule_id:"string"==typeof a?a:void 0,alert_type:"string"==typeof l?l:void 0,has_setup_source_maps_alert:(0,Z.I)(i,o.location.query.project,s)})}canLoadEventEarly(e){return!e.params.eventId||["oldest","latest"].includes(e.params.eventId)}get groupDetailsEndpoint(){return`/issues/${this.props.params.groupId}/`}get groupReleaseEndpoint(){return`/issues/${this.props.params.groupId}/first-last-release/`}async getEvent(e){e&&this.setState({loadingEvent:!0,eventError:!1});const{params:t,environments:s,api:r,organization:i}=this.props,o=i.slug,n=t.groupId,a=t.eventId??"latest",l=e?.project?.slug;try{const e=await(0,Xe.MN)(r,o,n,a,s,l);this.setState({event:e,loading:!1,eventError:!1,loadingEvent:!1})}catch(e){v.Tb(e),this.setState({eventError:!0,loading:!1,loadingEvent:!1})}}getCurrentTab(){const{router:e,routes:t}=this.props,s=t[t.length-1];return e.params.tagKey?We.O.TAGS:Object.values(We.O).find((e=>s.path===We.h[e]))??We.O.DETAILS}getCurrentRouteInfo(e){const{organization:t,params:s}=this.props,{event:r}=this.state,i=this.getCurrentTab();return{baseUrl:(0,U.D)(`/organizations/${t.slug}/issues/${e.id}/${s.eventId&&r?`events/${r.id}/`:""}`),currentTab:i}}updateReprocessingProgress(){this.hasReprocessingV2Feature()&&(this.refetchInterval&&window.clearInterval(this.refetchInterval),this.refetchInterval=window.setInterval(this.refetchGroup,3e4))}hasReprocessingV2Feature(){const{organization:e}=this.props;return e.features?.includes("reprocessing-v2")}getReprocessingNewRoute(e){const{routes:t,location:s,params:r}=this.props,{groupId:i}=r,{id:o}=e,n=this.hasReprocessingV2Feature(),a=(0,Xe.M3)(e),{currentTab:l,baseUrl:d}=this.getCurrentRouteInfo(e);if(i!==o)return n&&a===Xe.m7.REPROCESSED_AND_HASNT_EVENT&&l!==We.O.ACTIVITY?{pathname:`${d}${We.O.ACTIVITY}/`,query:{...r,groupId:o}}:(0,N.Z)("",{routes:t,location:s,params:{...r,groupId:o}});if(n){if(a===Xe.m7.REPROCESSING&&l!==We.O.DETAILS)return{pathname:d,query:r};if(a===Xe.m7.REPROCESSED_AND_HASNT_EVENT&&l!==We.O.ACTIVITY&&l!==We.O.USER_FEEDBACK)return{pathname:`${d}${We.O.ACTIVITY}/`,query:r}}}getGroupQuery(){const{environments:e}=this.props;return{...e?{environment:e}:{},expand:["inbox","owners"],collapse:"release"}}getFetchDataRequestErrorType(e){return e?404===e?P:403===e?$:null:null}handleRequestError(e){v.Tb(e);const t=this.getFetchDataRequestErrorType(e?.status);this.setState({loadingGroup:!1,loading:!1,error:!0,errorType:t})}async fetchGroupReleases(){const{api:e}=this.props,t=await e.requestPromise(this.groupReleaseEndpoint);j.Z.onPopulateReleases(this.props.params.groupId,t)}async fetchData(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{api:t,isGlobalSelectionReady:s,organization:r,params:i}=this.props;if(s)try{const s=this.canLoadEventEarly(this.props)?this.getEvent():void 0,o=await t.requestPromise(this.groupDetailsEndpoint,{query:this.getGroupQuery()}),[n]=await Promise.all([o,s]),a=this.fetchGroupReleases(),l=this.getReprocessingNewRoute(n);if(l)return void m.browserHistory.push(l);const d=this.props.projects.find((e=>e.id===n.project.id));if(d){(0,Xe.V7)(t,r.slug,d.slug,i.groupId);const e={...this.props.location};void 0===e.query.project&&void 0===e.query._allp&&(e.query={...e.query,project:d.id}),delete e.query._allp,m.browserHistory.replace(e)}else v.$e((()=>{v.Tb(new Error("Project not found"))}));this.setState({project:d||n.project,loadingGroup:!1}),j.Z.loadInitialData([n]),e&&a.then((()=>d&&this.trackView(d)))}catch(e){this.handleRequestError(e)}}onGroupChange(e){const t=this.props.params.groupId;if(e.has(t)){const e=j.Z.get(t);if(e){if(e.stale)return void this.fetchData();this.setState({group:e})}}}getTitle(){const{organization:e}=this.props,{group:t}=this.state,s="Sentry";if(!t)return s;const{title:r}=(0,D.YQ)(t,e?.features),i=(0,D.FC)(t),{project:o}=t,n=`${e.slug} - ${o.slug}`;return r&&i?`${r}: ${i} - ${n}`:`${r||i||s} - ${n}`}tabClickAnalyticsEvent(e){const{organization:t}=this.props,{project:s,group:r,event:i}=this.state;if(!s||!r)return;if((0,T.Z)("issue_details.tab_changed",{organization:t,group_id:parseInt(r.id,10),issue_category:r.issueCategory,project_id:parseInt(s.id,10),tab:e}),r.issueCategory!==C.qE.ERROR)return;const o=i?i.tags.filter((e=>{let{key:t}=e;return["device","os","browser"].includes(t)})).reduce(((e,t)=>{let{key:s,value:r}=t;return e[s]=r,e}),{}):{};(0,T.Z)("issue_group_details.tab.clicked",{organization:t,tab:e,platform:s.platform,...o})}renderError(){const{projects:e,location:t}=this.props,s=t.query.project,r=e.find((e=>e.id===s));switch(this.state.errorType){case P:return(0,Ce.tZ)(Et,{message:(0,o.t)("The issue you were looking for was not found.")});case $:return(0,Ce.tZ)(k.Z,{organization:this.props.organization,project:r});default:return(0,Ce.tZ)(Et,{onRetry:this.remountComponent})}}renderContent(e,t){const{children:s,environments:i,organization:o,router:n}=this.props,{loadingEvent:a,eventError:l,event:d}=this.state,{currentTab:p,baseUrl:c}=this.getCurrentRouteInfo(t),u=(0,Xe.M3)(t);let h={environments:i,group:t,project:e};if(p===We.O.DETAILS)if(t.id===d?.groupID||l)h={...h,event:d,loadingEvent:a,eventError:l,groupReprocessingStatus:u,onRetry:()=>this.remountComponent()};else{const e=`/organizations/${o.slug}/issues/${d?.groupID}/events/${d?.id}/`;n.push((0,U.D)(e))}return p===We.O.TAGS&&(h={...h,event:d,baseUrl:c}),(0,Ce.BX)(_.mQ,{value:p,onChange:e=>this.tabClickAnalyticsEvent(e),children:[(0,Ce.tZ)(rt,{organization:o,groupReprocessingStatus:u,event:d,group:t,baseUrl:c,project:e}),(0,Ce.tZ)(St,{children:(0,Ce.tZ)(_.ck,{children:(0,r.isValidElement)(s)?(0,r.cloneElement)(s,h):s},p)})]})}renderPageContent(){const{error:e,group:t,project:s,loading:r}=this.state;if(r||!t&&!e)return(0,Ce.tZ)(E.Z,{});if(e)return this.renderError();const{organization:i}=this.props;return(0,Ce.tZ)(z.Z,{orgId:i.slug,slugs:[s?.slug??""],"data-test-id":"group-projects-container",children:e=>{let{projects:s,initiallyLoaded:r,fetchError:i}=e;return r?i?(0,Ce.tZ)(Et,{message:(0,o.t)("Error loading the specified project")}):this.renderContent(s[0],t):(0,Ce.tZ)(E.Z,{})}})}render(){const{project:e,group:t}=this.state,{organization:s}=this.props,i=t?.tags?.some((e=>"sample_event"===e.key));return(0,Ce.BX)(r.Fragment,{children:[i&&e&&(0,Ce.tZ)(bt,{project:e,organization:s}),(0,Ce.tZ)(I.Z,{noSuffix:!0,title:this.getTitle(),children:(0,Ce.tZ)(S.Z,{skipLoadLastUsed:!0,forceProject:e,shouldForceProject:!0,children:this.renderPageContent()})})]})}}Zt.displayName="GroupDetails",(0,h.Z)(Zt,"childContextTypes",{group:w.Z.Group,location:b.object});const xt=(0,O.Z)((0,B.Z)(y.zH(Zt))),Et=(0,g.Z)(x.Z,{target:"e12rcfa21"})("margin:",(0,R.Z)(2),";"),St=(0,g.Z)(_.nP,{target:"e12rcfa20"})({name:"1xwzzid",styles:"flex-grow:1;display:flex;flex-direction:column;justify-content:stretch"});function kt(e){let{selection:t,...s}=e;const u=(0,p.Z)(),{projects:h}=(0,c.Z)(),g=(0,d.Z)(),{params:m,location:v}=s,y=v.query.project,b=h.find((e=>e.id===y));return(0,r.useEffect)((()=>{b?.slug&&function(e){let{api:t,orgSlug:s,projSlug:r}=e;t.requestPromise(`/projects/${s}/${r}/`).then(n.Z.onUpdateSuccess).catch((e=>{const t=(0,o.t)("Unable to fetch project details");(0,a.Z)(t)(e),(0,i.Iw)(t)}))}({api:g,orgSlug:u.slug,projSlug:b.slug})}),[g,u.slug,b?.slug]),(0,r.useEffect)((()=>{(0,l.co)("issue_page.viewed",{group_id:parseInt(m.groupId,10),org_id:parseInt(u.id,10)})}),[u,m.groupId]),(0,Ce.tZ)(xt,{environments:t.environments,organization:u,projects:h,...s},`${m.groupId}-envs:${t.environments.join(",")}`)}kt.displayName="OrganizationGroupDetails";const It=(0,u.Z)(kt)},"./app/views/organizationGroupDetails/utils.tsx":(e,t,s)=>{s.d(t,{Ad:()=>g,M3:()=>v,MN:()=>l,V7:()=>d,dG:()=>c,g5:()=>p,m7:()=>m,sC:()=>h});var r=s("../node_modules/lodash/orderBy.js"),i=s.n(r),o=s("./app/actionCreators/group.tsx"),n=s("./app/api.tsx"),a=s("./app/locale.tsx");async function l(e,t,s,r,i,o){const n="latest"===r||"oldest"===r?`/issues/${s}/events/${r}/`:`/projects/${t}/${o}/events/${r}/?group_id=${s}`,a={};return 0!==i.length&&(a.environment=i),await e.requestPromise(n,{query:a})}function d(e,t,s,r){(0,o.Gv)(e,{orgId:t,projectId:s,itemIds:[r],failSilently:!0,data:{hasSeen:!0}},{})}function p(e,t){return(new n.KU).requestPromise(`/issues/${e}/user-reports/`,{includeAllArgs:!0,query:t})}function c(e){const t=e.tags.find((e=>{let{key:t}=e;return"environment"===t}));return t?t.value:null}const u={commented:(0,a.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,a.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,a.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,a.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,a.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function h(e){if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,a.t)("You have disabled workflow notifications for this project.");if(!e.isSubscribed)return(0,a.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,a.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&u.hasOwnProperty(t))return u[t]}return(0,a.t)("You're receiving updates because you are subscribed to workflow notifications for this project.")}function g(e){return i()([...e],(e=>{let{dateCreated:t}=e;return new Date(t)}),["desc"])[0]}let m;function v(e,t){const{status:s,count:r,activity:i}=e,o=Number(r);switch(s){case"reprocessing":return m.REPROCESSING;case"unresolved":return"reprocess"===(t??g(i))?.type?0===o?m.REPROCESSED_AND_HASNT_EVENT:m.REPROCESSED_AND_HAS_EVENT:m.NO_STATUS;default:return m.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(m||(m={}))}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_index_tsx.4dcf6a63549164adc5e21ee4f8f1551a.js.map