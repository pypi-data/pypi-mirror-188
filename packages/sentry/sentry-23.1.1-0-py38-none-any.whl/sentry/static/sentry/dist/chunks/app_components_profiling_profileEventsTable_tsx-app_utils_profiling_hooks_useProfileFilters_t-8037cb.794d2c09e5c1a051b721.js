"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_profiling_profileEventsTable_tsx-app_utils_profiling_hooks_useProfileFilters_t-8037cb"],{"./app/components/charts/areaChart.tsx":(e,t,n)=>{n.d(t,{T:()=>i});var o=n("./app/components/charts/series/lineSeries.tsx"),r=n("./app/components/charts/baseChart.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{series:t,stacked:n,colors:i,...a}=e;return(0,s.tZ)(r.Z,{...a,"data-test-id":"area-chart",colors:i,series:t.map(((e,t)=>{let{seriesName:r,data:s,...a}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.Z)({...e})}({stack:n?"area":void 0,name:r,data:s.map((e=>{let{name:t,value:n}=e;return[t,n]})),lineStyle:{color:i?.[t],opacity:1,width:.4},areaStyle:{color:i?.[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...a})}))})}i.displayName="AreaChart"},"./app/components/charts/chartZoom.tsx":(e,t,n)=>{n.d(t,{Z:()=>y});var o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),s=n("../node_modules/moment/moment.js"),i=n.n(s),a=n("../node_modules/query-string/index.js"),l=n("./app/actionCreators/pageFilters.tsx"),c=n("./app/components/charts/components/dataZoomInside.tsx");n("../node_modules/echarts/lib/component/dataZoomSlider.js");const d={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function u(e){return e&&Array.isArray(e)?e:[{...d,...e}]}var p=n("./app/components/charts/components/toolBox.tsx"),m=n("./app/utils/callIfFunction.tsx"),g=n("./app/utils/dates.tsx");const h=e=>e?i().utc(e).format(i().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class f extends r.Component{constructor(e){var t;super(e),t=this,(0,o.Z)(this,"history",void 0),(0,o.Z)(this,"currentPeriod",void 0),(0,o.Z)(this,"zooming",null),(0,o.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:h(e.start),end:h(e.end)}})),(0,o.Z)(this,"setPeriod",(function(e){let{period:n,start:o,end:r}=e,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:i,onZoom:c,usePageDate:d}=t.props,u=h(o),p=h(r);s&&t.history.push(t.currentPeriod),c?.({period:n,start:u,end:p}),t.zooming=()=>{if(d&&i){const e={...i.location.query,pageStart:o?(0,g.v5)(o):void 0,pageEnd:r?(0,g.v5)(r):void 0,pageStatsPeriod:n??void 0};a.stringify(e)!==a.stringify(i.location.query)&&i.push({pathname:i.location.pathname,query:e})}else(0,l.dR)({period:n,start:u?(0,g.hC)(u):u,end:p?(0,g.hC)(p):p},i);t.saveCurrentPeriod({period:n,start:o,end:r})}})),(0,o.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,o.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,o.Z)(this,"handleDataZoom",((e,t)=>{const n=t.getModel(),{startValue:o,endValue:r}=n._payload.batch[0];if(null===o&&null===r){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=i().utc(o),t=i().utc(r);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,o.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const n=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));n&&!n._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:n,disabled:o,children:r,xAxisIndex:s,router:i,onZoom:a,onRestore:l,onChartReady:d,onDataZoom:m,onFinished:h,showSlider:f,chartZoomOptions:y,...x}=this.props,Z=e??void 0,v=t?(0,g.hC)(t):void 0,b=n?(0,g.hC)(n):void 0;return r(o?{utc:Z,start:v,end:b,...x}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:Z,start:v,end:b,dataZoom:f?[...u({xAxisIndex:s,...y}),...(0,c.Z)({xAxisIndex:s,...y})]:(0,c.Z)({xAxisIndex:s,...y}),showTimeInTooltip:!0,toolBox:(0,p.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...x})}}f.displayName="ChartZoom";const y=f},"./app/components/charts/components/dataZoomInside.tsx":(e,t,n)=>{n.d(t,{Z:()=>r}),n("../node_modules/echarts/lib/component/dataZoomInside.js");const o={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function r(e){return e&&Array.isArray(e)?e:[{...o,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,n)=>{function o(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function r(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:o(t),...e}}n.d(t,{Z:()=>r})},"./app/components/gridEditable/sortLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>g});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("../node_modules/react-router/es/index.js"),s=n("../node_modules/lodash/omit.js"),i=n.n(s),a=n("./app/components/links/link.tsx"),l=n("./app/icons/index.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{align:t,title:n,canSort:o,generateSortLink:s,onClick:i,direction:a,replace:l}=e;const d=s();if(!d||!o)return(0,c.tZ)(p,{align:t,children:n});const g=a?(0,c.tZ)(m,{size:"xs",direction:"desc"===a?"down":"up"}):null;return(0,c.BX)(u,{align:t,to:d,onClick:e=>{l&&(e.preventDefault(),r.browserHistory.replace(d)),i?.(e)},children:[n," ",g]})}d.displayName="SortLink";const u=(0,o.Z)((e=>{const t=i()(e,["align","css"]);return(0,c.tZ)(a.Z,{...t})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),p=(0,o.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),m=(0,o.Z)(l.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),g=d},"./app/components/performanceDuration.tsx":(e,t,n)=>{n.d(t,{Z:()=>a});var o=n("./app/components/duration.tsx"),r=n("./app/utils.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){const t=function(e){return(0,r.ri)(e.nanoseconds)}(e)?e.nanoseconds/1e9:function(e){return(0,r.ri)(e.milliseconds)}(e)?e.milliseconds/1e3:e.seconds;return(0,s.tZ)(o.Z,{abbreviation:e.abbreviation,seconds:t,fixedDigits:2})}i.displayName="PerformanceDuration";const a=i},"./app/components/profiling/profileEventsTable.tsx":(e,t,n)=>{n.d(t,{Q:()=>H}),n("../node_modules/core-js/modules/es.array.includes.js");var o=n("../node_modules/react/index.js"),r=n("./app/components/count.tsx"),s=n("./app/components/dateTime.tsx"),i=n("./app/components/gridEditable/index.tsx"),a=n("./app/components/idBadge/projectBadge.tsx"),l=n("./app/components/links/link.tsx"),c=n("./app/components/performanceDuration.tsx"),d=n("./app/components/version.tsx"),u=n("./app/locale.tsx"),p=n("./app/utils.tsx"),m=n("./app/utils/discover/fieldRenderers.tsx"),g=n("./app/utils/discover/styles.tsx"),h=n("./app/utils/events.tsx"),f=n("./app/utils/profiling/routes.tsx"),y=n("./app/utils/profiling/tableRenderer.tsx"),x=n("./app/utils/useLocation.tsx"),Z=n("./app/utils/useOrganization.tsx"),v=n("./app/utils/useProjects.tsx"),b=n("./app/views/discover/table/quickContext/quickContextWrapper.tsx"),j=n("./app/views/discover/table/quickContext/utils.tsx"),k=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),w=n("./app/components/hovercard.tsx"),S=n("./app/styles/space.tsx"),z=n("./app/utils/profiling/hooks/useFunctions.tsx"),P=n("./app/utils/profiling/hooks/useProfileEvents.tsx"),q=n("./app/utils/usePageFilters.tsx"),_=n("./app/views/profiling/profileSummary/content.tsx"),C=n("./app/views/discover/table/quickContext/styles.tsx"),A=n("./app/components/button.tsx"),T=n("./app/components/loadingIndicator.tsx"),L=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function I(e){const{project:t,transaction:n,organization:o}=e,{query:r}=(0,x.T)(),s=(0,f.R0)({query:r,orgSlug:o.slug,projectSlug:t.slug,transaction:n}),i=(0,L.tZ)(l.Z,{to:s,children:n});return o.features.includes("profiling-dashboard-redesign")?(0,L.tZ)(M,{delay:250,header:(0,L.BX)(E,{justify:"space-between",align:"center",children:[(0,L.tZ)(X,{title:n,children:n}),(0,L.tZ)(A.zx,{to:s,size:"xs",children:(0,u.t)("View Profiles")})]}),body:(0,L.tZ)(F,{transaction:n,project:t,organization:o}),showUnderline:!0,children:i}):i}function F(e){let{transaction:t,project:n,organization:r}=e;const{slowestProfile:s,slowestProfileQuery:i,slowestProfileDurationMultiplier:a,latestProfileQuery:d,latestProfile:p,functionsQuery:g,functions:y}=function(e){const{transaction:t,project:n,referrer:o,skipFunctions:r=!1,skipLatestProfile:s=!1,skipSlowestProfile:i=!1}=e,{selection:a}=(0,q.Z)(),l={query:`transaction:"${t}"`,fields:(0,_.H)(n.platform),enabled:Boolean(t),limit:1,referrer:o,refetchOnMount:!1,projects:[n.id]},c=(0,P.GP)({...l,sort:{key:"profile.duration",order:"desc"},enabled:!i}),d=(0,P.GP)({...l,sort:{key:"timestamp",order:"desc"},enabled:!s}),u=(0,z.d)({project:n,query:"",selection:a,transaction:t,sort:"-p99",functionType:"application",enabled:!r}),p=c?.data?.[0].data[0]??null,g=c.data?.[0].meta.units["profile.duration"];return{slowestProfileQuery:c,slowestProfile:p,slowestProfileDurationMultiplier:g?m.a_[g]??1:1,latestProfileQuery:d,latestProfile:d?.data?.[0].data[0]??null,functionsQuery:u,functions:"resolved"===u.type?u.data.functions:null,isLoading:c.isLoading||d.isLoading||"loading"===u.type}}({transaction:t,project:n,referrer:"api.profiling.profiling-transaction-hovercard"}),x=(e,t)=>(0,f.TH)({orgSlug:r.slug,projectSlug:n.slug,profileId:e,query:t});return(0,L.BX)(E,{gap:(0,S.Z)(3),column:!0,children:[(0,L.BX)(E,{justify:"space-between",children:[(0,L.tZ)(R,{title:(0,u.t)("Latest profile"),isLoading:d.isLoading,children:p?(0,L.tZ)(l.Z,{to:x(String(p.id)),children:(0,h.XQ)(String(p.id))}):"-"}),(0,L.tZ)(R,{title:(0,u.t)("Slowest profile"),isLoading:i.isLoading,children:s?(0,L.BX)(E,{gap:(0,S.Z)(1),children:[(0,L.tZ)(c.Z,{milliseconds:a*s["profile.duration"],abbreviation:!0}),(0,L.BX)(l.Z,{to:x(String(s.id)),children:["(",(0,h.XQ)(String(s?.id)),")"]})]}):"-"})]}),(0,L.BX)(E,{column:!0,h:125,children:[(0,L.BX)(B,{children:[(0,L.tZ)(N,{children:(0,u.t)("Slowest app functions")}),(0,L.tZ)(N,{align:"right",children:(0,u.t)("P99")}),(0,L.tZ)(N,{align:"right",children:(0,u.t)("Count")}),"resolved"===g.type&&y?.map((e=>{const[t]=e.examples,n=t.replaceAll("-","");return(0,L.BX)(o.Fragment,{children:[(0,L.tZ)(O,{title:e.name,children:(0,L.tZ)(X,{children:(0,L.tZ)(l.Z,{to:x(n,{frameName:e.name,framePackage:e.package}),children:e.name})})}),(0,L.tZ)(O,{align:"right",children:(0,L.tZ)(c.Z,{nanoseconds:e.p99,abbreviation:!0})}),(0,L.tZ)(O,{align:"right",children:(0,L.tZ)($,{children:e.count})})]},e.name)}))]}),"loading"===g.type&&(0,L.tZ)(E,{align:"stretch",justify:"center",column:!0,h:"100%",children:(0,L.tZ)(E,{align:"center",justify:"center",children:(0,L.tZ)(T.Z,{mini:!0})})}),"resolved"===g.type&&0===y?.length&&(0,L.tZ)(E,{align:"stretch",justify:"center",column:!0,h:"100%",children:(0,L.tZ)(E,{align:"center",justify:"center",children:(0,u.t)("No functions data")})})]})]})}function R(e){const{title:t,children:n,isLoading:r}=e;return(0,L.BX)(E,{column:!0,gap:(0,S.Z)(1),children:[t&&(0,L.tZ)(C.n8,{children:t}),(0,L.tZ)(o.Fragment,{children:r?(0,L.tZ)(E,{align:"center",justify:"center",h:"1em",children:(0,L.tZ)(T.Z,{mini:!0})}):n})]})}I.displayName="ProfilingTransactionHovercard",F.displayName="ProfilingTransactionHovercardBody",R.displayName="ContextDetail";const D=e=>"string"==typeof e?e:"number"==typeof e?e+"px":void 0,E=(0,k.Z)("div",{target:"e1gnxyp36"})("display:flex;flex-direction:",(e=>e.column?"column":"row"),";justify-content:",(e=>e.justify),";align-items:",(e=>e.align),";gap:",(e=>D(e.gap)),";height:",(e=>D(e.h)),";width:",(e=>D(e.w)),";min-height:",(e=>D(e.minH)),";"),B=(0,k.Z)("div",{target:"e1gnxyp35"})({name:"z3l44r",styles:"display:grid;grid-template-columns:60% 20% 20%"}),N=(0,k.Z)("h6",{target:"e1gnxyp34"})("color:",(e=>e.theme.subText),";text-align:",(e=>e.align),";"),O=(0,k.Z)("div",{target:"e1gnxyp33"})("font-size:",(e=>e.theme.fontSizeSmall),";text-align:",(e=>e.align),";padding:",(0,S.Z)(.5)," 0px;"),$=(0,k.Z)("div",{target:"e1gnxyp32"})({name:"2qga7i",styles:"text-align:right"}),M=(0,k.Z)(w.uI,{target:"e1gnxyp31"})({name:"3s4yqf",styles:"width:400px"}),X=(0,k.Z)("div",{target:"e1gnxyp30"})({name:"btttr4",styles:"min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis"});function H(e){const t=(0,x.T)(),n=(0,Z.Z)(),{projects:r}=(0,v.Z)(),s=(0,o.useCallback)((n=>()=>{let o="desc";return n===e.sort.key&&e.sort.order===o&&(o="asc"),{...t,query:{...t.query,sort:"asc"===o?n:`-${n}`}}}),[t,e.sort]);return(0,L.tZ)(i.ZP,{isLoading:e.isLoading,error:e.error,data:e.data?.data??[],columnOrder:e.columns.map((e=>function(e){return V[e]?V[e]:{key:e,name:e,width:i.z7}}(e))),columnSortBy:[e.sort],grid:{renderHeadCell:(0,y.w)({currentSort:e.sort,generateSortLink:s,rightAlignedColumns:(c=e.columns,new Set(c.filter((e=>G.has(e))))),sortableColumns:e.sortableColumns}),renderBodyCell:(a=e.data?.meta??{fields:{},units:{}},l={location:t,organization:n,projects:r},function(e,t,n,o){return(0,L.tZ)(Q,{meta:a,baggage:l,column:e,dataRow:t,rowIndex:n,columnIndex:o})})},location:t});var a,l,c}function Q(e){const t=e.column.key,n=e.dataRow[t],o=e.meta.fields[t],i=e.meta.units[t];if("id"===t){const t=W(e.baggage,e.dataRow);if(!(0,p.ri)(t))return(0,L.tZ)(g.W2,{children:(0,h.XQ)(n)});const o=(0,f.O$)({orgSlug:e.baggage.organization.slug,projectSlug:t.slug,profileId:n});return(0,L.tZ)(g.W2,{children:(0,L.tZ)(l.Z,{to:o,children:(0,h.XQ)(n)})})}if("project.id"===t||"project"===t||"project.name"===t){const t=W(e.baggage,e.dataRow);return(0,p.ri)(t)?(0,L.tZ)(g.W2,{children:(0,L.tZ)(a.Z,{project:t,avatarSize:16})}):(0,L.tZ)(g.W2,{children:(0,u.t)("n/a")})}if("transaction"===t){const t=W(e.baggage,e.dataRow);if((0,p.ri)(t))return(0,L.tZ)(g.W2,{children:(0,L.tZ)(I,{transaction:n,project:t,organization:e.baggage.organization})})}if("release"===t&&n)return e.baggage.organization.features.includes("discover-quick-context")?(0,L.tZ)(b.V,{dataRow:e.dataRow,contextType:j.z.RELEASE,organization:e.baggage.organization,children:(0,L.tZ)(d.Z,{version:n,truncate:!0})}):(0,L.tZ)(g.cz,{children:(0,L.tZ)(d.Z,{version:n,anchor:!1,tooltipRawVersion:!0,truncate:!0})});switch(o){case"integer":case"number":return(0,L.tZ)(g.Hw,{children:(0,L.tZ)(r.Z,{value:n})});case"duration":const e=i?m.a_[i]??1:1;return(0,L.tZ)(g.Hw,{children:(0,L.tZ)(c.Z,{milliseconds:n*e,abbreviation:!0})});case"date":return(0,L.tZ)(g.W2,{children:(0,L.tZ)(s.Z,{date:n,year:!0,seconds:!0,timeZone:!0})});default:return(0,L.tZ)(g.W2,{children:n})}}function W(e,t){let n;if((0,p.ri)(t["project.id"])){const o=t["project.id"].toString();n=e.projects.find((e=>e.id===o))}else if((0,p.ri)(t.project)){const o=t.project;n=e.projects.find((e=>e.slug===o))}else if((0,p.ri)(t["project.name"])){const o=t["project.name"];n=e.projects.find((e=>e.slug===o))}return n??null}H.displayName="ProfileEventsTable";const G=new Set(["profile.duration","p75()","p95()","p99()","count()"]),V={id:{key:"id",name:(0,u.t)("Profile ID"),width:i.z7},trace:{key:"trace",name:(0,u.t)("Trace ID"),width:i.z7},"trace.transaction":{key:"trace.transaction",name:(0,u.t)("Transaction ID"),width:i.z7},transaction:{key:"transaction",name:(0,u.t)("Transaction"),width:i.z7},"profile.duration":{key:"profile.duration",name:(0,u.t)("Duration"),width:i.z7},project:{key:"project",name:(0,u.t)("Project"),width:i.z7},"project.id":{key:"project.id",name:(0,u.t)("Project"),width:i.z7},"project.name":{key:"project.name",name:(0,u.t)("Project"),width:i.z7},environment:{key:"environment",name:(0,u.t)("Environment"),width:i.z7},timestamp:{key:"timestamp",name:(0,u.t)("Timestamp"),width:i.z7},release:{key:"release",name:(0,u.t)("Release"),width:i.z7},"platform.name":{key:"platform.name",name:(0,u.t)("Platform"),width:i.z7},"device.arch":{key:"device.arch",name:(0,u.t)("Device Architecture"),width:i.z7},"device.classification":{key:"device.classification",name:(0,u.t)("Device Classification"),width:i.z7},"device.locale":{key:"device.locale",name:(0,u.t)("Device Locale"),width:i.z7},"device.manufacturer":{key:"device.manufacturer",name:(0,u.t)("Device Manufacturer"),width:i.z7},"device.model":{key:"device.model",name:(0,u.t)("Device Model"),width:i.z7},"os.build":{key:"os.build",name:(0,u.t)("OS Build"),width:i.z7},"os.name":{key:"os.name",name:(0,u.t)("OS Name"),width:i.z7},"os.version":{key:"os.version",name:(0,u.t)("OS Version"),width:i.z7},"last_seen()":{key:"last_seen()",name:(0,u.t)("Last Seen"),width:i.z7},"p75()":{key:"p75()",name:(0,u.t)("P75"),width:i.z7},"p95()":{key:"p95()",name:(0,u.t)("P95()"),width:i.z7},"p99()":{key:"p99()",name:(0,u.t)("P99()"),width:i.z7},"count()":{key:"count()",name:(0,u.t)("Count()"),width:i.z7}}},"./app/utils/profiling/hooks/useFunctions.tsx":(e,t,n)=>{n.d(t,{d:()=>d});var o=n("../node_modules/react/index.js"),r=n("../node_modules/@sentry/core/esm/exports.js"),s=n("./app/components/organizations/pageFilters/parse.tsx"),i=n("./app/locale.tsx"),a=n("./app/utils/tokenizeSearch.tsx"),l=n("./app/utils/useApi.tsx"),c=n("./app/utils/useOrganization.tsx");function d(e){let{functionType:t,project:n,query:d,transaction:u,sort:p,cursor:m,selection:g,enabled:h=!0}=e;const f=(0,l.Z)(),y=(0,c.Z)(),[x,Z]=(0,o.useState)({type:"initial"});return(0,o.useEffect)((()=>{if(void 0!==g&&null!==u&&h)return Z({type:"loading"}),function(e,t,n){let{cursor:o,functionType:r,projectSlug:i,query:l,selection:c,sort:d,transaction:u}=n;const p=new a.MY(l);return p.setFilterValues("transaction_name",[u]),e.requestPromise(`/projects/${t.slug}/${i}/profiling/functions/`,{method:"GET",includeAllArgs:!0,query:{cursor:o,environment:c.environments,...(0,s.fK)(c.datetime),query:p.formatString(),sort:d,is_application:"application"===r?"1":"system"===r?"0":void 0}})}(f,y,{functionType:t,projectSlug:n.slug,query:d,selection:g,sort:p,transaction:u,cursor:m}).then((e=>{let[t,,n]=e;Z({type:"resolved",data:{functions:t.functions??[],pageLinks:n?.getResponseHeader("Link")??null}})})).catch((e=>{Z({type:"errored",error:(0,i.t)("Error: Unable to load functions")}),r.Tb(e)})),()=>f.clear()}),[f,m,t,y,n.slug,d,g,p,u,h]),x}},"./app/utils/profiling/hooks/useProfileEvents.tsx":(e,t,n)=>{n.d(t,{GP:()=>d,Z:()=>u,kq:()=>p}),n("../node_modules/core-js/modules/es.array.includes.js");var o=n("../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),r=n("./app/components/organizations/pageFilters/parse.tsx"),s=n("./app/locale.tsx"),i=n("./app/utils.tsx"),a=n("./app/utils/useApi.tsx"),l=n("./app/utils/useOrganization.tsx"),c=n("./app/utils/usePageFilters.tsx");function d(e){let{fields:t,limit:n,referrer:s,query:i,sort:d,cursor:u,enabled:p=!0,refetchOnMount:m=!0,datetime:g,projects:h}=e;const f=(0,a.Z)(),y=(0,l.Z)(),{selection:x}=(0,c.Z)(),Z=`/organizations/${y.slug}/events/`,v={query:{dataset:"profiles",referrer:s,project:h||x.projects,environment:x.environments,...(0,r.fK)(g??x.datetime),field:t,per_page:n,query:i,sort:"asc"===d.order?d.key:`-${d.key}`,cursor:u}},b=[Z,v];return(0,o.a)({queryKey:b,queryFn:()=>f.requestPromise(Z,{method:"GET",includeAllArgs:!0,query:v.query}),refetchOnWindowFocus:!1,refetchOnMount:m,retry:!1,enabled:p})}function u(e){if(!(0,i.ri)(e))return null;const t=e.responseJSON?.detail;if("string"==typeof t)return t;const n=t?.message;return"string"==typeof n?n:(0,s.t)("An unknown error occurred.")}function p(e,t,n){const o="-"===(e=e||"")[0]?"desc":"asc",r="asc"===o?e:e.substring(1);return t.includes(r)?{key:r,order:o}:n}},"./app/utils/profiling/hooks/useProfileFilters.tsx":(e,t,n)=>{n.d(t,{J:()=>a});var o=n("../node_modules/react/index.js"),r=n("./app/components/organizations/pageFilters/parse.tsx"),s=n("./app/utils/useApi.tsx"),i=n("./app/utils/useOrganization.tsx");function a(e){let{query:t,selection:n}=e;const a=(0,s.Z)(),c=(0,i.Z)(),[d,u]=(0,o.useState)({});return(0,o.useEffect)((()=>{if(n)return function(e,t,n,o){return e.requestPromise(`/organizations/${t.slug}/profiling/filters/`,{method:"GET",query:{query:n,project:o.projects,environment:o.environments,...(0,r.fK)(o.datetime)}})}(a,c,t,n).then((e=>{const t=e.reduce(((e,t)=>(l[t.key]&&(t.key=l[t.key],e[t.key]={...t,predefined:!0}),e)),{});u(t)})),()=>a.clear()}),[a,c,t,n]),d}const l={version:"release",device_locale:"device.locale",platform:"platform.name",transaction_name:"transaction",device_os_build_number:"os.build",device_os_name:"os.name",device_os_version:"os.version",device_model:"device.model",device_manufacturer:"device.manufacturer",device_classification:"device.classification"}},"./app/utils/profiling/routes.tsx":(e,t,n)=>{function o(e){let{orgSlug:t,projectSlug:n,profileId:o}=e;return`/organizations/${t}/profiling/profile/${n}/${o}/flamechart/`}function r(e){let{orgSlug:t,query:n}=e;const o=function(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/`}({orgSlug:t});return{pathname:o,query:{...n}}}function s(e){let{orgSlug:t,projectSlug:n,transaction:o,query:r}=e;const s=function(e){let{orgSlug:t,projectSlug:n}=e;return`/organizations/${t}/profiling/summary/${n}/`}({orgSlug:t,projectSlug:n});return{pathname:s,query:{...r,transaction:o}}}function i(e){let{orgSlug:t,projectSlug:n,profileId:r,query:s}=e;return{pathname:o({orgSlug:t,projectSlug:n,profileId:r}),query:{...s}}}function a(e){let{orgSlug:t,projectSlug:n,profileId:o,query:r}=e;const s=function(e){let{orgSlug:t,projectSlug:n,profileId:o}=e;return`/organizations/${t}/profiling/profile/${n}/${o}/details/`}({orgSlug:t,projectSlug:n,profileId:o});return{pathname:s,query:{...r}}}n.d(t,{O$:()=>o,Qy:()=>a,R0:()=>s,TH:()=>i,XR:()=>r})},"./app/utils/profiling/tableRenderer.tsx":(e,t,n)=>{n.d(t,{w:()=>s});var o=n("./app/components/gridEditable/sortLink.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){let{currentSort:t,generateSortLink:n,rightAlignedColumns:s,sortableColumns:i,onClick:a}=e;return(e,l)=>(0,r.tZ)(o.Z,{onClick:t=>a?.(e,t),align:s?.has(e.key)?"right":"left",title:e.name,direction:t?.key===e.key?t?.order:void 0,canSort:i?.has(e.key)||!1,generateSortLink:n?.(e.key)??(()=>{}),replace:!0})}},"./app/views/profiling/landing/profileCharts.tsx":(e,t,n)=>{n.d(t,{A:()=>k});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/react/index.js")),s=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),i=n("./app/components/charts/areaChart.tsx"),a=n("./app/components/charts/chartZoom.tsx"),l=n("./app/components/charts/styles.tsx"),c=n("./app/components/panels/index.tsx"),d=n("./app/locale.tsx"),u=n("./app/styles/space.tsx"),p=n("./app/utils/discover/charts.tsx"),m=n("./app/utils/discover/fields.tsx"),g=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/@tanstack/react-query/build/lib/useQuery.mjs")),h=n("./app/components/organizations/pageFilters/parse.tsx"),f=n("./app/utils/useApi.tsx"),y=n("./app/utils/useOrganization.tsx"),x=n("./app/utils/usePageFilters.tsx");function Z(e,t){const n={axis:e,values:[]},o={dataset:"profiles",end:t.end,start:t.start},r=[];for(let e=0;e<t.data.length;e++){const[o,s]=t.data[e];n.values.push(s[0].count),r.push(o)}return{series:n,meta:o,timestamps:r}}var v=n("./app/utils/useRouter.tsx"),b=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const j=["count()","p99()","p95()","p75()"];function k(e){let{query:t,selection:n,hideCount:o}=e;const l=(0,v.Z)(),c=(0,s.u)(),u=(0,r.useMemo)((()=>o?j.filter((e=>"count()"!==e)):j),[o]),k=function(e){let{yAxes:t,interval:n,query:o,referrer:r}=e;const s=(0,f.Z)(),i=(0,y.Z)(),{selection:a}=(0,x.Z)(),l=`/organizations/${i.slug}/events-stats/`,c={query:{dataset:"profiles",referrer:r,project:a.projects,environment:a.environments,...(0,h.fK)(a.datetime),yAxis:t,interval:n,query:o}},d=[l,c];return(0,g.a)({queryKey:d,queryFn:()=>s.requestPromise(l,{method:"GET",includeAllArgs:!0,query:c.query}).then((e=>function(e,t){if(0===e.length)return[{data:[],meta:{dataset:"profiles",end:0,start:0},timestamps:[]},t[1],t[2]];if(1===e.length){const{series:n,meta:o,timestamps:r}=Z(e[0],t[0]);return[{data:[n],meta:o,timestamps:r},t[1],t[2]]}const n=[];let o={dataset:"profiles",end:-1,start:-1},r=[],s=!0;for(const i of e){const e=Z(i,t[0][i]);if(s)o=e.meta,r=e.timestamps;else{if(o.start!==e.meta.start||o.end!==e.meta.end)throw new Error("Mismatching start/end times");if(r.length!==e.timestamps.length||r.some(((t,n)=>t!==e.timestamps[n])))throw new Error("Mismatching timestamps")}n.push(e.series),s=!1}return[{data:n,meta:o,timestamps:r},t[1],t[2]]}(t,e))),refetchOnWindowFocus:!1,retry:!1})}({query:t,referrer:"api.profiling.landing-chart",yAxes:u}),P=(0,r.useMemo)((()=>{if("success"!==k.status)return[];const e=k.data[0].timestamps.map((e=>1e3*e)),t=k.data[0].data.filter((e=>u.includes(e.axis))).map((t=>{if(e.length!==t.values.length)throw new Error("Invalid stats response");return"count()"===t.axis?{data:t.values.map(((t,n)=>({name:e[n],value:t??0}))),seriesName:t.axis,xAxisIndex:0,yAxisIndex:0}:{data:t.values.map(((t,n)=>({name:e[n],value:(t??0)/1e6}))),seriesName:t.axis,xAxisIndex:1,yAxisIndex:1}}));return t.sort(((e,t)=>u.indexOf(e.seriesName)-u.indexOf(t.seriesName))),t}),[k,u]);return(0,b.tZ)(a.Z,{router:l,...n?.datetime,children:e=>(0,b.BX)(w,{children:[(0,b.BX)(S,{children:[!o&&(0,b.tZ)(z,{children:(0,d.t)("Profiles by Count")}),(0,b.tZ)(z,{children:(0,d.t)("Profiles by Percentiles")})]}),(0,b.tZ)(i.T,{height:300,series:P,grid:[{top:"32px",left:"24px",right:"52%",bottom:"16px"},{top:"32px",left:o?"24px":"52%",right:"24px",bottom:"16px"}],legend:{right:16,top:12,data:u.slice()},axisPointer:{link:[{xAxisIndex:[0,1]}]},xAxes:[{show:!o,gridIndex:0,type:"time"},{gridIndex:1,type:"time"}],yAxes:[{gridIndex:0,scale:!0,axisLabel:{color:c.chartLabel,formatter:e=>(0,p.gu)(e,"integer")}},{gridIndex:1,scale:!0,axisLabel:{color:c.chartLabel,formatter:e=>(0,p.gu)(e,"duration")}}],tooltip:{valueFormatter:(e,t)=>(0,p.CX)(e,(0,m.Px)(t))},isGroupedByDate:!0,showTimeInTooltip:!0,...e})]})})}k.displayName="ProfileCharts";const w=(0,o.Z)(c.s_,{target:"e1xfi5vp2"})("padding-top:",(0,u.Z)(2),";"),S=(0,o.Z)("div",{target:"e1xfi5vp1"})({name:"ai16bo",styles:"width:100%;display:flex;flex-direction:row"}),z=(0,o.Z)(l.Gh,{target:"e1xfi5vp0"})("flex-grow:1;margin-left:",(0,u.Z)(2),";")},"./app/views/profiling/profileSummary/content.tsx":(e,t,n)=>{n.d(t,{J:()=>N,H:()=>O});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/react/index.js")),s=n("../node_modules/react-router/es/index.js"),i=n("./app/components/compactSelect.tsx"),a=n("./app/components/layouts/thirds.tsx"),l=n("./app/components/pagination.tsx"),c=(n("../node_modules/core-js/modules/es.array.unshift.js"),n("./app/components/count.tsx")),d=n("./app/components/gridEditable/index.tsx"),u=n("./app/components/performanceDuration.tsx"),p=n("./app/locale.tsx"),m=n("./app/styles/space.tsx"),g=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){let{items:t}=e;const[n,o]=(0,r.useState)(!1),s=t[0];return(0,g.BX)(y,{expanded:n,children:[s&&(0,g.tZ)(f,{item:s}),t.length>1&&n&&t.slice(1,t.length).map((e=>(0,g.tZ)(f,{item:e},e.value))),t.length>1?(0,g.tZ)(Z,{children:(0,g.tZ)("button",{onClick:()=>o(!n),children:n?(0,p.t)("[collapse]"):(0,p.t)("[+%s more]",t.length-1)})}):null]})}function f(e){let{item:t}=e;return(0,g.tZ)(x,{children:(0,g.tZ)(s.Link,{to:t.target,children:t.value})})}h.displayName="ArrayLinks",f.displayName="LinkedItem";const y=(0,o.Z)("div",{target:"e153a8kj2"})("display:flex;flex-direction:",(e=>e.expanded?"column":"row"),";"),x=(0,o.Z)("span",{target:"e153a8kj1"})("flex-shrink:1;display:block;",(e=>e.theme.overflowEllipsis),";width:unset;"),Z=(0,o.Z)("div",{target:"e153a8kj0"})("white-space:nowrap;& button{background:none;border:0;outline:none;padding:0;cursor:pointer;color:",(e=>e.theme.linkColor),";margin-left:",(0,m.Z)(.5),";}");var v=n("./app/utils/discover/styles.tsx"),b=n("./app/utils/events.tsx"),j=n("./app/utils/profiling/routes.tsx"),k=n("./app/utils/profiling/tableRenderer.tsx"),w=n("./app/utils/useLocation.tsx"),S=n("./app/utils/useOrganization.tsx");function z(e){const t=(0,w.T)(),n=(0,S.Z)(),o=(0,r.useMemo)((()=>{let t=e.sort,n="asc";return e.sort.startsWith("-")&&(t=e.sort.substring(1),n="desc"),q.has(t)||(t="p99"),{key:t,order:n}}),[e.sort]),s=(0,r.useMemo)((()=>e.functions.map((t=>{const{worst:o,examples:r,...s}=t,i=r.filter((e=>e!==o));return i.unshift(o),{...s,examples:i.map((o=>{const r=o.replaceAll("-","");return{value:(0,b.XQ)(r),target:(0,j.TH)({orgSlug:n.slug,projectSlug:e.project.slug,profileId:r,query:{frameName:t.name,framePackage:t.package}})}}))}}))),[n.slug,e.project.slug,e.functions]),i=(0,r.useCallback)((e=>{if(!q.has(e))return()=>{};const n=o.key!==e?"desc":"desc"===o.order?"asc":"desc";return()=>({...t,query:{...t.query,functionsSort:`${"desc"===n?"-":""}${e}`}})}),[t,o]);return(0,g.tZ)(d.ZP,{isLoading:e.isLoading,error:e.error,data:s,columnOrder:T.map((e=>L[e])),columnSortBy:[],grid:{renderHeadCell:(0,k.w)({currentSort:o,rightAlignedColumns:P,sortableColumns:q,generateSortLink:i}),renderBodyCell:_},location:t})}z.displayName="FunctionsTable";const P=new Set(["p75","p99","count"]),q=P;function _(e,t,n,o){return(0,g.tZ)(A,{column:e,dataRow:t,rowIndex:n,columnIndex:o})}_.displayName="renderFunctionsTableCell";const C=(0,o.Z)("span",{target:"e3z67dv0"})("color:",(e=>e.theme.gray300),";");function A(e){let{column:t,dataRow:n}=e;const o=n[t.key];switch(t.key){case"count":return(0,g.tZ)(v.Hw,{children:(0,g.tZ)(c.Z,{value:o})});case"p75":case"p99":return(0,g.tZ)(v.Hw,{children:(0,g.tZ)(u.Z,{nanoseconds:o,abbreviation:!0})});case"examples":return(0,g.tZ)(h,{items:o});case"name":case"package":const e=o||(0,g.tZ)(C,{children:(0,p.t)("Unknown")});return(0,g.tZ)(v.W2,{children:e});default:return(0,g.tZ)(v.W2,{children:o})}}const T=["name","package","count","p75","p99","examples"],L={name:{key:"name",name:(0,p.t)("Name"),width:d.z7},package:{key:"package",name:(0,p.t)("Package"),width:d.z7},path:{key:"path",name:(0,p.t)("Path"),width:d.z7},p75:{key:"p75",name:(0,p.t)("P75 Total Duration"),width:d.z7},p99:{key:"p99",name:(0,p.t)("P99 Total Duration"),width:d.z7},count:{key:"count",name:(0,p.t)("Total Occurrences"),width:d.z7},examples:{key:"examples",name:(0,p.t)("Example Profiles"),width:d.z7}};var I=n("./app/components/profiling/profileEventsTable.tsx"),F=n("./app/data/platformCategories.tsx"),R=n("./app/utils/profiling/hooks/useFunctions.tsx"),D=n("./app/utils/profiling/hooks/useProfileEvents.tsx"),E=n("./app/utils/queryString.tsx"),B=n("./app/views/profiling/landing/profileCharts.tsx");function N(e){const t=(0,r.useMemo)((()=>O(e.project.platform)),[e.project]),n=(0,r.useMemo)((()=>(0,E.ro)(e.location.query.cursor)),[e.location.query.cursor]),o=(0,r.useMemo)((()=>(0,E.ro)(e.location.query.functionsCursor)),[e.location.query.functionsCursor]),l=(0,r.useMemo)((()=>(0,E.ro)(e.location.query.functionsSort,"-p99")),[e.location.query.functionsSort]),c=(0,D.kq)((0,E.ro)(e.location.query.sort),t,{key:"timestamp",order:"desc"}),d=(0,D.GP)({cursor:n,fields:t,query:e.query,sort:c,limit:5,referrer:"api.profiling.profile-summary-table"}),[u,m]=(0,r.useState)("application"),h=(0,R.d)({cursor:o,project:e.project,query:"",selection:e.selection,transaction:e.transaction,sort:l,functionType:u}),f=(0,r.useCallback)(((e,t,n)=>{s.browserHistory.push({pathname:t,query:{...n,functionsCursor:e}})}),[]),y=(0,r.useCallback)((t=>{s.browserHistory.push({...e.location,query:{...e.location.query,cursor:void 0,sort:t}})}),[e.location]);return(0,g.BX)(a.or,{fullWidth:!0,children:[(0,g.tZ)(B.A,{query:e.query,hideCount:!0}),(0,g.BX)(H,{children:[(0,g.tZ)(i.Z,{triggerProps:{prefix:(0,p.t)("Filter"),size:"xs"},value:"asc"===c.order?c.key:`-${c.key}`,options:X,onChange:e=>y(e.value)}),(0,g.tZ)(Q,{pageLinks:"success"===d.status?d.data?.[2]?.getResponseHeader("Link")??null:null,size:"xs"})]}),(0,g.tZ)(I.Q,{columns:t,data:"success"===d.status?d.data[0]:null,error:"error"===d.status?(0,p.t)("Unable to load profiles"):null,isLoading:"loading"===d.status,sort:c}),(0,g.BX)(H,{children:[(0,g.tZ)(i.Z,{triggerProps:{prefix:(0,p.t)("Suspect Functions"),size:"xs"},value:u,options:[{label:(0,p.t)("All"),value:"all"},{label:(0,p.t)("Application"),value:"application"},{label:(0,p.t)("System"),value:"system"}],onChange:e=>{let{value:t}=e;return m(t)}}),(0,g.tZ)(Q,{pageLinks:"resolved"===h.type?h.data.pageLinks:null,onCursor:f,size:"xs"})]}),(0,g.tZ)(z,{error:"errored"===h.type?h.error:null,isLoading:"initial"===h.type||"loading"===h.type,functions:"resolved"===h.type?h.data.functions:[],project:e.project,sort:l})]})}function O(e){return F.ai.includes(e)?$:M}N.displayName="ProfileSummaryContent";const $=["id","timestamp","release","device.model","device.classification","device.arch","profile.duration"],M=["id","timestamp","release","device.arch","profile.duration"],X=[{label:(0,p.t)("Recent Profiles"),value:"-timestamp"},{label:(0,p.t)("Slowest Profiles"),value:"-profile.duration"},{label:(0,p.t)("Fastest Profiles"),value:"profile.duration"}],H=(0,o.Z)("div",{target:"etsf1iv1"})("display:flex;justify-content:space-between;margin-bottom:",(0,m.Z)(1),";"),Q=(0,o.Z)(l.Z,{target:"etsf1iv0"})("margin:0 0 0 ",(0,m.Z)(1),";")}}]);
//# sourceMappingURL=../sourcemaps/app_components_profiling_profileEventsTable_tsx-app_utils_profiling_hooks_useProfileFilters_t-8037cb.ea215fe1969cd74f4ff7dd9f52840346.js.map