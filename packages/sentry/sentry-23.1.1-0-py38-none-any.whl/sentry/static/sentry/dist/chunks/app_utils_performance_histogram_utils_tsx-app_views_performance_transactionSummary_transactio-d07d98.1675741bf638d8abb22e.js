(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_performance_histogram_utils_tsx-app_views_performance_transactionSummary_transactio-d07d98","app_utils_performance_histogram_utils_tsx-app_views_performance_transactionSummary_transactio-f9d6be"],{"./app/components/events/searchBar.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>C}),n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/react/index.js"),s=n("../node_modules/@sentry/core/esm/exports.js"),o=n("../node_modules/lodash/assign.js"),a=n.n(o),i=n("../node_modules/lodash/flatten.js"),c=n.n(i),u=n("../node_modules/lodash/memoize.js"),p=n.n(u),d=n("../node_modules/lodash/omit.js"),l=n.n(d),m=n("./app/actionCreators/tags.tsx"),h=n("./app/components/smartSearchBar/index.tsx"),g=n("./app/constants/index.tsx"),f=n("./app/types/index.tsx"),y=n("./app/utils.tsx"),v=n("./app/utils/discover/fields.tsx"),x=n("./app/utils/fields/index.ts"),b=n("./app/utils/measurements/measurements.tsx"),j=n("./app/utils/useApi.tsx"),w=n("./app/utils/withTags.tsx"),Z=n("./app/views/dashboards/utils.tsx"),_=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const S=new RegExp(`^${g.c$}|\\${g.ir}`,"g"),T=new Set(Object.keys(v.wZ)),k=Object.keys(v.wZ).reduce(((e,t)=>(e[t]={...v.wZ[t],kind:x.IV.FIELD},e)),{}),E=l()(k,v.J8),P=v.$4.reduce(((e,t)=>(e[t]={name:t,kind:x.IV.METRICS},e)),{}),q=Object.keys(v.jg).reduce(((e,t)=>(e[t]={...v.jg[t],kind:x.IV.FIELD},e)),{});function F(e){const{maxSearchItems:t,organization:n,tags:o,omitTags:i,fields:u,projectIds:d,includeSessionTagsValues:g,maxMenuHeight:w,customMeasurements:F}=e,C=(0,j.Z)(),I=(0,r.useRef)(!1),O=(0,r.useMemo)((()=>(e=>e?.length?e.reduce(((e,t)=>(T.has(t.field)||(0,v.GO)(t.field)||(0,Z.nk)(t.field)||(e[t.field]={key:t.field,name:t.field,kind:x.IV.FUNCTION}),e)),{}):[])(u)),[u]),$=(0,r.useMemo)((()=>Object.keys(o).reduce(((e,t)=>(e[t]={...o[t],kind:x.IV.TAG},e)),{})),[o]);(0,r.useEffect)((()=>{V.cache.clear?.()}),[d]);const V=p()(((e,t,r)=>{const s=d?.map(String);return(0,v.h1)(e.key)||(0,v.Xr)(e.key)?Promise.resolve([]):(0,m.Fo)({api:C,orgSlug:n.slug,tagKey:e.key,search:t,projectIds:s,endpointParams:r,includeTransactions:!0,includeSessions:g}).then((e=>c()(e.filter((e=>{let{name:t}=e;return(0,y.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:n}=e;return`${n}-${t}`})),z=e=>{let t;!I.current&&Object.keys(o).length>0&&(t=s.Yr({name:"SearchBar.getTagList"}),I.current=!0);const r=((e,t)=>{const n=Object.keys(e).reduce(((t,n)=>(t[n]={...e[n],kind:x.IV.MEASUREMENT},t)),{});return t?Object.keys(t).reduce(((e,n)=>(e[n]={...t[n],kind:x.IV.MEASUREMENT},e)),n):n})(e,F),c=n.features.includes("performance-view")?Object.assign({},r,O,P,k):Object.assign({},E);a()(c,$,k,q),c.has={key:x.Sh.HAS,name:"Has property",values:Object.keys(c).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),predefined:!0,kind:x.IV.FIELD};const u=i&&i.length>0?l()(c,i):c;if(t){const e=Object.keys(u).length;t.setTag("tags.totalCount",e);const n=[1,5,10,20,50,100,200,300,400,500,600,700,800,900,1e3,1e4].find((t=>e<=t));t.setTag("tags.totalCount.grouped",`<=${n}`),t.finish()}return u};return(0,_.tZ)(b.Z,{children:n=>{let{measurements:r}=n;return(0,_.tZ)(h.Z,{hasRecentSearches:!0,savedSearchType:f.L4.EVENT,onGetTagValues:V,supportedTags:z(r),prepareQuery:e=>e.replace(S,""),maxSearchItems:t,excludedTags:[x.Sh.ENVIRONMENT,x.Sh.TOTAL_COUNT],maxMenuHeight:w??300,customPerformanceMetrics:F,...e})}})}F.displayName="SearchBar";const C=(0,w.Z)(F)},"./app/utils/performance/histogram/utils.tsx":(e,t,n)=>{"use strict";n.d(t,{GT:()=>a,_W:()=>o,te:()=>s}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("./app/utils/formatters.tsx");function s(e){return e.length>=2?e[1].bin-e[0].bin:0}function o(e){const t=s(e);return e.map((e=>{const n=e.bin;return{start:n,end:n+t}}))}function a(e){let{precision:t,type:n,additionalFieldsFn:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=e=>{switch(n){case"duration":const s=t??(e<1e3?0:3);return(0,r.g9)(e/1e3,s,!0);case"number":const o=10**(t??0);return(Math.round((e+Number.EPSILON)*o)/o).toLocaleString();default:throw new Error(`Unable to format type: ${n}`)}};return e.map((e=>({value:e.count,name:o(e.bin),...s?.(e.bin)??{}})))}},"./app/utils/withTags.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/react/index.js"),o=n("./app/stores/tagStore.tsx"),a=n("./app/utils/getDisplayName.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=function(e){class t extends s.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{tags:o.Z.getState()}),(0,r.Z)(this,"unsubscribe",o.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...n}=this.props;return(0,i.tZ)(e,{tags:t??this.state.tags,...n})}}return t.displayName="WithTags",(0,r.Z)(t,"displayName",`withTags(${(0,a.Z)(e)})`),t}},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,n)=>{"use strict";n.d(t,{Kc:()=>m,Lc:()=>h,Zq:()=>l,_S:()=>c,q3:()=>i,qg:()=>d,tb:()=>p,xr:()=>u}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/locale.tsx"),s=n("./app/utils/queryString.tsx"),o=n("./app/views/performance/transactionSummary/filter.tsx"),a=n("./app/views/performance/transactionSummary/utils.tsx");let i;function c(e,t){const{p99:n,p95:s,p75:a,p50:c}=t||{p99:0,p95:0,p75:0,p50:0};return{[i.p50]:{name:i.p50,query:c?[["transaction.duration",`<=${c.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(e)||"transaction.duration"},label:(0,r.t)("p50")},[i.p75]:{name:i.p75,query:a?[["transaction.duration",`<=${a.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(e)||"transaction.duration"},label:(0,r.t)("p75")},[i.p95]:{name:i.p95,query:s?[["transaction.duration",`<=${s.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(e)||"transaction.duration"},label:(0,r.t)("p95")},[i.p99]:{name:i.p99,query:n?[["transaction.duration",`<=${n.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(e)||"transaction.duration"},label:(0,r.t)("p99")},[i.p100]:{name:i.p100,label:(0,r.t)("p100")}}}function u(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/events/`,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function p(e){return t=(0,s.ro)(e.query.showTransactions,i.p100),Object.values(i).includes(t)?t:i.p100;var t}function d(e,t){const n=c(t),r=n[e].sort?.kind,s=n[e].sort?.field,o={showTransactions:e};return r&&s&&(o.sort=`${"desc"===r?"-":""}${s}`),o}function l(e){switch(e){case a.K0.OUTLIER:return i.p100;case a.K0.SLOW:return i.p95;default:return}}function m(e){return{p100:e?.["p100()"],p99:e?.["p99()"],p95:e?.["p95()"],p75:e?.["p75()"],p50:e?.["p50()"]}}function h(e){return e.withColumns([{kind:"function",function:["p100","",void 0,void 0]},{kind:"function",function:["p99","",void 0,void 0]},{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["p75","",void 0,void 0]},{kind:"function",function:["p50","",void 0,void 0]}])}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(i||(i={}))},"./app/views/performance/transactionSummary/utils.tsx":(e,t,n)=>{"use strict";n.d(t,{K0:()=>p,MF:()=>f,PU:()=>l,Z6:()=>h,e1:()=>m,uI:()=>y,vd:()=>g,xf:()=>d});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/styles/space.tsx"),o=n("./app/utils/discover/urls.tsx"),a=n("./app/utils/getRouteStringFromRoutes.tsx"),i=n("./app/utils/performance/urls.ts"),c=n("./app/utils/tokenizeSearch.tsx"),u=n("./app/views/performance/traceDetails/utils.tsx");let p;function d(e){const t=l(e);return t.removeFilter("transaction"),t}function l(e){const t=new c.MY(e);return t.removeFilter("event.type"),t}function m(e){let{orgSlug:t,transaction:n,projectID:r,query:s,unselectedSeries:o="p100()",display:a,trendFunction:i,trendColumn:c,showTransactions:u,additionalQuery:p,subPath:l}=e;const m=function(e){let{orgSlug:t,subPath:n}=e;return`/organizations/${t}/performance/summary/${n?`${n}/`:""}`}({orgSlug:t,subPath:l});let h;return h="string"==typeof s.query?d(s.query).formatString():s.query,{pathname:m,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:h,unselectedSeries:o,showTransactions:u,display:a,trendFunction:i,trendColumn:c,referrer:"performance-transaction-summary",...p}}}function h(e){return(t,n,r)=>{const s=`${n.trace}`;return s?(0,u.YA)(t,s,e,{}):{}}}function g(e){return(t,n,r,s)=>{const a=(0,o.JE)(n);return(0,i.D)(t.slug,a,e,r,s)}}function f(e){const t=(0,a.Z)(e);return(e,n,r)=>{const s=n.replayId;if(!s)return{};const o=`${n["project.name"]}:${s}`;if(!n.timestamp)return{pathname:`/organizations/${e.slug}/replays/${o}/`,query:{referrer:t}};const a=new Date(n.timestamp).getTime()-n["transaction.duration"];return{pathname:`/organizations/${e.slug}/replays/${o}/`,query:{event_t:a,referrer:t}}}}!function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(p||(p={}));const y=(0,r.Z)("div",{target:"etoucxl0"})("margin-top:",(0,s.Z)(3),";")},"./app/views/performance/trends/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/react/index.js"),o=n("./app/components/layouts/thirds.tsx"),a=n("./app/components/noProjectMessage.tsx"),i=n("./app/components/sentryDocumentTitle.tsx"),c=n("./app/locale.tsx"),u=n("./app/utils/withApi.tsx"),p=n("./app/utils/withOrganization.tsx"),d=n("./app/utils/withPageFilters.tsx"),l=n("./app/utils/withProjects.tsx"),m=n("./app/views/performance/data.tsx"),h=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),g=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react-router/es/index.js")),f=n("./app/components/alert.tsx"),y=n("./app/components/breadcrumbs.tsx"),v=n("./app/components/compactSelect.tsx"),x=n("./app/components/datePageFilter.tsx"),b=n("./app/components/environmentPageFilter.tsx"),j=n("./app/components/events/searchBar.tsx"),w=n("./app/components/organizations/pageFilterBar.tsx"),Z=n("./app/components/organizations/pageFilters/container.tsx"),_=n("./app/components/projectPageFilter.tsx"),S=n("./app/constants/index.tsx"),T=n("./app/styles/space.tsx"),k=n("./app/utils/analytics.tsx"),E=n("./app/utils/discover/fields.tsx"),P=n("./app/utils/queryString.tsx"),q=n("./app/utils/tokenizeSearch.tsx"),F=n("./app/views/performance/utils.tsx"),C=n("./app/views/performance/trends/changedTransactions.tsx"),I=n("./app/views/performance/trends/types.tsx"),O=n("./app/views/performance/trends/utils.tsx"),$=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const V={start:null,end:null,utc:!1,period:O._1};class z extends s.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{}),(0,r.Z)(this,"handleSearch",(e=>{const{location:t}=this.props,n=(0,O.Ws)();g.browserHistory.push({pathname:t.pathname,query:{...t.query,...n,query:String(e).trim()||void 0}})})),(0,r.Z)(this,"setError",(e=>{this.setState({error:e})})),(0,r.Z)(this,"handleTrendFunctionChange",(e=>{const{organization:t,location:n}=this.props,r={};Object.values(I.ER).forEach((e=>{const t=(0,O.j_)(e);r[t]=void 0})),(0,k.ec)({eventKey:"performance_views.trends.change_function",eventName:"Performance Views: Change Function",organization_id:parseInt(t.id,10),function_name:e}),this.setState({previousTrendFunction:(0,O.CE)(n).field});const s=(0,O.Ws)();g.browserHistory.push({pathname:n.pathname,query:{...n.query,...r,...s,trendFunction:e}})})),(0,r.Z)(this,"handleParameterChange",(e=>{const{organization:t,location:n}=this.props,r=(0,O.Ws)();(0,k.ec)({eventKey:"performance_views.trends.change_parameter",eventName:"Performance Views: Change Parameter",organization_id:parseInt(t.id,10),parameter_name:e}),g.browserHistory.push({pathname:n.pathname,query:{...n.query,...r,trendParameter:e}})}))}renderError(){const{error:e}=this.state;return e?(0,$.tZ)(f.bZ,{type:"error",showIcon:!0,children:e}):null}getPerformanceLink(){const{location:e}=this.props,t={...e.query},n=(0,P.ro)(e.query.query,""),r=new q.MY(n);return r.removeFilter("tpm()"),r.removeFilter("confidence()"),r.removeFilter("transaction.duration"),t.query=r.formatString(),{pathname:(0,F.de)(this.props.organization),query:t}}render(){const{organization:e,eventView:t,location:n,projects:r}=this.props,{previousTrendFunction:s}=this.state,a=t.clone();(0,O.iF)(a,n);const i=(0,E.db)(e,[{field:"absolute_correlation()"},{field:"trend_percentage()"},{field:"trend_difference()"},{field:"count_percentage()"},{field:"tpm()"},{field:"tps()"}],["epm()","eps()"]),u=(0,O.CE)(n),p=(0,O.IO)(n,r,t.project),d=(0,F.Ov)(n);return(0,$.BX)(Z.Z,{defaultSelection:{datetime:V},children:[(0,$.tZ)(o.h4,{children:(0,$.BX)(o.oB,{children:[(0,$.tZ)(y.Z,{crumbs:[{label:"Performance",to:this.getPerformanceLink()},{label:"Trends"}]}),(0,$.tZ)(o.Dx,{children:(0,c.t)("Trends")})]})}),(0,$.tZ)(o.uT,{children:(0,$.tZ)(o.or,{fullWidth:!0,children:(0,$.BX)(N,{location:n,eventView:t,projects:r,children:[(0,$.BX)(D,{children:[(0,$.BX)(w.Z,{condensed:!0,children:[(0,$.tZ)(_.Z,{}),(0,$.tZ)(b.Z,{}),(0,$.tZ)(x.Z,{alignDropdown:"left"})]}),(0,$.tZ)(L,{searchSource:"trends",organization:e,projectIds:a.project,query:d,fields:i,onSearch:this.handleSearch,maxQueryLength:S.dI}),(0,$.tZ)(v.Z,{triggerProps:{prefix:(0,c.t)("Percentile")},value:u.field,options:O.T1.map((e=>{let{label:t,field:n}=e;return{value:n,label:t}})),onChange:e=>this.handleTrendFunctionChange(e.value)}),(0,$.tZ)(v.Z,{triggerProps:{prefix:(0,c.t)("Parameter")},value:p.label,options:O.cs.map((e=>{let{label:t}=e;return{value:t,label:t}})),onChange:e=>this.handleParameterChange(e.value)})]}),(0,$.BX)(M,{children:[(0,$.tZ)(C.Z,{trendChangeType:I.ER.IMPROVED,previousTrendFunction:s,trendView:a,location:n,setError:this.setError}),(0,$.tZ)(C.Z,{trendChangeType:I.ER.REGRESSION,previousTrendFunction:s,trendView:a,location:n,setError:this.setError})]})]})})})]})}}z.displayName="TrendsContent";class N extends s.Component{constructor(){super(...arguments),(0,r.Z)(this,"hasPushedDefaults",!1)}render(){const{children:e,location:t,eventView:n,projects:r}=this.props,o=(0,P.ro)(t.query.query),a=(0,O.IO)(t,r,n.project),i=new q.MY(o||"");if(o||this.hasPushedDefaults)return this.hasPushedDefaults=!0,(0,$.tZ)(s.Fragment,{children:e});this.hasPushedDefaults=!0,i.setFilterValues("tpm()",[">0.01"]),i.setFilterValues(a.column,[">0",`<${O.bg}`]);const c=i.formatString();return n.query=c,g.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:String(c).trim()||void 0}}),null}}N.displayName="DefaultTrends";const D=(0,h.Z)("div",{target:"e1eefhnb2"})("display:grid;gap:",(0,T.Z)(2),";margin-bottom:",(0,T.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(3, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto 1fr auto auto;}"),L=(0,h.Z)(j.Z,{target:"e1eefhnb1"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/5;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),M=(0,h.Z)("div",{target:"e1eefhnb0"})("display:grid;gap:",(0,T.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(2, minmax(0, 1fr));}"),R=(0,d.Z)(z);class B extends s.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{eventView:(0,m.C)(this.props.location,this.props.projects,{isTrends:!0}),error:void 0}),(0,r.Z)(this,"setError",(e=>{this.setState({error:e})}))}static getDerivedStateFromProps(e,t){return{...t,eventView:(0,m.C)(e.location,e.projects,{isTrends:!0})}}getDocumentTitle(){return[(0,c.t)("Trends"),(0,c.t)("Performance")].join(" - ")}renderContent(){const{organization:e,location:t,projects:n}=this.props,{eventView:r}=this.state;return(0,$.tZ)(R,{organization:e,location:t,eventView:r,projects:n})}render(){const{organization:e}=this.props;return(0,$.tZ)(i.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,$.tZ)(o.T3,{children:(0,$.tZ)(a.Z,{organization:e,children:this.renderContent()})})})}}B.displayName="TrendsSummary";const A=(0,p.Z)((0,l.Z)((0,d.Z)((0,u.Z)(B))))},"../node_modules/lodash/assign.js":(e,t,n)=>{var r=n("../node_modules/lodash/_assignValue.js"),s=n("../node_modules/lodash/_copyObject.js"),o=n("../node_modules/lodash/_createAssigner.js"),a=n("../node_modules/lodash/isArrayLike.js"),i=n("../node_modules/lodash/_isPrototype.js"),c=n("../node_modules/lodash/keys.js"),u=Object.prototype.hasOwnProperty,p=o((function(e,t){if(i(t)||a(t))s(t,c(t),e);else for(var n in t)u.call(t,n)&&r(e,n,t[n])}));e.exports=p},"../node_modules/lodash/negate.js":e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"../node_modules/lodash/omitBy.js":(e,t,n)=>{var r=n("../node_modules/lodash/_baseIteratee.js"),s=n("../node_modules/lodash/negate.js"),o=n("../node_modules/lodash/pickBy.js");e.exports=function(e,t){return o(e,s(r(t)))}}}]);
//# sourceMappingURL=../sourcemaps/app_utils_performance_histogram_utils_tsx-app_views_performance_transactionSummary_transactio-d07d98.339c19432899e589913c65bf276b7cfb.js.map