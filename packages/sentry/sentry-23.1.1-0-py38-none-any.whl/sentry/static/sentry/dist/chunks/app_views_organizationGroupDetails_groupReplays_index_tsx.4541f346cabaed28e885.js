"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupReplays_index_tsx"],{"./app/utils/useCleanQueryParamsOnRouteLeave.tsx":(e,t,s)=>{s.d(t,{Z:()=>n,j:()=>i});var a=s("../node_modules/react/index.js"),r=s("../node_modules/react-router/es/index.js"),o=s("./app/utils/useLocation.tsx");function i(e){let{fieldsToClean:t,newLocation:s,oldPathname:a}=e;const o=t.some((e=>void 0!==s.query[e]));if(s.pathname===a||!o)return;const i=t.reduce(((e,t)=>(e[t]=void 0,e)),{...s.query});r.browserHistory.replace({pathname:s.pathname,query:i})}const n=function(e){let{fieldsToClean:t}=e;const s=(0,o.T)(),n=(0,a.useCallback)((e=>{i({fieldsToClean:t,newLocation:e,oldPathname:s.pathname})}),[s.pathname,t]);(0,a.useEffect)((()=>r.browserHistory.listen(n)),[n])}},"./app/views/organizationGroupDetails/groupReplays/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a=s("./app/components/acl/feature.tsx"),r=s("./app/components/alert.tsx"),o=s("./app/components/layouts/thirds.tsx"),i=s("./app/locale.tsx"),n=s("./app/utils/useOrganization.tsx"),l=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=s("../node_modules/react/index.js"),u=s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),d=s("./app/utils/replays/hooks/useReplayList.tsx"),c=s("./app/utils/useLocation.tsx"),y=s("./app/utils/useMedia.tsx"),m=s("../node_modules/@sentry/core/esm/exports.js"),g=s("./app/utils/discover/eventView.tsx"),h=s("./app/utils/discover/genericDiscoverQuery.tsx"),v=s("./app/utils/queryString.tsx"),x=s("./app/utils/replays/fetchReplayList.tsx"),b=s("./app/utils/useApi.tsx"),w=s("./app/utils/useCleanQueryParamsOnRouteLeave.tsx");var f=s("./app/views/replays/replayTable/index.tsx"),Z=s("./app/views/replays/replayTable/types.tsx"),k=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function j(e){let{group:t}=e;const s=(0,u.u)(),a=(0,y.Z)(`(min-width: ${s.breakpoints.small})`),r=(0,n.Z)(),o=(0,c.T)(),{eventView:i,fetchError:l,pageLinks:d}=function(e){let{group:t,location:s,organization:a}=e;const r=(0,b.Z)(),[o,i]=(0,p.useState)({pageLinks:null,replayIds:void 0}),[n,l]=(0,p.useState)(),{cursor:u}=s.query,d=(0,p.useCallback)((async()=>{const e=g.ZP.fromSavedQuery({id:"",name:"Errors within replay",version:2,fields:["replayId","count()"],query:`issue.id:${t.id} !replayId:""`,projects:[Number(t.project.id)]});try{const[{data:t},s,o]=await(0,h.AA)(r,`/organizations/${a.slug}/events/`,e.getEventsAPIPayload({query:{cursor:u}}));i({pageLinks:o?.getResponseHeader("Link")??"",replayIds:t.map((e=>String(e.replayId)))})}catch(e){m.Tb(e),l(e)}}),[r,u,a.slug,t.id,t.project.id]),c=(0,p.useMemo)((()=>o.replayIds?g.ZP.fromSavedQuery({id:"",name:"",version:2,fields:x.p8,projects:[Number(t.project.id)],query:`id:[${String(o.replayIds)}]`,orderby:(0,v.ro)(s.query.sort,x.yw)}):null),[s.query.sort,t.project.id,o.replayIds]);return(0,w.Z)({fieldsToClean:["cursor"]}),(0,p.useEffect)((()=>{d()}),[d]),{eventView:c,fetchError:n,pageLinks:o.pageLinks}}({group:t,location:o,organization:r});return i?(0,k.tZ)(L,{eventView:i,organization:r,pageLinks:d}):(0,k.tZ)(T,{withPadding:!0,children:(0,k.tZ)(f.Z,{fetchError:l,isFetching:!0,replays:[],sort:void 0,visibleColumns:[Z.M.session,...a?[Z.M.startedAt]:[],Z.M.duration,Z.M.countErrors,Z.M.activity]})})}j.displayName="GroupReplays";const L=e=>{let{eventView:t,organization:s}=e;const a=(0,p.useMemo)((()=>({query:{}})),[]),r=(0,u.u)(),o=(0,y.Z)(`(min-width: ${r.breakpoints.small})`),{replays:i,isFetching:n,fetchError:l}=(0,d.Z)({eventView:t,location:a,organization:s});return(0,k.tZ)(T,{withPadding:!0,children:(0,k.tZ)(f.Z,{fetchError:l,isFetching:n,replays:i,sort:void 0,visibleColumns:[Z.M.session,...o?[Z.M.startedAt]:[],Z.M.duration,Z.M.countErrors,Z.M.activity]})})};L.displayName="GroupReplaysTable";const T=(0,l.Z)(o.T3,{target:"ebxunqn0"})("box-shadow:0px 0px 1px ",(e=>e.theme.gray200),";background-color:",(e=>e.theme.background),";"),C=j;function M(){return(0,k.tZ)(o.T3,{withPadding:!0,children:(0,k.tZ)(r.bZ,{type:"warning",children:(0,i.t)("You don't have access to this feature")})})}M.displayName="renderNoAccess";const q=e=>{const t=(0,n.Z)();return(0,k.tZ)(a.Z,{features:["session-replay-ui"],organization:t,renderDisabled:M,children:(0,k.tZ)(C,{...e})})};q.displayName="GroupReplaysContainer";const _=q}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupReplays_index_tsx.88fd364cd24e0aec73910061e7eddc6c.js.map