(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionOverview_index_tsx-node_modules_lodash_as-0005c1"],{"./app/actionCreators/events.tsx":(e,t,a)=>{"use strict";a.d(t,{JE:()=>p,eV:()=>c,lI:()=>l});var r=a("../node_modules/lodash/pick.js"),s=a.n(r),n=a("./app/components/charts/utils.tsx"),i=a("./app/utils/getPeriod.tsx"),o=a("./app/utils/performance/constants.tsx");const l=(e,t)=>{let{organization:a,project:r,environment:s,team:o,period:l,start:c,end:p,interval:u,comparisonDelta:d,includePrevious:m,query:h,yAxis:g,field:v,topEvents:f,orderby:x,partial:y,withoutZerofill:Z,referrer:w,queryBatching:S,generatePathname:T,queryExtras:b,excludeOther:E,includeAllArgs:j}=t;const _=T?.(a)??`/organizations/${a.slug}/events-stats/`,P=(0,n.Sw)(m,l),q={includeAllArgs:j,query:{...Object.fromEntries(Object.entries({interval:u,comparisonDelta:d,project:r,environment:s,team:o,query:h,yAxis:g,field:v,topEvents:f,orderby:x,partial:y?"1":void 0,withoutZerofill:Z?"1":void 0,referrer:w||"api.organization-event-stats",excludeOther:E?"1":void 0}).filter((e=>{let[,t]=e;return void 0!==t}))),...(0,i.X)({period:l,start:c,end:p},{shouldDoublePeriod:P}),...b}};return S?.batchRequest?S.batchRequest(e,_,q):e.requestPromise(_,q)};function c(e,t,a){const r={...s()(a,Object.values(o.s)),query:a.query};return e.requestPromise(`/organizations/${t}/events-facets/`,{query:r})}function p(e,t,a){const r={...s()(a,Object.values(o.s)),query:a.query};return e.requestPromise(`/organizations/${t}/events-meta/`,{query:r}).then((e=>e.count))}},"./app/components/charts/eventsRequest.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>w});var r=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(a("../node_modules/core-js/modules/es.array.includes.js"),a("../node_modules/react/index.js")),n=a("../node_modules/lodash/isEqual.js"),i=a.n(n),o=a("../node_modules/lodash/omitBy.js"),l=a.n(o),c=a("./app/actionCreators/events.tsx"),p=a("./app/actionCreators/indicator.tsx"),u=a("./app/components/charts/loadingPanel.tsx"),d=a("./app/components/charts/utils.tsx"),m=a("./app/locale.tsx"),h=a("./app/utils.tsx"),g=a("./app/utils/discover/fieldRenderers.tsx"),v=a("./app/utils/discover/fields.tsx"),f=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x=["api","children","organization","loading","queryBatching","generatePathname"],y=e=>l()(e,((e,t)=>x.includes(t)));class Z extends s.PureComponent{constructor(){var e;super(...arguments),e=this,(0,r.Z)(this,"state",{reloading:!!this.props.loading,errored:!1,timeseriesData:null,fetchedWithPrevious:!1}),(0,r.Z)(this,"unmounting",!1),(0,r.Z)(this,"fetchData",(async()=>{const{api:e,confirmedQuery:t,onError:a,expired:r,name:s,hideError:n,...i}=this.props;let o,l=null;if(!1!==t){if(this.setState((e=>({reloading:null!==e.timeseriesData,errored:!1,errorMessage:void 0}))),r)o=(0,m.t)("%s has an invalid date range. Please try a more recent date range.",s),(0,p.Iw)(o,{append:!0}),this.setState({errored:!0,errorMessage:o});else try{e.clear(),l=await(0,c.lI)(e,i)}catch(e){o=e&&e.responseJSON&&e.responseJSON.detail?e.responseJSON.detail:(0,m.t)("Error loading chart data"),n||(0,p.Iw)(o),a&&a(o),this.setState({errored:!0,errorMessage:o})}this.unmounting||(this.setState({reloading:!1,timeseriesData:l,fetchedWithPrevious:i.includePrevious}),i.dataLoadedCallback&&i.dataLoadedCallback(l))}})),(0,r.Z)(this,"getData",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{fetchedWithPrevious:a}=e.state,{period:r,includePrevious:s}=e.props,n=a||(0,d.Sw)(s,r),i=Math.floor(t.length/2);return{current:n?t.slice(i):t,previous:n?t.slice(0,i):null}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){i()(y(e),y(this.props))||this.fetchData()}componentWillUnmount(){this.unmounting=!0}calculateTotalsPerTimestamp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>1e3*e;return e.map(((e,a)=>{let[r,s]=e;return{name:t(r,s,a),value:s.reduce(((e,t)=>{let{count:a}=t;return e+a}),0)}}))}transformPreviousPeriodData(e,t,a){return t?{seriesName:a??"Previous",data:this.calculateTotalsPerTimestamp(t,((t,a,r)=>1e3*e[r][0])),stack:"previous"}:null}transformAggregatedTimeseries(e){return{seriesName:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",data:this.calculateTotalsPerTimestamp(e)}}transformTimeseriesData(e,t,a){let r=1;if(a){const e=t?.units?.[(0,v.LY)(a)];r=(e&&(g.a_[e]??g.en[e]))??1}return[{seriesName:a||"Current",data:e.map((e=>{let[t,a]=e;return{name:1e3*t,value:a.reduce(((e,t)=>{let{count:a}=t;return e+a}),0)*r}}))}]}transformComparisonTimeseriesData(e){return[{seriesName:"comparisonCount()",data:e.map((e=>{let[t,a]=e;return{name:1e3*t,value:a.reduce(((e,t)=>{let{comparisonCount:a}=t;return e+(a??0)}),0)}}))}]}processData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;const{data:r,isMetricsData:s,totals:n,meta:i}=e,{includeTransformedData:o,includeTimeAggregation:l,timeAggregationSeriesName:c,currentSeriesNames:p,previousSeriesNames:u,comparisonDelta:m}=this.props,{current:h,previous:g}=this.getData(r);return{data:o?this.transformTimeseriesData(h,i,a??p?.[t]):[],comparisonData:o&&m?this.transformComparisonTimeseriesData(h):[],allData:r,originalData:h,totals:n,isMetricsData:s,originalPreviousData:g,previousData:o?this.transformPreviousPeriodData(h,g,(a?(0,d.TE)(a):void 0)??u?.[t]):null,timeAggregatedData:l?this.transformAggregatedTimeseries(h,c||""):{},timeframe:e.start&&e.end?g?{start:500*(e.start+e.end),end:1e3*e.end}:{start:1e3*e.start,end:1e3*e.end}:void 0}}render(){const{children:e,showLoading:t,...a}=this.props,{topEvents:r,yAxis:s}=this.props,{timeseriesData:n,reloading:i,errored:o,errorMessage:l}=this.state,c=this.props.loading||null===n;if(t&&c)return(0,f.tZ)(u.Z,{"data-test-id":"events-request-loading"});if((0,d.Xe)(n,(0,h.ri)(r))){let t;const r={},s=Object.keys(n).map(((e,a)=>{const s=n[e],i=this.processData(s,a,(0,v.bQ)(e));return t||(t=i.timeframe),i.isMetricsData&&(r[e]={isMetricsData:i.isMetricsData}),[s.order||0,i.data[0],i.previousData,{isMetricsData:i.isMetricsData}]})).sort(((e,t)=>e[0]-t[0])),p={};Object.keys(n).forEach((e=>{const t=n[e].meta?.fields[(0,v.LY)(e)];t&&(p[e]=t)}));const u=s.map((e=>e[1])),d=s.some((e=>null===e[2]))?void 0:s.map((e=>e[2]));return e({loading:c,reloading:i,errored:o,errorMessage:l,results:u,timeframe:t,previousTimeseriesData:d,seriesAdditionalInfo:r,timeseriesResultsTypes:p,...a})}if(n){const t=s&&("string"==typeof s?s:s[0]),r=t&&n.meta?.fields[(0,v.LY)(t)],p=r?{[t]:r}:void 0,{data:u,comparisonData:d,allData:m,originalData:h,totals:g,originalPreviousData:f,previousData:x,timeAggregatedData:y,timeframe:Z,isMetricsData:w}=this.processData(n);return e({loading:c,reloading:i,errored:o,errorMessage:l,seriesAdditionalInfo:{[this.props.currentSeriesNames?.[0]??"current"]:{isMetricsData:w}},timeseriesData:u,comparisonTimeseriesData:d,allTimeseriesData:m,originalTimeseriesData:h,timeseriesTotals:g,originalPreviousTimeseriesData:f,previousTimeseriesData:x?[x]:x,timeAggregatedData:y,timeframe:Z,timeseriesResultsTypes:p,...a})}return e({loading:c,reloading:i,errored:o,errorMessage:l,...a})}}Z.displayName="EventsRequest",(0,r.Z)(Z,"defaultProps",{period:void 0,start:null,end:null,interval:"1d",comparisonDelta:void 0,limit:15,query:"",includePrevious:!0,includeTransformedData:!0});const w=Z},"./app/utils/getPeriod.tsx":(e,t,a)=>{"use strict";a.d(t,{X:()=>o}),a("../node_modules/core-js/modules/es.error.cause.js");var r=a("../node_modules/moment/moment.js"),s=a.n(r),n=a("./app/constants/index.tsx"),i=a("./app/utils/dates.tsx");function o(e){let{period:t,start:a,end:r}=e,{shouldDoublePeriod:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t||a||r||(t=n.GY),t){if(!o)return{statsPeriod:t};const[,e,a]=t.match(/([0-9]+)([mhdw])/);return{statsPeriod:`${2*parseInt(e,10)}${a}`}}if(!a||!r)throw new Error("start and end required");const l=(0,i.v5)(a),c=(0,i.v5)(r);if(o){const e=s()(r).diff(s()(a)),t=s()(a).subtract(e);return{start:(0,i.v5)(t),end:c}}return{start:l,end:c}}},"./app/utils/performance/anomalies/anomaliesQuery.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>c}),a("../node_modules/core-js/modules/es.array.includes.js");var r=a("./app/utils/discover/genericDiscoverQuery.tsx"),s=a("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx"),n=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){return e.data.forEach((e=>e[0]=1e3*e[0])),e}function o(e){const t={...e};return e.y&&e.yhat_lower&&e.yhat_upper&&e.anomalies?(t.y=i(e.y),t.yhat_upper=i(e.yhat_upper),t.yhat_lower=i(e.yhat_lower),t.anomalies=((a=e.anomalies).forEach((e=>{e.start=1e3*e.start,e.end=1e3*e.end})),a),t):t;var a}function l(e){return e.organization.features.includes(s.uT)?(0,n.tZ)(r.ZP,{route:"transaction-anomaly-detection",...e,children:t=>{let{tableData:a,...r}=t;return e.children({data:a&&a.y?o(a):null,...r})}}):(0,n.tZ)("div",{children:e.children({data:null,isLoading:!1,error:null,pageLinks:null})})}l.displayName="AnomaliesSeriesQuery";const c=l},"./app/utils/performance/suspectSpans/suspectSpansQuery.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var r=a("../node_modules/lodash/omit.js"),s=a.n(r),n=a("./app/utils.tsx"),i=a("./app/utils/discover/genericDiscoverQuery.tsx"),o=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){const{perSuspect:t,spanOps:a,spanGroups:r,minExclusiveTime:s,maxExclusiveTime:i}=e,o={perSuspect:t,spanOp:a,spanGroup:r,min_exclusive_time:s,max_exclusive_time:i};(0,n.ri)(o.perSuspect)||delete o.perSuspect,(0,n.ri)(o.spanOp)||delete o.spanOp,(0,n.ri)(o.spanGroup)||delete o.spanGroup;const l=e.eventView.getEventsAPIPayload(e.location);return{...o,...l}}function c(e){return(0,o.tZ)(i.ZP,{route:"events-spans-performance",getRequestPayload:l,...s()(e,"children"),children:t=>{let{tableData:a,...r}=t;return e.children({suspectSpans:a,...r})}})}c.displayName="SuspectSpansQuery";const p=c},"./app/views/discover/tags.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var r=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=a("../node_modules/react/index.js"),i=a("../node_modules/@sentry/core/esm/exports.js"),o=a("./app/actionCreators/events.tsx"),l=a("./app/components/charts/errorPanel.tsx"),c=a("./app/components/charts/styles.tsx"),p=a("./app/components/emptyStateWarning.tsx"),u=a("./app/components/group/tagFacets/tagFacetsDistributionMeter.tsx"),d=a("./app/components/placeholder.tsx"),m=a("./app/icons/index.tsx"),h=a("./app/locale.tsx"),g=a("./app/styles/space.tsx"),v=a("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),f=a("./app/utils/discover/eventView.tsx"),x=a("./app/utils/withApi.tsx"),y=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Z extends n.Component{constructor(){var e;super(...arguments),e=this,(0,r.Z)(this,"state",{loading:!0,tags:[],totalValues:null,error:""}),(0,r.Z)(this,"shouldRefetchData",(e=>{const t=this.props.eventView.getFacetsAPIPayload(this.props.location),a=e.eventView.getFacetsAPIPayload(e.location);return!(0,f.ze)(t,a)})),(0,r.Z)(this,"fetchData",(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{api:a,organization:r,eventView:s,location:n,confirmedQuery:l}=e.props;if(e.setState({loading:!0,error:"",tags:[]}),t||!1!==l)try{const t=await(0,o.eV)(a,r.slug,s.getFacetsAPIPayload(n));e.setState({loading:!1,tags:t})}catch(t){i.Tb(t),e.setState({loading:!1,error:t})}})),(0,r.Z)(this,"handleTagClick",(e=>{const{organization:t}=this.props;(0,v.Z)("discover_v2.facet_map.clicked",{organization:t,tag:e})})),(0,r.Z)(this,"renderBody",(()=>{const{loading:e,error:t,tags:a}=this.state;return e?this.renderPlaceholders():t?(0,y.tZ)(l.Z,{height:"132px",children:(0,y.tZ)(m.FC,{color:"gray300",size:"lg"})}):a.length>0?a.map(((e,t)=>this.renderTag(e,t))):(0,y.tZ)(w,{small:!0,children:(0,h.t)("No tags found")})}))}componentDidMount(){this.fetchData(!0)}componentDidUpdate(e){(this.shouldRefetchData(e)||e.confirmedQuery!==this.props.confirmedQuery)&&this.fetchData()}renderTag(e,t){const{generateUrl:a,totalValues:r}=this.props,s=e.topValues.map((t=>(t.url=a(e.key,t.value),t))),n=s.length>0?Math.max(Number(r),s[0].count):r;return(0,y.tZ)(u.Z,{title:e.key,segments:s,totalValues:Number(n),expandByDefault:0===t},e.key)}renderPlaceholders(){return(0,y.BX)(n.Fragment,{children:[(0,y.tZ)(T,{},"title-1"),(0,y.tZ)(S,{},"bar-1"),(0,y.tZ)(T,{},"title-2"),(0,y.tZ)(S,{},"bar-2"),(0,y.tZ)(T,{},"title-3"),(0,y.tZ)(S,{},"bar-3")]})}render(){return(0,y.BX)(n.Fragment,{children:[(0,y.tZ)(c.OT,{children:(0,h.t)("Tag Summary")}),this.renderBody()]})}}Z.displayName="Tags";const w=(0,s.Z)(p.Z,{target:"edev7d52"})({name:"rtpdsm",styles:"height:132px;padding:54px 15%"}),S=(0,s.Z)(d.Z,{target:"edev7d51"})("border-radius:",(e=>e.theme.borderRadius),";height:16px;margin-bottom:",(0,g.Z)(1.5),";"),T=(0,s.Z)(d.Z,{target:"edev7d50"})("width:100px;height:12px;margin-bottom:",(0,g.Z)(.5),";"),b=(0,x.Z)(Z)},"./app/views/performance/transactionSummary/transactionOverview/index.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>bt}),a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/core-js/modules/es.array.includes.js");var r=a("../node_modules/react/index.js"),s=a("../node_modules/react-router/es/index.js"),n=a("./app/actionCreators/tags.tsx"),i=a("./app/locale.tsx"),o=a("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),l=a("./app/utils/discover/discoverQuery.tsx"),c=a("./app/utils/discover/eventView.tsx"),p=a("./app/utils/discover/fields.tsx"),u=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),d=a("./app/utils/performance/histogram/index.tsx"),m=a("./app/utils/queryString.tsx"),h=a("./app/utils/tokenizeSearch.tsx"),g=a("./app/utils/useApi.tsx"),v=a("./app/utils/withOrganization.tsx"),f=a("./app/utils/withPageFilters.tsx"),x=a("./app/utils/withProjects.tsx"),y=a("./app/views/performance/utils.tsx"),Z=a("./app/views/performance/transactionSummary/filter.tsx"),w=a("./app/views/performance/transactionSummary/pageLayout.tsx"),S=a("./app/views/performance/transactionSummary/tabs.tsx"),T=a("./app/views/performance/transactionSummary/transactionVitals/constants.tsx"),b=a("./app/views/performance/transactionSummary/transactionOverview/latencyChart/utils.tsx"),E=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),j=a("../node_modules/lodash/omit.js"),_=a.n(j),P=a("./app/components/datePageFilter.tsx"),q=a("./app/components/discover/transactionsList.tsx"),k=a("./app/components/environmentPageFilter.tsx"),D=a("./app/components/events/searchBar.tsx"),z=a("./app/components/layouts/thirds.tsx"),C=a("./app/components/organizations/pageFilterBar.tsx"),N=a("./app/components/organizations/pageFilters/parse.tsx"),V=a("./app/constants/index.tsx"),L=a("./app/styles/space.tsx"),I=a("./app/utils.tsx"),O=a("./app/utils/analytics.tsx"),F=a("./app/utils/replays/projectSupportsReplay.tsx"),A=a("./app/utils/useRoutes.tsx"),B=a("./app/views/discover/table/cellAction.tsx"),M=a("./app/views/discover/tags.tsx"),$=a("./app/views/performance/transactionSummary/utils.tsx"),X=a("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),R=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),U=a("../node_modules/lodash/pick.js"),W=a.n(U),Q=a("./app/components/button.tsx"),K=a("./app/components/charts/styles.tsx"),G=a("./app/components/emptyStateWarning.tsx"),H=a("./app/components/issues/groupList.tsx"),Y=a("./app/components/panels/index.tsx"),J=a("./app/constants/pageFilters.tsx"),ee=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class te extends r.Component{constructor(){super(...arguments),(0,R.Z)(this,"handleOpenClick",(()=>{const{organization:e}=this.props;(0,O.ec)({eventKey:"performance_views.summary.open_issues",eventName:"Performance Views: Open issues from transaction summary",organization_id:parseInt(e.id,10)})})),(0,R.Z)(this,"renderEmptyMessage",(()=>{const{statsPeriod:e}=this.props,t=e&&V.wh[e],a=t?t.toLowerCase():(0,i.t)("given timeframe");return(0,ee.tZ)(Y.s_,{children:(0,ee.tZ)(Y.N,{children:(0,ee.tZ)(G.Z,{children:(0,ee.tZ)("p",{children:(0,i._N)("No new issues for this transaction for the [timePeriod].",{timePeriod:a})})})})})}))}getIssuesEndpoint(){const{transaction:e,organization:t,start:a,end:r,statsPeriod:s,location:n}=this.props,i={start:a,end:r,statsPeriod:s,limit:5,sort:"new",...W()(n.query,[...Object.values(J.nF),"cursor"])},o=new h.MY((0,m.ro)(n.query.query,""));return(0,y.m_)(o),o.addFreeText("is:unresolved").setFilterValues("transaction",[e]),{path:`/organizations/${t.slug}/issues/`,queryParams:{...i,query:o.formatString()}}}render(){const{organization:e}=this.props,{path:t,queryParams:a}=this.getIssuesEndpoint(),s={pathname:`/organizations/${e.slug}/issues/`,query:{referrer:"performance-related-issues",...a}};return(0,ee.BX)(r.Fragment,{children:[(0,ee.BX)(ae,{children:[(0,ee.tZ)(K.OT,{children:(0,i.t)("Related Issues")}),(0,ee.tZ)(Q.zx,{"data-test-id":"issues-open",size:"xs",to:s,onClick:this.handleOpenClick,children:(0,i.t)("Open in Issues")})]}),(0,ee.tZ)(re,{children:(0,ee.tZ)(H.Z,{orgId:e.slug,endpointPath:t,queryParams:a,query:"",canSelectGroups:!1,renderEmptyMessage:this.renderEmptyMessage,withChart:!1,withPagination:!1,source:"performance-related-issues"})})]})}}te.displayName="RelatedIssues";const ae=(0,E.Z)("div",{target:"e1m3rcna1"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,L.Z)(1),";"),re=(0,E.Z)("div",{target:"e1m3rcna0"})("margin-bottom:",(0,L.Z)(4),";",Y.s_,"{margin-bottom:-",(0,L.Z)(1),";}"),se=te;var ne=a("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),ie=a("../node_modules/color/index.js"),oe=a.n(ie),le=a("./app/components/charts/chartZoom.tsx"),ce=a("./app/components/charts/components/markPoint.tsx"),pe=a("./app/components/charts/errorPanel.tsx"),ue=a("./app/components/charts/eventsRequest.tsx"),de=a("./app/components/charts/lineChart.tsx"),me=a("./app/components/charts/transitionChart.tsx"),he=a("./app/components/charts/transparentLoadingMask.tsx"),ge=a("./app/components/charts/utils.tsx"),ve=a("./app/components/placeholder.tsx"),fe=a("./app/components/questionTooltip.tsx"),xe=a("./app/icons/index.tsx"),ye=a("./app/utils/dates.tsx"),Ze=a("./app/utils/discover/charts.tsx"),we=a("./app/utils/formatters.tsx"),Se=a("./app/utils/getDynamicText.tsx"),Te=a("./app/utils/performance/anomalies/anomaliesQuery.tsx"),be=a("./app/utils/useLocation.tsx"),Ee=a("./app/utils/useRouter.tsx"),je=a("./app/utils/withDomainRequired.tsx"),_e=a("./app/views/performance/data.tsx"),Pe=a("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx");function qe(e){let{organization:t,isLoading:a,error:r,totals:n,start:o,end:l,utc:c,statsPeriod:p,chartData:u,eventView:d,transactionName:h}=e;const g=(0,be.T)(),v=(0,Ee.Z)(),f=(0,ne.u)();return(0,ee.BX)(ze,{children:[(0,ee.BX)(Ne,{top:"0px",children:[(0,ee.BX)(Ce,{children:[(0,i.t)("Apdex"),(0,ee.tZ)(fe.Z,{position:"top",title:(0,_e.$r)(t,_e.V$.APDEX),size:"sm"})]}),(0,ee.tZ)(De,{"data-test-id":"apdex-summary-value",isLoading:a,error:r,value:n?(0,we.$1)(n["apdex()"],4):null})]}),(0,ee.BX)(Ne,{top:"160px",children:[(0,ee.BX)(Ce,{children:[(0,i.t)("Failure Rate"),(0,ee.tZ)(fe.Z,{position:"top",title:(0,_e.$r)(t,_e.V$.FAILURE_RATE),size:"sm"})]}),(0,ee.tZ)(De,{"data-test-id":"failure-rate-summary-value",isLoading:a,error:r,value:n?(0,we.rl)(n["failure_rate()"]):null})]}),(0,ee.BX)(Ne,{top:"320px",children:[(0,ee.BX)(Ce,{children:[(0,i.t)("TPM"),(0,ee.tZ)(fe.Z,{position:"top",title:(0,_e.$r)(t,_e.V$.TPM),size:"sm"})]}),(0,ee.tZ)(De,{"data-test-id":"tpm-summary-value",isLoading:a,error:r,value:n?(0,i._N)("[tpm] tpm",{tpm:(0,we.$1)(n["tpm()"],4)}):null})]}),(0,ee.tZ)(Te.Z,{location:g,organization:t,eventView:d,children:e=>(0,ee.tZ)(le.Z,{router:v,period:p,start:o,end:l,utc:c,xAxisIndex:[0,1,2],children:a=>{const{errored:r,loading:n,reloading:i,chartOptions:o,series:l}=u;if(r)return(0,ee.tZ)(pe.Z,{height:"580px",children:(0,ee.tZ)(xe.FC,{color:"gray300",size:"lg"})});if(t.features.includes(Pe.uT)){const a=l.find((e=>e.seriesName.includes("epm")||e.seriesName.includes("tpm")));a&&e.data&&(a.markPoint=(0,ce.Z)({data:e.data.anomalies.map((e=>({name:e.id,yAxis:a.data.find((t=>{let{name:a}=t;return a>(e.end+e.start)/2}))?.value,xAxis:e.start,itemStyle:{borderColor:oe()((0,Pe.ES)(e.confidence,f)).string(),color:oe()((0,Pe.ES)(e.confidence,f)).alpha(.2).rgb().string()},onClick:()=>{const e=(0,Pe.az)({orgSlug:t.slug,query:g.query,projectID:(0,m.ro)(g.query.project),transaction:h});s.browserHistory.push((0,je.D)(e))}}))),symbol:"circle",symbolSize:16}))}return(0,ee.BX)(me.Z,{loading:n,reloading:i,height:"580px",children:[(0,ee.tZ)(he.Z,{visible:i}),(0,Se.Z)({value:(0,ee.tZ)(de.w,{...a,...o,series:l}),fixed:(0,ee.tZ)(ve.Z,{height:"480px",testId:"skeleton-ui"})})]})}})})]})}function ke(e){let{eventView:t,organization:a,isLoading:r,error:s,totals:n,transactionName:i}=e;const o=(0,be.T)(),l=(0,Ee.Z)(),c=(0,g.Z)(),u=(0,ne.u)(),d=u.charts.getColorPalette(3),m=t.statsPeriod,h=t.start?(0,ye.hC)(t.start):void 0,v=t.end?(0,ye.hC)(t.end):void 0,f=t.project,x=t.environment,y=t.query,Z="true"===(0,N.fK)(o.query).utc,w={scale:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},S={height:480,grid:[{top:"60px",left:"10px",right:"10px",height:"100px"},{top:"220px",left:"10px",right:"10px",height:"100px"},{top:"380px",left:"10px",right:"10px",height:"120px"}],axisPointer:{link:[{xAxisIndex:[0,1,2]}]},xAxes:Array.from(new Array(3)).map(((e,t)=>({gridIndex:t,type:"time",show:!1}))),yAxes:[{gridIndex:0,interval:.2,axisLabel:{formatter:e=>`${(0,we.$1)(e,1)}`,color:u.chartLabel},...w},{gridIndex:1,splitNumber:4,interval:.5,max:1,axisLabel:{formatter:e=>(0,we.rl)(e,0),color:u.chartLabel},...w},{gridIndex:2,splitNumber:4,axisLabel:{formatter:we.Du,color:u.chartLabel},...w}],utc:Z,isGroupedByDate:!0,showTimeInTooltip:!0,colors:[d[0],d[1],d[2]],tooltip:{trigger:"axis",truncate:80,valueFormatter:(e,t)=>(0,Ze.CX)(e,(0,p.Px)(t)),nameFormatter:e=>"epm()"===e?"tpm()":e}},T={api:c,start:h,end:v,period:m,project:f,environment:x,query:y},b={organization:a,router:l,error:s,isLoading:r,start:h,end:v,utc:Z,totals:n},E={start:h||null,end:v||null,period:m};return(0,ee.tZ)(ue.Z,{...T,organization:a,interval:(0,ge.ZS)(E),showLoading:!1,includePrevious:!1,yAxis:["apdex()","failure_rate()","epm()"],partial:!0,referrer:"api.performance.transaction-summary.sidebar-chart",children:e=>{let{results:a,errored:r,loading:s,reloading:n}=e;const o=a?a.map(((e,t)=>({...e,yAxisIndex:t,xAxisIndex:t}))):[];return(0,ee.tZ)(qe,{...b,transactionName:i,eventView:t,chartData:{series:o,errored:r,loading:s,reloading:n,chartOptions:S}})}})}function De(e){let{error:t,isLoading:a,value:r,...s}=e;return t?(0,ee.tZ)("div",{...s,children:"—"}):a?(0,ee.tZ)(ve.Z,{height:"24px",...s}):(0,ee.tZ)(Ve,{...s,children:r})}qe.displayName="SidebarCharts",ke.displayName="SidebarChartsContainer",De.displayName="ChartSummaryValue";const ze=(0,E.Z)("div",{target:"eoi1m7u3"})({name:"bjn8wh",styles:"position:relative"}),Ce=(0,E.Z)(K.OT,{target:"eoi1m7u2"})({name:"ti75j2",styles:"margin:0"}),Ne=(0,E.Z)("div",{target:"eoi1m7u1"})("position:absolute;top:",(e=>e.top),";z-index:1;"),Ve=(0,E.Z)("div",{target:"eoi1m7u0"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";"),Le=ke;var Ie=a("./app/components/tooltip.tsx");function Oe(e){let{data:t,maxItems:a}=e;const s=t.reduce(((e,t)=>t.value+e),0);return(0,ee.tZ)(Ae,{children:(a?t.slice(0,a):t).map(((e,t)=>{const a=(0,ee.BX)(r.Fragment,{children:[(0,ee.tZ)(Xe,{style:{width:`${(e.value/s*100).toFixed(2)}%`},active:e.active}),(0,ee.tZ)($e,{children:e.label})]});return(0,ee.BX)(r.Fragment,{children:[(0,ee.tZ)(Be,{children:(0,we.rl)(e.value/s,0)}),(0,ee.tZ)(Me,{"data-test-id":`status-${e.label}`,cursor:e.onClick?"pointer":"default",onClick:e.onClick,children:e.tooltip?(0,ee.tZ)(Ie.u,{title:e.tooltip,children:a}):a})]},`${t}:${e.label}`)}))})}Oe.displayName="BreakdownBars";const Fe=Oe,Ae=(0,E.Z)("div",{target:"e1q1rjac4"})("display:grid;grid-template-columns:min-content auto;column-gap:",(0,L.Z)(1),";row-gap:",(0,L.Z)(1),";"),Be=(0,E.Z)("div",{target:"e1q1rjac3"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";text-align:right;"),Me=(0,E.Z)("div",{target:"e1q1rjac2"})("padding-left:",(0,L.Z)(1),";padding-right:",(0,L.Z)(1),";position:relative;cursor:",(e=>e.cursor),";display:flex;align-items:center;"),$e=(0,E.Z)("span",{target:"e1q1rjac1"})("position:relative;color:",(e=>e.theme.textColor),";z-index:2;font-size:",(e=>e.theme.fontSizeSmall),";"),Xe=(0,E.Z)("div",{target:"e1q1rjac0"})("border-radius:2px;background-color:",(e=>e.active?e.theme.purple200:e.theme.border),";position:absolute;top:0;left:0;z-index:1;height:100%;width:0%;");function Re(e){let{eventView:t,location:a,organization:n}=e;const c=t.withColumns([{kind:"function",function:["count","","",void 0]},{kind:"field",field:"transaction.status"}]).withSorts([{kind:"desc",field:"count"}]);return(0,ee.BX)(r.Fragment,{children:[(0,ee.BX)(K.OT,{children:[(0,i.t)("Status Breakdown"),(0,ee.tZ)(fe.Z,{position:"top",title:(0,_e.$r)(n,_e.V$.STATUS_BREAKDOWN),size:"sm"})]}),(0,ee.tZ)(l.Z,{eventView:c,location:a,orgSlug:n.slug,referrer:"api.performance.status-breakdown",children:e=>{let{isLoading:r,error:l,tableData:c}=e;if(r)return(0,ee.tZ)(ve.Z,{height:"124px"});if(l)return(0,ee.tZ)(pe.Z,{height:"124px",children:(0,ee.tZ)(xe.FC,{color:"gray300",size:"lg"})});if(!c||0===c.data.length)return(0,ee.tZ)(Ue,{small:!0,children:(0,i.t)("No statuses found")});const p=c.data.map((e=>({label:String(e["transaction.status"]),value:parseInt(String(e["count()"]),10),onClick:()=>{const r=new h.MY(t.query);r.removeFilter("!transaction.status").setFilterValues("transaction.status",[e["transaction.status"]]),s.browserHistory.push({pathname:a.pathname,query:{...a.query,cursor:void 0,query:r.formatString()}}),(0,o.Z)("performance_views.transaction_summary.status_breakdown_click",{organization:n,status:e["transaction.status"]})}})));return(0,ee.tZ)(Fe,{data:p})}})]})}Re.displayName="StatusBreakdown";const Ue=(0,E.Z)(G.Z,{target:"e8c3tq30"})({name:"wwhhbg",styles:"height:124px;padding:50px 15%"}),We=Re;var Qe=a("./app/components/pagination.tsx"),Ke=a("./app/utils/performance/suspectSpans/suspectSpansQuery.tsx"),Ge=a("./app/utils/useProjects.tsx"),He=a("./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx"),Ye=a("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),Je=a("./app/views/performance/transactionSummary/transactionSpans/utils.tsx");function et(e){const{location:t,organization:a,eventView:s,totals:n,projectId:i,transactionName:o}=e,l=(0,Je.TK)(t,"spanSort"),c=(0,m.ro)(t.query?.spansCursor),p=s.withColumns([...Object.values(Ye.g),...Object.values(Ye.p)].map((e=>({kind:"field",field:e})))).withSorts([{kind:"desc",field:l.field}]),u=Je.uQ[l.field];p.fields=u?u.map((e=>({field:e}))):[];const{projects:d}=(0,Ge.Z)();return(0,ee.tZ)(Ke.Z,{location:t,orgSlug:a.slug,eventView:p,limit:4,perSuspect:0,cursor:c,children:e=>{let{suspectSpans:s,isLoading:l,pageLinks:c}=e;return(0,ee.BX)(r.Fragment,{children:[(0,ee.tZ)(tt,{location:t,organization:a,projectId:i,transactionName:o,pageLinks:c}),(0,ee.tZ)(He.Z,{location:t,organization:a,transactionName:o,project:d.find((e=>e.id===i)),isLoading:l,suspectSpans:s??[],totals:n,sort:Ye.g.SUM_EXCLUSIVE_TIME})]})}})}function tt(e){const{location:t,organization:a,projectId:r,transactionName:n,pageLinks:o}=e,l=(0,Je.hN)({orgSlug:a.slug,transaction:n,projectID:r,query:t.query});return(0,ee.BX)(at,{children:[(0,ee.tZ)(K.OT,{children:(0,i.t)("Suspect Spans")}),(0,ee.tZ)(Q.zx,{to:l,size:"xs","data-test-id":"suspect-spans-open-tab",children:(0,i.t)("View All Spans")}),(0,ee.tZ)(rt,{pageLinks:o,onCursor:(e,t,a)=>{s.browserHistory.push({pathname:t,query:{...a,spansCursor:e}})},size:"xs"})]})}et.displayName="SuspectSpans",tt.displayName="SuspectSpansHeader";const at=(0,E.Z)("div",{target:"e76j9o51"})("display:grid;grid-template-columns:1fr auto auto;margin-bottom:",(0,L.Z)(1),";align-items:center;"),rt=(0,E.Z)(Qe.Z,{target:"e76j9o50"})("margin:0 0 0 ",(0,L.Z)(1),";");var st=a("./app/views/performance/transactionSummary/transactionOverview/tagExplorer.tsx"),nt=a("./app/components/assistant/guideAnchor.tsx"),it=a("./app/components/links/link.tsx"),ot=a("./app/components/userMisery.tsx"),lt=a("./app/utils/fields/index.ts"),ct=a("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),pt=a("./app/views/performance/vitalDetail/vitalInfo.tsx");function ut(e){let{isLoading:t,hasWebVitals:a,error:s,totals:n,location:o,organization:l,transactionName:c,eventView:p}=e,u=null!==s?(0,ee.tZ)("div",{children:"—"}):(0,ee.tZ)(ve.Z,{height:"34px"});if(!t&&null===s&&n){const e=n.project_threshold_config[1],t=n["count_miserable_user()"],a=n["user_misery()"],r=n["count_unique_user()"];u=(0,ee.tZ)(ot.Z,{bars:40,barHeight:30,userMisery:a,miseryLimit:e,totalUsers:r,miserableUsers:t})}const d=l.slug,h=(0,ct.Pl)({orgSlug:d,transaction:c,projectID:(0,m.ro)(o.query.project),query:o.query});return(0,ee.BX)(r.Fragment,{children:[a&&(0,ee.BX)(r.Fragment,{children:[(0,ee.BX)(dt,{children:[(0,ee.BX)(K.OT,{children:[(0,i.t)("Web Vitals"),(0,ee.tZ)(fe.Z,{position:"top",title:(0,i.t)('Web Vitals with p75 better than the "poor" threshold, as defined by Google Web Vitals.'),size:"sm"})]}),(0,ee.tZ)(it.Z,{to:h,children:(0,ee.tZ)(xe.V$,{})})]}),(0,ee.tZ)(pt.Z,{location:o,vital:[lt.Zl.FCP,lt.Zl.LCP,lt.Zl.FID,lt.Zl.CLS],orgSlug:d,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,project:p.project,hideVitalThresholds:!0,hideDurationDetail:!0}),(0,ee.tZ)($.uI,{})]}),(0,ee.tZ)(nt.Z,{target:"user_misery",position:"left",children:(0,ee.BX)(K.OT,{children:[(0,i.t)("User Misery"),(0,ee.tZ)(fe.Z,{position:"top",title:(0,_e.$r)(l,_e.V$.USER_MISERY),size:"sm"})]})}),u,(0,ee.tZ)($.uI,{})]})}ut.displayName="UserStats";const dt=(0,E.Z)("div",{target:"e1rzcoka0"})({name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}),mt=ut;function ht(e){let{eventView:t,location:a,totalValues:n,spanOperationBreakdownFilter:o,organization:l,projects:c,isLoading:u,error:d,projectId:h,transactionName:g,onChangeFilter:v}=e;const f=(0,A.V)(),x=l.features.includes("performance-chart-interpolation"),w=(0,m.ro)(a.query.query,""),S=null===n?null:n["count()"],b=(0,y.Ik)(t,c)||null!==n&&T.PE.some((e=>e.vitals.some((e=>{const t=`percentile(${e},${T.GW})`;return Number.isFinite(n[t])})))),E=(0,y.iL)(t,c),j=[(0,i.t)("event id"),(0,i.t)("user"),(0,i.t)("total duration"),(0,i.t)("trace id"),(0,i.t)("timestamp")],D=c.find((e=>e.id===h));l.features.includes("session-replay-ui")&&(0,F.Z)(D)&&j.push((0,i.t)("replay"));let L=t.clone();const R=(0,Z.Is)(o,a);R&&(t=t.clone(),t.query=`${t.query} ${R}`.trim(),L=t.clone());const U=o===Z.f1.None?(0,i.t)("operation duration"):`${o} duration`;j.splice(2,0,U);let W=p.zD;o!==Z.f1.None&&(W=(0,Z.T$)(o));const Q=[...L.fields];Q.splice(2,0,{field:W}),o===Z.f1.None&&Q.push(...p.$4.map((e=>({field:e})))),L.fields=Q;const K={generatePerformanceTransactionEventsView:()=>{const e=function(e,t){const{selected:r}=gt(a,{p95:n?.["p95()"]??0,spanOperationBreakdownFilter:o}),s=e.withSorts([r.sort]);if(o===Z.f1.None){const e=[...s.fields.slice(0,t.length)];s.fields=e.filter((e=>{let{field:t}=e;return!(0,p.sU)(t)}))}return s}(L,j);return e.query=w,e},handleOpenAllEventsClick:function(){(0,O.ec)({eventKey:"performance_views.summary.view_in_transaction_events",eventName:"Performance Views: View in All Events from Transaction Summary",organization_id:parseInt(l.id,10)})}};return(0,ee.BX)(r.Fragment,{children:[(0,ee.BX)(z.or,{children:[(0,ee.BX)(vt,{children:[(0,ee.tZ)(Z.ZP,{organization:l,currentFilter:o,onChangeFilter:v}),(0,ee.BX)(C.Z,{condensed:!0,children:[(0,ee.tZ)(k.Z,{}),(0,ee.tZ)(P.Z,{alignDropdown:"left"})]}),(0,ee.tZ)(ft,{searchSource:"transaction_summary",organization:l,projectIds:t.project,query:w,fields:t.fields,onSearch:function(e){const t=(0,N.fK)({...a.query||{},query:e}),r=_()(t,"cursor");s.browserHistory.push({pathname:a.pathname,query:r})},maxQueryLength:V.dI})]}),(0,ee.tZ)(X.Z,{organization:l,location:a,eventView:t,totalValues:S,currentFilter:o,withoutZerofill:x}),(0,ee.tZ)(q.Z,{location:a,organization:l,eventView:L,...K,showTransactions:(0,m.ro)(a.query.showTransactions,$.K0.SLOW),breakdown:(0,Z.q0)(a),titles:j,handleDropdownChange:function(e){const t={pathname:a.pathname,query:{...a.query,showTransactions:e,transactionCursor:void 0}};s.browserHistory.push(t)},generateLink:{id:(0,$.vd)(g),trace:(0,$.Z6)(t.normalizeDateSelection(a)),replayId:(0,$.MF)(f)},handleCellAction:function(e){return(r,n)=>{const i=(0,$.xf)(t.query);(0,B.rh)(i,r,e,n),s.browserHistory.push({pathname:a.pathname,query:{...a.query,cursor:void 0,query:i.formatString()}})}},...gt(a,{p95:n?.["p95()"]??0,spanOperationBreakdownFilter:o}),forceLoading:u}),(0,ee.tZ)(et,{location:a,organization:l,eventView:t,totals:(0,I.ri)(n?.["count()"])?{"count()":n["count()"]}:null,projectId:h,transactionName:g}),(0,ee.tZ)(st.D_,{eventView:t,organization:l,location:a,projects:c,transactionName:g,currentFilter:o}),(0,ee.tZ)(se,{organization:l,location:a,transaction:g,start:t.start,end:t.end,statsPeriod:t.statsPeriod})]}),(0,ee.BX)(z.MF,{children:[(0,ee.tZ)(mt,{organization:l,location:a,isLoading:u,hasWebVitals:b,error:d,totals:n,transactionName:g,eventView:t}),!E&&(0,ee.tZ)(We,{eventView:t,organization:l,location:a}),(0,ee.tZ)($.uI,{}),(0,ee.tZ)(Le,{organization:l,isLoading:u,error:d,totals:n,eventView:t,transactionName:g}),(0,ee.tZ)($.uI,{}),(0,ee.tZ)(M.Z,{generateUrl:function(e,t){const r=(0,I.ZT)(a.query,{key:(0,p.ZC)(e),value:t});return{...a,query:r}},totalValues:S,eventView:t,organization:l,location:a})]})]})}function gt(e,t){const a=function(e){let{p95:t,spanOperationBreakdownFilter:a}=e;if(a===Z.f1.None)return[{sort:{kind:"asc",field:"transaction.duration"},value:$.K0.FASTEST,label:(0,i.t)("Fastest Transactions")},{query:[["transaction.duration",`<=${t.toFixed(0)}`]],sort:{kind:"desc",field:"transaction.duration"},value:$.K0.SLOW,label:(0,i.t)("Slow Transactions (p95)")},{sort:{kind:"desc",field:"transaction.duration"},value:$.K0.OUTLIER,label:(0,i.t)("Outlier Transactions (p100)")},{sort:{kind:"desc",field:"timestamp"},value:$.K0.RECENT,label:(0,i.t)("Recent Transactions")}];const r=(0,Z.T$)(a),s=a;return[{sort:{kind:"asc",field:r},value:$.K0.FASTEST,label:(0,i.t)("Fastest %s Operations",s)},{query:[["transaction.duration",`<=${t.toFixed(0)}`]],sort:{kind:"desc",field:r},value:$.K0.SLOW,label:(0,i.t)("Slow %s Operations (p95)",s)},{sort:{kind:"desc",field:r},value:$.K0.OUTLIER,label:(0,i.t)("Outlier %s Operations (p100)",s)},{sort:{kind:"desc",field:"timestamp"},value:$.K0.RECENT,label:(0,i.t)("Recent Transactions")}]}(t),r=(0,m.ro)(e.query.showTransactions,$.K0.SLOW);return{selected:a.find((e=>e.value===r))||a[0],options:a}}ht.displayName="SummaryContent";const vt=(0,E.Z)("div",{target:"e1wn9z5c1"})("display:grid;gap:",(0,L.Z)(2),";margin-bottom:",(0,L.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(2, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto auto 1fr;}"),ft=(0,E.Z)(D.Z,{target:"e1wn9z5c0"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/4;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),xt=(0,x.Z)(ht);function yt(e){const t=(0,g.Z)(),{location:a,selection:s,organization:i,projects:l}=e;return(0,r.useEffect)((()=>{(0,n.QK)(t,i.slug,s),(0,y.n4)(s),(0,o.Z)("performance_views.transaction_summary.view",{organization:i})}),[s,i,t]),(0,ee.tZ)(u.kP,{children:(0,ee.tZ)(w.ZP,{location:a,organization:i,projects:l,tab:S.Z.TransactionSummary,getDocumentTitle:wt,generateEventView:St,childComponent:Zt})})}function Zt(e){const{location:t,organization:a,eventView:r,projectId:n,transactionName:i,transactionThreshold:c,transactionThresholdMetric:p}=e,u=(0,l._)({eventView:Tt(0,r),orgSlug:a.slug,location:t,transactionThreshold:c,transactionThresholdMetric:p,referrer:"api.performance.transaction-summary"}),{data:m,isLoading:h,error:g}=u,v=(0,Z.q0)(t),f=m?.data?.[0]??null;return(0,ee.tZ)(xt,{location:t,organization:a,eventView:r,projectId:n,transactionName:i,isLoading:h,error:g,totalValues:f,onChangeFilter:e=>{(0,o.Z)("performance_views.filter_dropdown.selection",{organization:a,action:e});const r={...(0,d.V)(t,[b.Oo,b.mo]),...(0,Z.bz)(e)};e===Z.f1.None&&delete r.breakdown,s.browserHistory.push({pathname:t.pathname,query:r})},spanOperationBreakdownFilter:v})}function wt(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,i.t)("Performance")].join(" - "):[(0,i.t)("Summary"),(0,i.t)("Performance")].join(" - ")}function St(e){let{location:t,organization:a,transactionName:r}=e;const s=(0,m.ro)(t.query.query,""),n=new h.MY(s);n.setFilterValues("event.type",["transaction"]),n.setFilterValues("transaction",[r]),Object.keys(n.filters).forEach((e=>{(0,p.h1)(e)&&n.removeFilter(e)}));const i=["id","user.display","transaction.duration","trace","timestamp"];return a.features.includes("session-replay-ui")&&i.push("replayId"),c.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:r,fields:i,query:n.formatString(),projects:[]},t)}function Tt(e,t){const a=T.PE.map((e=>{let{vitals:t}=e;return t})).reduce(((e,t)=>(t.forEach((t=>e.push(t))),e)),[]);return t.withColumns([{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["count","",void 0,void 0]},{kind:"function",function:["count_unique","user",void 0,void 0]},{kind:"function",function:["failure_rate","",void 0,void 0]},{kind:"function",function:["tpm","",void 0,void 0]},{kind:"function",function:["count_miserable","user",void 0,void 0]},{kind:"function",function:["user_misery","",void 0,void 0]},{kind:"function",function:["apdex","",void 0,void 0]},...a.map((e=>({kind:"function",function:["percentile",e,T.GW.toString(),void 0]})))])}yt.displayName="TransactionOverview",Zt.displayName="OverviewContentWrapper";const bt=(0,f.Z)((0,x.Z)((0,v.Z)(yt)))},"./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx":(e,t,a)=>{"use strict";function r(e){let{orgSlug:t,transaction:a,query:r,spanSlug:s,projectID:n}=e;const i=function(e){let{orgSlug:t,spanSlug:a}=e;return`/organizations/${t}/performance/summary/spans/${encodeURIComponent(a.op)}:${a.group}/`}({orgSlug:t,spanSlug:s});return{pathname:i,query:{transaction:a,project:n,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query}}}let s;a.d(t,{BP:()=>r,wL:()=>s}),function(e){e.MIN="min",e.MAX="max"}(s||(s={}))},"./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var r=a("./app/components/gridEditable/index.tsx"),s=a("./app/components/gridEditable/sortLink.tsx"),n=a("./app/components/links/link.tsx"),i=a("./app/locale.tsx"),o=a("./app/utils.tsx"),l=a("./app/utils/discover/fieldRenderers.tsx"),c=a("./app/utils/discover/fields.tsx"),p=a("./app/utils/discover/styles.tsx"),u=a("./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx"),d=a("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),m=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){const{location:t,organization:a,transactionName:s,isLoading:n,suspectSpans:i,totals:l,sort:c,project:p}=e,u=i.map((e=>({operation:e.op,group:e.group,description:e.description,totalCount:e.count,frequency:(0,o.ri)(e.frequency)&&(0,o.ri)(l?.["count()"])?Math.min(1,e.frequency/l["count()"]):null,avgOccurrences:e.avgOccurrences,p50ExclusiveTime:e.p50ExclusiveTime,p75ExclusiveTime:e.p75ExclusiveTime,p95ExclusiveTime:e.p95ExclusiveTime,p99ExclusiveTime:e.p99ExclusiveTime,sumExclusiveTime:e.sumExclusiveTime})));return(0,m.tZ)(r.ZP,{isLoading:n,data:u,columnOrder:f[c].map((e=>x[e])),columnSortBy:[],grid:{renderHeadCell:g,renderBodyCell:v(t,a,s,p)},location:t})}function g(e,t){const a=(0,c.qG)(e.key,y[e.key]);return(0,m.tZ)(s.Z,{title:e.name,align:a,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function v(e,t,a,r){return(s,o)=>{const c=(0,l.Js)(s.key,y);if("description"===s.key){const l=(0,u.BP)({orgSlug:t.slug,transaction:a,query:e.query,spanSlug:{op:o.operation,group:o.group},projectID:r?.id});return(0,m.tZ)(p.W2,{children:(0,m.tZ)(n.Z,{to:l,children:o[s.key]??(0,i.t)("(unnamed span)")})})}return c(o,{location:e,organization:t})}}h.displayName="SuspectSpansTable",g.displayName="renderHeadCell";const f={[d.g.COUNT]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.g.AVG_OCCURRENCE]:["operation","description","avgOccurrences","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.g.SUM_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.p.P50_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p50ExclusiveTime","sumExclusiveTime"],[d.p.P75_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.p.P95_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p95ExclusiveTime","sumExclusiveTime"],[d.p.P99_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p99ExclusiveTime","sumExclusiveTime"]},x={operation:{key:"operation",name:(0,i.t)("Span Operation"),width:r.z7},description:{key:"description",name:(0,i.t)("Span Name"),width:r.z7},totalCount:{key:"totalCount",name:(0,i.t)("Span Count"),width:r.z7},frequency:{key:"frequency",name:(0,i.t)("Frequency"),width:r.z7},avgOccurrences:{key:"avgOccurrences",name:(0,i.t)("Average Occurrences"),width:r.z7},p50ExclusiveTime:{key:"p50ExclusiveTime",name:(0,i.t)("P50 Self Time"),width:r.z7},p75ExclusiveTime:{key:"p75ExclusiveTime",name:(0,i.t)("P75 Self Time"),width:r.z7},p95ExclusiveTime:{key:"p95ExclusiveTime",name:(0,i.t)("P95 Self Time"),width:r.z7},p99ExclusiveTime:{key:"p99ExclusiveTime",name:(0,i.t)("P99 Self Time"),width:r.z7},sumExclusiveTime:{key:"sumExclusiveTime",name:(0,i.t)("Total Self Time"),width:r.z7}},y={operation:"string",description:"string",totalCount:"integer",frequency:"percentage",avgOccurrences:"number",p50ExclusiveTime:"duration",p75ExclusiveTime:"duration",p95ExclusiveTime:"duration",p99ExclusiveTime:"duration",sumExclusiveTime:"duration"}},"./app/views/performance/transactionSummary/transactionVitals/constants.tsx":(e,t,a)=>{"use strict";a.d(t,{GW:()=>o,PE:()=>p,QB:()=>u,sE:()=>i}),a("../node_modules/core-js/modules/es.array.push.js");var r=a("./app/utils/fields/index.ts"),s=a("./app/utils/performance/vitals/constants.tsx"),n=a("./app/utils/theme.tsx");const i=100,o=.75,l=[{vitals:[r.Zl.FP,r.Zl.FCP,r.Zl.LCP],min:0},{vitals:[r.Zl.FID],min:0,precision:2},{vitals:[r.Zl.CLS],min:0,precision:2}],c=[...n.ZP.charts.getColorPalette(l.reduce(((e,t)=>{let{vitals:a}=t;return e+a.length}),0)-1)].reverse(),p=l.map((e=>({...e,colors:c.splice(0,e.vitals.length)}))),u=l.reduce(((e,t)=>{let{vitals:a}=t;return a.forEach((t=>{const a=s.r9[t].slug;e.push(`${a}Start`),e.push(`${a}End`)})),e}),[])},"./app/views/performance/vitalDetail/vitalInfo.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),s=a("./app/utils/toArray.tsx"),n=a("./app/views/performance/landing/vitalsCards.tsx"),i=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{vital:t,location:a,isLoading:o,hideBar:l,hideStates:c,hideVitalPercentNames:p,hideVitalThresholds:u,hideDurationDetail:d}=e;const m=(0,s.Z)(t),h={vital:t,showBar:!l,showStates:!c,showVitalPercentNames:!p,showVitalThresholds:!u,showDurationDetail:!d};return(0,i.tZ)(r.Z,{location:a,vitals:m,children:e=>{let{isLoading:t,vitalsData:a}=e;return(0,i.tZ)(n.JO,{...h,isLoading:o||t,data:a})}})}o.displayName="VitalInfo";const l=o},"../node_modules/lodash/assign.js":(e,t,a)=>{var r=a("../node_modules/lodash/_assignValue.js"),s=a("../node_modules/lodash/_copyObject.js"),n=a("../node_modules/lodash/_createAssigner.js"),i=a("../node_modules/lodash/isArrayLike.js"),o=a("../node_modules/lodash/_isPrototype.js"),l=a("../node_modules/lodash/keys.js"),c=Object.prototype.hasOwnProperty,p=n((function(e,t){if(o(t)||i(t))s(t,l(t),e);else for(var a in t)c.call(t,a)&&r(e,a,t[a])}));e.exports=p}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionOverview_index_tsx-node_modules_lodash_as-0005c1.75b75551a483712c79cd39814708a37a.js.map