(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_discover_discoverQuery_tsx-app_views_performance_transactionSummary_transactionVita-b047ed"],{"./app/components/charts/barChartZoom.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),r=s("./app/components/charts/components/dataZoomInside.tsx"),i=s("./app/components/charts/components/toolBox.tsx");class l extends n.Component{constructor(){super(...arguments),(0,a.Z)(this,"zooming",null),(0,a.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,a.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const s=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));s&&!s._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0})})),(0,a.Z)(this,"handleDataZoom",((e,t)=>{const s=t.getModel(),{startValue:a,endValue:n}=s._payload.batch[0];if(null!==a&&null!==n){const{buckets:e,location:s,paramStart:r,paramEnd:i,minZoomWidth:l,onHistoryPush:c}=this.props,{start:d}=e[a],{end:p}=e[n];if(void 0===l||p-d>l){const e={pathname:s.pathname,query:{...s.query,[r]:d,[i]:p}};c?c(d,p):o.browserHistory.push(e)}else t.dispatchAction({type:"restore"}),this.props.onDataZoomCancelled?.()}else t.dispatchAction({type:"restore"}),this.props.onDataZoomCancelled?.();this.props.onDataZoom?.(e,t)}))}render(){const{children:e,xAxisIndex:t}=this.props;return e({onChartReady:this.handleChartReady,onFinished:this.handleChartFinished,dataZoom:(0,r.Z)({xAxisIndex:t}),toolBox:(0,i.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom})}}l.displayName="BarChartZoom";const c=l},"./app/components/charts/components/dataZoomInside.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n}),s("../node_modules/echarts/lib/component/dataZoomInside.js");const a={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function n(e){return e&&Array.isArray(e)?e:[{...a,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,s)=>{"use strict";function a(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function n(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:a(t),...e}}s.d(t,{Z:()=>n})},"./app/components/charts/transparentLoadingMask.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("./app/components/loadingMask.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=(0,a.Z)((e=>{let{className:t,visible:s,children:a,...r}=e;const i=s?{...r,"data-test-id":"loading-placeholder"}:r;return(0,o.tZ)(n.Z,{className:t,...i,children:a})}),{target:"e1t3xibm0"})((e=>!e.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/components/events/searchBar.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>P}),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/core-js/modules/es.array.includes.js");var a=s("../node_modules/react/index.js"),n=s("../node_modules/@sentry/core/esm/exports.js"),o=s("../node_modules/lodash/assign.js"),r=s.n(o),i=s("../node_modules/lodash/flatten.js"),l=s.n(i),c=s("../node_modules/lodash/memoize.js"),d=s.n(c),p=s("../node_modules/lodash/omit.js"),u=s.n(p),m=s("./app/actionCreators/tags.tsx"),h=s("./app/components/smartSearchBar/index.tsx"),g=s("./app/constants/index.tsx"),v=s("./app/types/index.tsx"),x=s("./app/utils.tsx"),f=s("./app/utils/discover/fields.tsx"),y=s("./app/utils/fields/index.ts"),Z=s("./app/utils/measurements/measurements.tsx"),b=s("./app/utils/useApi.tsx"),w=s("./app/utils/withTags.tsx"),j=s("./app/views/dashboards/utils.tsx"),_=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const k=new RegExp(`^${g.c$}|\\${g.ir}`,"g"),S=new Set(Object.keys(f.wZ)),V=Object.keys(f.wZ).reduce(((e,t)=>(e[t]={...f.wZ[t],kind:y.IV.FIELD},e)),{}),C=u()(V,f.J8),D=f.$4.reduce(((e,t)=>(e[t]={name:t,kind:y.IV.METRICS},e)),{}),F=Object.keys(f.jg).reduce(((e,t)=>(e[t]={...f.jg[t],kind:y.IV.FIELD},e)),{});function z(e){const{maxSearchItems:t,organization:s,tags:o,omitTags:i,fields:c,projectIds:p,includeSessionTagsValues:g,maxMenuHeight:w,customMeasurements:z}=e,P=(0,b.Z)(),E=(0,a.useRef)(!1),T=(0,a.useMemo)((()=>(e=>e?.length?e.reduce(((e,t)=>(S.has(t.field)||(0,f.GO)(t.field)||(0,j.nk)(t.field)||(e[t.field]={key:t.field,name:t.field,kind:y.IV.FUNCTION}),e)),{}):[])(c)),[c]),R=(0,a.useMemo)((()=>Object.keys(o).reduce(((e,t)=>(e[t]={...o[t],kind:y.IV.TAG},e)),{})),[o]);(0,a.useEffect)((()=>{L.cache.clear?.()}),[p]);const L=d()(((e,t,a)=>{const n=p?.map(String);return(0,f.h1)(e.key)||(0,f.Xr)(e.key)?Promise.resolve([]):(0,m.Fo)({api:P,orgSlug:s.slug,tagKey:e.key,search:t,projectIds:n,endpointParams:a,includeTransactions:!0,includeSessions:g}).then((e=>l()(e.filter((e=>{let{name:t}=e;return(0,x.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:s}=e;return`${s}-${t}`})),N=e=>{let t;!E.current&&Object.keys(o).length>0&&(t=n.Yr({name:"SearchBar.getTagList"}),E.current=!0);const a=((e,t)=>{const s=Object.keys(e).reduce(((t,s)=>(t[s]={...e[s],kind:y.IV.MEASUREMENT},t)),{});return t?Object.keys(t).reduce(((e,s)=>(e[s]={...t[s],kind:y.IV.MEASUREMENT},e)),s):s})(e,z),l=s.features.includes("performance-view")?Object.assign({},a,T,D,V):Object.assign({},C);r()(l,R,V,F),l.has={key:y.Sh.HAS,name:"Has property",values:Object.keys(l).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),predefined:!0,kind:y.IV.FIELD};const c=i&&i.length>0?u()(l,i):l;if(t){const e=Object.keys(c).length;t.setTag("tags.totalCount",e);const s=[1,5,10,20,50,100,200,300,400,500,600,700,800,900,1e3,1e4].find((t=>e<=t));t.setTag("tags.totalCount.grouped",`<=${s}`),t.finish()}return c};return(0,_.tZ)(Z.Z,{children:s=>{let{measurements:a}=s;return(0,_.tZ)(h.Z,{hasRecentSearches:!0,savedSearchType:v.L4.EVENT,onGetTagValues:L,supportedTags:N(a),prepareQuery:e=>e.replace(k,""),maxSearchItems:t,excludedTags:[y.Sh.ENVIRONMENT,y.Sh.TOTAL_COUNT],maxMenuHeight:w??300,customPerformanceMetrics:z,...e})}})}z.displayName="SearchBar";const P=(0,w.Z)(z)},"./app/utils/discover/discoverQuery.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l,_:()=>i});var a=s("./app/utils/discover/genericDiscoverQuery.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function r(e){return(0,n.tZ)(a.ZP,{route:"events",shouldRefetchData:o,afterFetch:(e,t)=>{const{fields:s,...a}=e.meta??{};return{...e,meta:{...s,...a}}},...e})}function i(e){return(0,a.JC)({route:"events",shouldRefetchData:o,afterFetch:(e,t)=>{const{fields:s,...a}=e.meta??{};return{...e,meta:{...s,...a}}},...e})}r.displayName="DiscoverQuery";const l=r},"./app/utils/performance/histogram/constants.tsx":(e,t,s)=>{"use strict";s.d(t,{d:()=>n});var a=s("./app/locale.tsx");const n=[{label:(0,a.t)("Exclude"),value:"exclude_outliers"},{label:(0,a.t)("Include"),value:"all"}]},"./app/utils/performance/histogram/histogramQuery.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var a=s("../node_modules/react/index.js"),n=s("../node_modules/lodash/omit.js"),o=s.n(n),r=s("./app/utils/discover/genericDiscoverQuery.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){const{fields:t,numBuckets:s,min:a,max:n,precision:r,dataFilter:i,eventView:l,location:c}=e,d={field:t,numBuckets:s,min:a,max:n,precision:r,dataFilter:i},p=o()(l.getEventsAPIPayload(c),["field","sort","per_page"]);return Object.assign(d,p)}function c(e){const{children:t,fields:s,didReceiveMultiAxis:n}=e;return 0===s.length?(0,i.tZ)(a.Fragment,{children:t({isLoading:!1,error:null,pageLinks:null,histograms:{}})}):(0,i.tZ)(r.ZP,{route:"events-histogram",getRequestPayload:l,didFetch:function(e){if(n){const t={};Object.entries(e).forEach((e=>{let[s,a]=e;return t[s]=a.length?a.reduce(((e,t)=>e+t.count),0):0})),n(t)}},...o()(e,"children"),children:t=>{let{tableData:s,...a}=t;return e.children({histograms:s,...a})}})}c.displayName="HistogramQuery";const d=c},"./app/utils/performance/histogram/index.tsx":(e,t,s)=>{"use strict";s.d(t,{V:()=>c,Z:()=>d});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),r=s("./app/utils/queryString.tsx"),i=s("./app/utils/performance/histogram/constants.tsx");class l extends n.Component{constructor(){super(...arguments),(0,a.Z)(this,"handleResetView",(()=>{const{location:e,zoomKeys:t}=this.props;o.browserHistory.push({pathname:e.pathname,query:c(e,t)})})),(0,a.Z)(this,"handleFilterChange",(e=>{const{location:t,zoomKeys:s}=this.props;o.browserHistory.push({pathname:t.pathname,query:{...c(t,s),dataFilter:e}})}))}isZoomed(){const{location:e,zoomKeys:t}=this.props;return t.map((t=>e.query[t])).some((e=>void 0!==e))}getActiveFilter(){const{location:e}=this.props,t=e.query.dataFilter?(0,r.ro)(e.query.dataFilter):i.d[0].value;return i.d.find((e=>e.value===t))||i.d[0]}render(){const e={isZoomed:this.isZoomed(),handleResetView:this.handleResetView,activeFilter:this.getActiveFilter(),handleFilterChange:this.handleFilterChange,filterOptions:i.d};return this.props.children(e)}}function c(e,t){const s={...e.query,cursor:void 0};return delete s.dataFilter,t.forEach((e=>delete s[e])),s}l.displayName="Histogram";const d=l},"./app/utils/withTags.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react/index.js"),o=s("./app/stores/tagStore.tsx"),r=s("./app/utils/getDisplayName.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends n.Component{constructor(){super(...arguments),(0,a.Z)(this,"state",{tags:o.Z.getState()}),(0,a.Z)(this,"unsubscribe",o.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...s}=this.props;return(0,i.tZ)(e,{tags:t??this.state.tags,...s})}}return t.displayName="WithTags",(0,a.Z)(t,"displayName",`withTags(${(0,r.Z)(e)})`),t}},"./app/views/performance/transactionSummary/transactionVitals/constants.tsx":(e,t,s)=>{"use strict";s.d(t,{GW:()=>i,PE:()=>d,QB:()=>p,sE:()=>r}),s("../node_modules/core-js/modules/es.array.push.js");var a=s("./app/utils/fields/index.ts"),n=s("./app/utils/performance/vitals/constants.tsx"),o=s("./app/utils/theme.tsx");const r=100,i=.75,l=[{vitals:[a.Zl.FP,a.Zl.FCP,a.Zl.LCP],min:0},{vitals:[a.Zl.FID],min:0,precision:2},{vitals:[a.Zl.CLS],min:0,precision:2}],c=[...o.ZP.charts.getColorPalette(l.reduce(((e,t)=>{let{vitals:s}=t;return e+s.length}),0)-1)].reverse(),d=l.map((e=>({...e,colors:c.splice(0,e.vitals.length)}))),p=l.reduce(((e,t)=>{let{vitals:s}=t;return s.forEach((t=>{const s=n.r9[t].slug;e.push(`${s}Start`),e.push(`${s}End`)})),e}),[])},"./app/views/performance/transactionSummary/transactionVitals/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>be});var a=s("./app/locale.tsx"),n=s("./app/utils/discover/eventView.tsx"),o=s("./app/utils/discover/fields.tsx"),r=s("./app/utils/performance/vitals/constants.tsx"),i=s("./app/utils/queryString.tsx"),l=s("./app/utils/tokenizeSearch.tsx"),c=s("./app/utils/withOrganization.tsx"),d=s("./app/utils/withProjects.tsx"),p=s("./app/views/performance/transactionSummary/pageLayout.tsx"),u=s("./app/views/performance/transactionSummary/tabs.tsx"),m=s("./app/views/performance/transactionSummary/transactionVitals/constants.tsx"),h=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),g=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),v=s("../node_modules/react-router/es/index.js"),x=s("./app/components/alert.tsx"),f=s("./app/components/button.tsx"),y=s("./app/components/compactSelect.tsx"),Z=s("./app/components/datePageFilter.tsx"),b=s("./app/components/environmentPageFilter.tsx"),w=s("./app/components/events/searchBar.tsx"),j=s("./app/components/layouts/thirds.tsx"),_=s("./app/components/links/externalLink.tsx"),k=s("./app/components/organizations/pageFilterBar.tsx"),S=s("./app/components/organizations/pageFilters/parse.tsx"),V=s("./app/styles/space.tsx"),C=s("./app/utils/analytics.tsx"),D=s("./app/utils/performance/histogram/index.tsx"),F=s("./app/utils/performance/histogram/constants.tsx"),z=s("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),P=s("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),E=s("./app/components/panels/index.tsx"),T=s("./app/utils/performance/histogram/histogramQuery.tsx"),R=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),L=s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),N=s("../node_modules/lodash/isEqual.js"),O=s.n(N),I=s("../node_modules/lodash/throttle.js"),A=s.n(I),q=s("./app/components/charts/barChart.tsx"),$=s("./app/components/charts/barChartZoom.tsx"),M=s("./app/components/charts/components/markLine.tsx"),B=s("./app/components/charts/transparentLoadingMask.tsx"),W=s("./app/components/placeholder.tsx"),H=s("./app/utils/formatters.tsx"),Q=s("./app/utils/getDynamicText.tsx"),G=s("./app/utils/performance/histogram/utils.tsx"),K=s("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),U=s("./app/views/performance/landing/vitalsCards.tsx"),X=s("./app/views/performance/vitalDetail/utils.tsx"),Y=s("./app/components/charts/styles.tsx");const J=(0,h.Z)(E.Lv,{target:"e2b29zk5"})({name:"1slq3zi",styles:"display:grid;grid-template-columns:325px minmax(100px, auto);padding:0"}),ee=(0,h.Z)("div",{target:"e2b29zk4"})("padding:",(0,V.Z)(3),";"),te=(0,h.Z)(ee,{target:"e2b29zk3"})("position:relative;border-right:1px solid ",(e=>e.theme.border),";grid-column:1/1;display:flex;flex-direction:column;justify-content:space-between;"),se=(0,h.Z)(Y.OT,{target:"e2b29zk2"})({name:"cfjpzu",styles:"margin:0px"}),ae=(0,h.Z)("div",{target:"e2b29zk1"})("font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.subText),";"),ne=(0,h.Z)("div",{target:"e2b29zk0"})({name:"5r9nha",styles:"font-size:32px"});var oe=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class re extends g.Component{constructor(){super(...arguments),(0,R.Z)(this,"state",{refDataRect:null,refPixelRect:null}),(0,R.Z)(this,"trackOpenInDiscoverClicked",(()=>{const{organization:e}=this.props,{vitalDetails:t}=this.props;(0,C.ec)({eventKey:"performance_views.vitals.open_in_discover",eventName:"Performance Views: Open vitals in discover",organization_id:e.id,vital:t.slug})})),(0,R.Z)(this,"trackOpenAllEventsClicked",(()=>{const{organization:e}=this.props,{vitalDetails:t}=this.props;(0,C.ec)({eventKey:"performance_views.vitals.open_all_events",eventName:"Performance Views: Open vitals in all events",organization_id:e.id,vital:t.slug})})),(0,R.Z)(this,"handleRendered",A()(((e,t)=>{const{chartData:s}=this.props,{refDataRect:a}=this.state;if(null===a||s.length<1)return;const n=null===a?null:(0,P.L0)(t,a);null===n||O()(n,this.state.refPixelRect)||this.setState({refPixelRect:n})}),200,{leading:!0})),(0,R.Z)(this,"handleDataZoomCancelled",(()=>{}))}static getDerivedStateFromProps(e,t){const{isLoading:s,error:a,chartData:n}=e;if(s||null===a)return{...t};const o=(0,P.eH)(n);return null===t.refDataRect||null!==o&&!O()(o,t.refDataRect)?{...t,refDataRect:o}:{...t}}get summary(){const{summaryData:e}=this.props;return e?.p75??null}get failureRate(){const{summaryData:e}=this.props,t=e?.poor??0,s=e?.total??0;return s<=0?0:t/s}getFormattedStatNumber(){const{vitalDetails:e}=this.props,t=this.summary,{type:s}=e;return null===t?"—":"duration"===s?(0,H.g9)(t/1e3,2,!0):(0,H.$1)(t,2)}renderSummary(){const{vitalDetails:e,eventView:t,organization:s,min:n,max:r,dataFilter:i}=this.props,{slug:c,name:d,description:p}=e,u=`measurements.${c}`,h=t.withColumns([{kind:"field",field:"transaction"},{kind:"function",function:["percentile",u,m.GW.toString(),void 0]},{kind:"function",function:["count","","",void 0]}]).withSorts([{kind:"desc",field:(0,o.LY)(`percentile(${u},${m.GW.toString()})`)}]),g=new l.MY(h.query??"");return g.addFilterValues("has",[u]),void 0===n&&void 0===r||(void 0!==n&&g.addFilterValues(u,[`>=${n}`]),void 0!==r&&g.addFilterValues(u,[`<=${r}`])),h.query=g.formatString(),(0,oe.BX)(te,{children:[(0,oe.tZ)(ie,{children:(0,oe.tZ)(se,{children:`${d} (${c.toUpperCase()})`})}),(0,oe.tZ)(ne,{children:(0,Q.Z)({value:this.getFormattedStatNumber(),fixed:"—"})}),(0,oe.tZ)(ae,{children:p}),(0,oe.tZ)("div",{children:(0,oe.tZ)(f.zx,{size:"xs",to:h.withColumns([{kind:"field",field:u}]).withSorts([{kind:"desc",field:u}]).getPerformanceTransactionEventsViewUrlTarget(s.slug,{showTransactions:"all"===i?K.q3.p100:K.q3.p75,webVital:u}),onClick:this.trackOpenAllEventsClicked,children:(0,a.t)("View All Events")})})]})}renderHistogram(){const{theme:e,location:t,isLoading:s,chartData:a,summaryData:n,error:o,colors:r,vital:i,vitalDetails:l,precision:c=0}=this.props,{slug:d}=l,p=this.getSeries(),u={type:"category",truncate:!0,axisTick:{alignWithLabel:!0}},h=p.data.map((e=>e.value)),g={type:"value",max:h.length?Math.max(...h):void 0,axisLabel:{color:e.chartLabel,formatter:H.Du}},v=[p];if(!s&&!o){const e=this.getBaselineSeries();null!==e&&v.push(e)}const x=s||o||null===n?{}:{[i]:n};return(0,oe.tZ)($.Z,{minZoomWidth:10**-c*m.sE,location:t,paramStart:`${d}Start`,paramEnd:`${d}End`,xAxisIndex:[0],buckets:(0,G._W)(a),onDataZoomCancelled:this.handleDataZoomCancelled,children:e=>(0,oe.BX)(le,{children:[(0,oe.tZ)(B.Z,{visible:s}),(0,oe.tZ)(ce,{children:(0,oe.tZ)(U.JO,{isLoading:s,data:x,vital:i,showBar:!1,showStates:!1,showVitalPercentNames:!1,showVitalThresholds:!1,showDurationDetail:!1})}),(0,Q.Z)({value:(0,oe.tZ)(q.v,{series:v,xAxis:u,yAxis:g,colors:r,onRendered:this.handleRendered,grid:{left:(0,V.Z)(3),right:(0,V.Z)(3),top:(0,V.Z)(3),bottom:(0,V.Z)(1.5)},stacked:!0,...e}),fixed:(0,oe.tZ)(W.Z,{testId:"skeleton-ui",height:"200px"})})]})})}bucketWidth(){const{chartData:e}=this.props;return e.length>=2?e[1].bin-e[0].bin:0}getSeries(){const{theme:e,chartData:t,precision:s,vitalDetails:n,vital:o}=this.props,r=(0,G.GT)(t,{precision:0===s?void 0:s,type:n.type,additionalFieldsFn:t=>({itemStyle:{color:e[this.getVitalsColor(o,t)]}})});return{seriesName:(0,a.t)("Count"),data:r}}getVitalsColor(e,t){const s=X.eE[e],a=X.MN[e];return t>=s?X.fL[X.SP.POOR]:t>=a?X.fL[X.SP.MEH]:X.fL[X.SP.GOOD]}getBaselineSeries(){const{theme:e,chartData:t}=this.props,s=this.summary;if(null===s||null===this.state.refPixelRect)return null;const n=(0,P.oZ)(t,s);if(null===n||-1===n)return null;const o=(0,P.jb)({x:n-.5,y:0},this.state.refDataRect,this.state.refPixelRect);if(null===o)return null;const r=(0,P.jb)({x:n-.5,y:Math.max(...t.map((e=>e.count)))||1},this.state.refDataRect,this.state.refPixelRect);if(null===r)return null;const i=(0,M.Z)({animationDuration:200,data:[[o,r]],label:{show:!1},lineStyle:{color:e.textColor,type:"solid"},tooltip:{formatter:()=>['<div class="tooltip-series tooltip-series-solo">','<span class="tooltip-label">',`<strong>${(0,a.t)("p75")}</strong>`,"</span>","</div>",'<div class="tooltip-arrow"></div>'].join("")}});return{seriesName:(0,a.t)("p75"),data:[],markLine:i}}render(){return(0,oe.BX)(J,{children:[this.renderSummary(),this.renderHistogram()]})}}re.displayName="VitalCard";const ie=(0,h.Z)("div",{target:"e126n0952"})({name:"1eoy87d",styles:"display:flex;justify-content:space-between"}),le=(0,h.Z)("div",{target:"e126n0951"})({name:"bjn8wh",styles:"position:relative"}),ce=(0,h.Z)("div",{target:"e126n0950"})("position:absolute;top:",(0,V.Z)(2),";right:",(0,V.Z)(3),";z-index:2;"),de=(0,L.b)(re);class pe extends g.Component{renderVitalCard(e,t,s,a,n,o,i,l,c){const{location:d,organization:p,eventView:u,dataFilter:h}=this.props,g=r.r9[e],v=void 0!==i||void 0!==l;return(0,oe.tZ)(T.Z,{location:d,orgSlug:p.slug,eventView:u,numBuckets:m.sE,fields:v?[e]:[],min:i,max:l,precision:c,dataFilter:h,children:r=>{const m=v?r.isLoading:t,x=v?null!==r.error:s,f=v?r.histograms?.[e]??n:n;return(0,oe.tZ)(de,{location:d,isLoading:m,error:x,vital:e,vitalDetails:g,summaryData:a,chartData:f,colors:o,eventView:u,organization:p,min:i,max:l,precision:c,dataFilter:h})}})}renderVitalGroup(e,t){const{location:s,organization:a,eventView:n,dataFilter:o}=this.props,{vitals:l,colors:c,min:d,max:p,precision:u}=e,h=l.reduce(((e,t)=>{const a=r.r9[t].slug;return e[t]={start:(0,i.ro)(s.query[`${a}Start`]),end:(0,i.ro)(s.query[`${a}End`])},e}),{});return(0,oe.tZ)(T.Z,{location:s,orgSlug:a.slug,eventView:n,numBuckets:m.sE,fields:l,min:d,max:p,precision:u,dataFilter:o,children:e=>{const s=t.isLoading||e.isLoading,a=null!==t.error||null!==e.error;return(0,oe.tZ)(g.Fragment,{children:l.map(((n,o)=>{const r=t?.vitalsData?.[n]??null,i=e.histograms?.[n]??[],{start:l,end:d}=h[n]??{};return(0,oe.tZ)(g.Fragment,{children:this.renderVitalCard(n,s,a,r,i,[c[o]],ue(l,u),ue(d,u),u)},n)}))})}})}render(){const{results:e}=this.props;return(0,oe.tZ)(E.s_,{children:(0,oe.tZ)(g.Fragment,{children:m.PE.map((t=>(0,oe.tZ)(g.Fragment,{children:this.renderVitalGroup(t,e)},t.vitals.join(""))))})})}}function ue(e,t){if(void 0!==e)return void 0===t||0===t?parseInt(e,10):parseFloat(e)}pe.displayName="VitalsPanel";const me=pe;function he(e){const{location:t,organization:s,eventView:n}=e,o=(0,i.ro)(t.query.query,""),r=e=>{const s=(0,S.fK)({...t.query||{},query:e});delete s.cursor,v.browserHistory.push({pathname:t.pathname,query:s})},l=m.PE.reduce(((e,t)=>{let{vitals:s}=t;return e.concat(s)}),[]);return(0,oe.tZ)(D.Z,{location:t,zoomKeys:m.QB,children:e=>{let{activeFilter:i,handleFilterChange:c,handleResetView:d,isZoomed:p}=e;return(0,oe.tZ)(j.or,{fullWidth:!0,children:(0,oe.tZ)(z.Z,{eventView:n,orgSlug:s.slug,location:t,vitals:l,children:e=>{const u=!e.isLoading&&(0,P.A1)(e.vitalsData,l);return(0,oe.BX)(g.Fragment,{children:[u&&(0,oe.tZ)(x.bZ,{type:"info",showIcon:!0,children:(0,a._N)("If this page is looking a little bare, keep in mind not all browsers support these vitals. [link]",{link:(0,oe.tZ)(_.Z,{href:"https://docs.sentry.io/product/performance/web-vitals/#browser-support",children:(0,a.t)("Read more about browser support.")})})}),(0,oe.BX)(ge,{children:[(0,oe.BX)(k.Z,{condensed:!0,children:[(0,oe.tZ)(b.Z,{}),(0,oe.tZ)(Z.Z,{alignDropdown:"left"})]}),(0,oe.tZ)(ve,{organization:s,projectIds:n.project,query:o,fields:n.fields,onSearch:r}),(0,oe.tZ)(y.Z,{value:i.value,options:F.d,onChange:e=>{(0,C.ec)({eventKey:"performance_views.vitals.filter_changed",eventName:"Performance Views: Change vitals filter",organization_id:s.id,value:e.value}),c(e.value)},triggerProps:{prefix:(0,a.t)("Outliers")},triggerLabel:i.label}),(0,oe.tZ)(f.zx,{onClick:()=>{(0,C.ec)({eventKey:"performance_views.vitals.reset_view",eventName:"Performance Views: Reset vitals view",organization_id:s.id}),d()},disabled:!p,"data-test-id":"reset-view",children:(0,a.t)("Reset View")})]}),(0,oe.tZ)(me,{organization:s,location:t,eventView:n,dataFilter:i.value,results:e})]})}})})}})}he.displayName="VitalsContent";const ge=(0,h.Z)("div",{target:"eem4cp51"})("display:grid;gap:",(0,V.Z)(2),";margin-bottom:",(0,V.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(3, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto 1fr auto auto;}"),ve=(0,h.Z)(w.Z,{target:"eem4cp50"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/5;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),xe=he;function fe(e){const{location:t,organization:s,projects:a}=e;return(0,oe.tZ)(p.ZP,{location:t,organization:s,projects:a,tab:u.Z.WebVitals,getDocumentTitle:ye,generateEventView:Ze,childComponent:xe})}function ye(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,a.t)("Vitals")].join(" — "):[(0,a.t)("Summary"),(0,a.t)("Vitals")].join(" — ")}function Ze(e){let{location:t,transactionName:s}=e;const a=(0,i.ro)(t.query.query,""),c=new l.MY(a);c.setFilterValues("event.type",["transaction"]),c.setFilterValues("transaction",[s]),Object.keys(c.filters).forEach((e=>{(0,o.h1)(e)&&c.removeFilter(e)}));const d=m.PE.reduce(((e,t)=>e.concat(t.vitals)),[]);return n.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:s,fields:[...d.map((e=>`percentile(${e}, ${m.GW})`)),...d.map((e=>`count_at_least(${e}, 0)`)),...d.map((e=>`count_at_least(${e}, ${r.r9[e].poorThreshold})`))],query:c.formatString(),projects:[]},t)}fe.displayName="TransactionVitals";const be=(0,d.Z)((0,c.Z)(fe))},"../node_modules/lodash/assign.js":(e,t,s)=>{var a=s("../node_modules/lodash/_assignValue.js"),n=s("../node_modules/lodash/_copyObject.js"),o=s("../node_modules/lodash/_createAssigner.js"),r=s("../node_modules/lodash/isArrayLike.js"),i=s("../node_modules/lodash/_isPrototype.js"),l=s("../node_modules/lodash/keys.js"),c=Object.prototype.hasOwnProperty,d=o((function(e,t){if(i(t)||r(t))n(t,l(t),e);else for(var s in t)c.call(t,s)&&a(e,s,t[s])}));e.exports=d},"../node_modules/lodash/throttle.js":(e,t,s)=>{var a=s("../node_modules/lodash/debounce.js"),n=s("../node_modules/lodash/isObject.js");e.exports=function(e,t,s){var o=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return n(s)&&(o="leading"in s?!!s.leading:o,r="trailing"in s?!!s.trailing:r),a(e,t,{leading:o,maxWait:t,trailing:r})}}}]);
//# sourceMappingURL=../sourcemaps/app_utils_discover_discoverQuery_tsx-app_views_performance_transactionSummary_transactionVita-b047ed.13962a1980bdeeaa5ef68d2a0dba5556.js.map