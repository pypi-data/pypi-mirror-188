(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationIntegrations_sentryAppDetailedView_tsx"],{"./app/actionCreators/sentryAppInstallations.tsx":(t,e,s)=>{"use strict";s.d(e,{G:()=>a,W:()=>r});var n=s("./app/actionCreators/indicator.tsx"),i=s("./app/locale.tsx");function a(t,e,s){(0,n.E3)();const a=t.requestPromise(`/organizations/${e}/sentry-app-installations/`,{method:"POST",data:{slug:s.slug}});return a.then((()=>(0,n.B8)()),(()=>(0,n.Iw)((0,i.t)("Unable to install %s",s.name)))),a}function r(t,e){(0,n.E3)();const s=t.requestPromise(`/sentry-app-installations/${e.uuid}/`,{method:"DELETE"}),a=e.app.slug.charAt(0).toUpperCase()+e.app.slug.slice(1);return s.then((()=>{(0,n.S9)((0,i.t)("%s successfully uninstalled.",a))}),(()=>(0,n.B8)())),s}},"./app/components/sentryAppIcon.tsx":(t,e,s)=>{"use strict";s.d(e,{Z:()=>r});var n=s("./app/components/avatar/sentryAppAvatar.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=t=>{let{sentryApp:e,size:s}=t;return(0,i.tZ)(n.Z,{sentryApp:e,size:s,isColor:!0})};a.displayName="SentryAppIcon";const r=a},"./app/utils/consolidatedScopes.tsx":(t,e,s)=>{"use strict";s.d(e,{A:()=>y,m:()=>m}),s("../node_modules/core-js/modules/es.array.includes.js");var n=s("../node_modules/lodash/groupBy.js"),i=s.n(n),a=s("../node_modules/lodash/invertBy.js"),r=s.n(a),o=s("../node_modules/lodash/pick.js"),l=s.n(o);const p={read:0,write:1,admin:2},c={project:"Project",team:"Team",release:"Release",event:"Event",org:"Organization",member:"Member"},d={Project:"no-access",Team:"no-access",Release:"no-access",Event:"no-access",Organization:"no-access",Member:"no-access"},u="project:releases",g=t=>{const e=t.split(":")[1];return p[e]},h=(t,e)=>g(t)-g(e);function m(t){const e={...d};let s=[...t];var n;return t.includes(u)&&(e.Release="admin",s=t.filter((t=>t!==u))),(n=s,Object.values(i()(n,(t=>t.split(":")[0]))).map((t=>t.sort(h))).map((t=>t.pop()))).forEach((t=>{if(t){const[s,n]=t.split(":");e[c[s]]=n}})),e}function y(t){const e=m(t);return{read:[],write:[],admin:[],...l()(r()(e),["read","write","admin"])}}},"./app/views/organizationIntegrations/sentryAppDetailedView.tsx":(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>P});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.array.push.js"),s("./app/actionCreators/indicator.tsx")),r=s("./app/actionCreators/modal.tsx"),o=s("./app/actionCreators/sentryAppInstallations.tsx"),l=s("./app/components/button.tsx"),p=s("./app/components/circleIndicator.tsx"),c=s("./app/components/confirm.tsx"),d=s("./app/components/sentryAppIcon.tsx"),u=s("./app/icons/index.tsx"),g=s("./app/locale.tsx"),h=s("./app/styles/space.tsx"),m=s("./app/utils/consolidatedScopes.tsx"),y=s("./app/utils/integrationUtil.tsx"),x=s("./app/utils/queryString.tsx"),Z=s("./app/utils/recordSentryAppInteraction.tsx"),w=s("./app/utils/withOrganization.tsx"),b=s("./app/views/organizationIntegrations/abstractIntegrationDetailedView.tsx"),A=s("../node_modules/react/index.js"),I=s("./app/components/textCopyInput.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function _(t){const e=(0,A.useRef)(void 0);(0,A.useEffect)((()=>()=>{window.clearTimeout(e.current)}),[]);const s=(0,A.useCallback)((async()=>{await navigator.clipboard.writeText(t.installationId)}),[t.installationId]),n=(0,A.useCallback)((()=>{s(),(0,a.S9)("Copied to clipboard"),window.clearTimeout(e.current),e.current=window.setTimeout((()=>{window.open("https://app.split.io/org/admin/integrations")}),2e3)}),[s]);return(0,f.BX)("div",{children:[(0,f.tZ)(j,{children:"Copy this Installation ID and click to continue. You will use it to finish setup on Split.io."}),(0,f.tZ)(j,{children:(0,f.tZ)(I.ZP,{onCopy:s,children:t.installationId})}),(0,f.BX)(k,{children:[(0,f.tZ)(l.zx,{size:"sm",onClick:t.closeModal,children:"Close"}),(0,f.tZ)(l.zx,{size:"sm",priority:"primary",onClick:n,children:"Copy and Open Link"})]})]})}_.displayName="SplitInstallationIdModal";const j=(0,i.Z)("div",{target:"elewumh1"})({name:"13ubd8d",styles:"margin:10px"}),k=(0,i.Z)(j,{target:"elewumh0"})({name:"99h030",styles:"text-align:right;& button{margin:5px;}"});class v extends b.Z{constructor(){super(...arguments),(0,n.Z)(this,"tabs",["overview"]),(0,n.Z)(this,"redirectUser",(t=>{const{organization:e}=this.props,{sentryApp:s}=this.state,n={installationId:t.uuid,code:t.code,orgSlug:e.slug};if(s.redirectUrl){const t=(0,x.Yi)(s.redirectUrl,n);window.location.assign(t)}})),(0,n.Z)(this,"handleInstall",(async()=>{const{organization:t}=this.props,{sentryApp:e}=this.state;this.trackIntegrationAnalytics("integrations.installation_start",{integration_status:e.status});const s=await(0,o.G)(this.api,t.slug,e);"installed"===s.status&&this.trackIntegrationAnalytics("integrations.installation_complete",{integration_status:e.status}),e.redirectUrl?this.redirectUser(s):((0,a.S9)((0,g.t)("%s successfully installed.",e.slug)),this.setState({appInstalls:[s,...this.state.appInstalls]}),["split","split-dev","split-testing"].includes(e.slug)&&(0,r.openModal)((t=>{let{closeModal:e}=t;return(0,f.tZ)(_,{installationId:s.uuid,closeModal:e})})))})),(0,n.Z)(this,"handleUninstall",(async t=>{try{await(0,o.W)(this.api,t),this.trackIntegrationAnalytics("integrations.uninstall_completed",{integration_status:this.sentryApp.status});const e=this.state.appInstalls.filter((t=>t.app.slug!==this.sentryApp.slug));return this.setState({appInstalls:e})}catch(t){return(0,a.Iw)((0,g.t)("Unable to uninstall %s",this.sentryApp.name))}})),(0,n.Z)(this,"recordUninstallClicked",(()=>{const t=this.sentryApp;this.trackIntegrationAnalytics("integrations.uninstall_clicked",{integration_status:t.status})}))}getEndpoints(){const{organization:t,params:{integrationSlug:e}}=this.props;return[["sentryApp",`/sentry-apps/${e}/`],["featureData",`/sentry-apps/${e}/features/`],["appInstalls",`/organizations/${t.slug}/sentry-app-installations/`]]}onLoadAllEndpointsSuccess(){const{organization:t,params:{integrationSlug:e},router:s}=this.props;"internal"!==this.sentryApp.status?(super.onLoadAllEndpointsSuccess(),(0,Z.E)(e,"sentry_app_viewed")):s.push(`/settings/${t.slug}/developer-settings/${e}/`)}get integrationType(){return"sentry_app"}get sentryApp(){return this.state.sentryApp}get description(){return this.state.sentryApp.overview||""}get author(){return this.sentryApp.author}get resourceLinks(){return"published"!==this.sentryApp.status?[]:[{title:"Documentation",url:`https://docs.sentry.io/product/integrations/${this.integrationSlug}/`}]}get permissions(){return(0,m.A)(this.sentryApp.scopes)}get installationStatus(){return(0,y.Az)(this.install)}get integrationName(){return this.sentryApp.name}get featureData(){return this.state.featureData}get install(){return this.state.appInstalls.find((t=>t.app.slug===this.sentryApp.slug))}renderPermissions(){const t=this.permissions;return Object.keys(t).some((e=>t[e].length>0))?(0,f.BX)(S,{children:[(0,f.tZ)(U,{children:"Permissions"}),t.read.length>0&&(0,f.BX)(C,{children:[(0,f.tZ)(B,{}),(0,f.tZ)(z,{children:(0,g._N)("[read] access to [resources] resources",{read:(0,f.tZ)("strong",{children:"Read"}),resources:t.read.join(", ")})},"read")]}),t.write.length>0&&(0,f.BX)(C,{children:[(0,f.tZ)(B,{}),(0,f.tZ)(z,{children:(0,g._N)("[read] and [write] access to [resources] resources",{read:(0,f.tZ)("strong",{children:"Read"}),write:(0,f.tZ)("strong",{children:"Write"}),resources:t.write.join(", ")})},"write")]}),t.admin.length>0&&(0,f.BX)(C,{children:[(0,f.tZ)(B,{}),(0,f.tZ)(z,{children:(0,g._N)("[admin] access to [resources] resources",{admin:(0,f.tZ)("strong",{children:"Admin"}),resources:t.admin.join(", ")})},"admin")]})]}):null}renderTopButton(t,e){const s=this.install,n=this.integrationSlug.charAt(0).toUpperCase()+this.integrationSlug.slice(1);return s?(0,f.tZ)(c.Z,{disabled:!e,message:(0,g._N)("Are you sure you want to remove the [slug] installation?",{slug:n}),onConfirm:()=>this.handleUninstall(s),onConfirming:this.recordUninstallClicked,priority:"danger",children:(0,f.BX)(T,{size:"sm","data-test-id":"sentry-app-uninstall",children:[(0,f.tZ)(u.JZ,{isCircled:!0,style:{marginRight:(0,h.Z)(.75)}}),(0,g.t)("Uninstall")]})}):e?(0,f.tZ)(E,{"data-test-id":"install-button",disabled:t,onClick:()=>this.handleInstall(),priority:"primary",size:"sm",style:{marginLeft:(0,h.Z)(1)},children:(0,g.t)("Accept & Install")}):this.renderRequestIntegrationButton()}renderConfigurations(){return null}renderIntegrationIcon(){return(0,f.tZ)(d.Z,{sentryApp:this.sentryApp,size:50})}}const z=(0,i.Z)("p",{target:"e7a5cuk6"})({name:"1x9ekz7",styles:"margin:0px 6px"}),C=(0,i.Z)("div",{target:"e7a5cuk5"})({name:"zjik7",styles:"display:flex"}),S=(0,i.Z)("div",{target:"e7a5cuk4"})("padding-bottom:",(0,h.Z)(2),";"),U=(0,i.Z)("p",{target:"e7a5cuk3"})("margin-bottom:",(0,h.Z)(1),";font-weight:bold;"),B=(0,i.Z)((t=>(0,f.tZ)(p.Z,{size:7,...t})),{target:"e7a5cuk2"})("align-self:center;color:",(t=>t.theme.success),";"),E=(0,i.Z)(l.zx,{target:"e7a5cuk1"})("margin-left:",(0,h.Z)(1),";"),T=(0,i.Z)(l.zx,{target:"e7a5cuk0"})("color:",(t=>t.theme.gray300),";background:",(t=>t.theme.background),";border:",(t=>`1px solid ${t.theme.gray300}`),";box-sizing:border-box;box-shadow:0px 2px 1px rgba(0, 0, 0, 0.08);border-radius:4px;"),P=(0,w.Z)(v)},"../node_modules/lodash/invertBy.js":(t,e,s)=>{var n=s("../node_modules/lodash/_baseIteratee.js"),i=s("../node_modules/lodash/_createInverter.js"),a=Object.prototype,r=a.hasOwnProperty,o=a.toString,l=i((function(t,e,s){null!=e&&"function"!=typeof e.toString&&(e=o.call(e)),r.call(t,e)?t[e].push(s):t[e]=[s]}),n);t.exports=l}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationIntegrations_sentryAppDetailedView_tsx.6d2b7c7f486011db6725621e9f783ab3.js.map