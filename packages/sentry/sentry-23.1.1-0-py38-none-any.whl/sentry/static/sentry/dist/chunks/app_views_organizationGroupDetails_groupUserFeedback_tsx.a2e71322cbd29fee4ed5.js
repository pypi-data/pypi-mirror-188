"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupUserFeedback_tsx"],{"./app/views/organizationGroupDetails/groupUserFeedback.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),n=s("../node_modules/lodash/isEqual.js"),a=s.n(n),u=s("./app/components/events/userFeedback.tsx"),c=s("./app/components/layouts/thirds.tsx"),p=s("./app/components/loadingError.tsx"),d=s("./app/components/loadingIndicator.tsx"),l=s("./app/components/pagination.tsx"),h=s("./app/styles/space.tsx"),g=s("./app/utils/withOrganization.tsx"),m=s("./app/views/userFeedback/userFeedbackEmpty.tsx"),f=s("./app/views/organizationGroupDetails/utils.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class w extends i.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{loading:!0,error:!1,reportList:[],pageLinks:""}),(0,o.Z)(this,"fetchData",(()=>{this.setState({loading:!0,error:!1}),(0,f.g5)(this.props.group.id,{...this.props.params,cursor:this.props.location.query.cursor||""}).then((e=>{let[t,s,o]=e;this.setState({error:!1,loading:!1,reportList:t,pageLinks:o?.getResponseHeader("Link")})})).catch((()=>{this.setState({error:!0,loading:!1})}))}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){a()(e.params,this.props.params)&&e.location.pathname===this.props.location.pathname&&e.location.search===this.props.location.search||this.fetchData()}render(){const{reportList:e,loading:t,error:s}=this.state,{organization:o,group:r}=this.props;return t?(0,b.tZ)(d.Z,{}):s?(0,b.tZ)(p.Z,{onRetry:this.fetchData}):e.length?(0,b.tZ)(c.uT,{children:(0,b.BX)(c.or,{children:[e.map(((e,t)=>(0,b.tZ)(_,{report:e,orgId:o.slug,issueId:r.id},t))),(0,b.tZ)(l.Z,{pageLinks:this.state.pageLinks,...this.props})]})}):(0,b.tZ)(c.uT,{children:(0,b.tZ)(c.or,{fullWidth:!0,children:(0,b.tZ)(m.X,{projectIds:[r.project.id]})})})}}w.displayName="GroupUserFeedback";const _=(0,r.Z)(u.o,{target:"ej2wzpl0"})("margin-bottom:",(0,h.Z)(2),";"),k=(0,g.Z)(w)},"./app/views/organizationGroupDetails/utils.tsx":(e,t,s)=>{s.d(t,{Ad:()=>g,M3:()=>f,MN:()=>u,V7:()=>c,dG:()=>d,g5:()=>p,m7:()=>m,sC:()=>h});var o=s("../node_modules/lodash/orderBy.js"),r=s.n(o),i=s("./app/actionCreators/group.tsx"),n=s("./app/api.tsx"),a=s("./app/locale.tsx");async function u(e,t,s,o,r,i){const n="latest"===o||"oldest"===o?`/issues/${s}/events/${o}/`:`/projects/${t}/${i}/events/${o}/?group_id=${s}`,a={};return 0!==r.length&&(a.environment=r),await e.requestPromise(n,{query:a})}function c(e,t,s,o){(0,i.Gv)(e,{orgId:t,projectId:s,itemIds:[o],failSilently:!0,data:{hasSeen:!0}},{})}function p(e,t){return(new n.KU).requestPromise(`/issues/${e}/user-reports/`,{includeAllArgs:!0,query:t})}function d(e){const t=e.tags.find((e=>{let{key:t}=e;return"environment"===t}));return t?t.value:null}const l={commented:(0,a.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,a.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,a.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,a.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,a.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function h(e){if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,a.t)("You have disabled workflow notifications for this project.");if(!e.isSubscribed)return(0,a.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,a.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&l.hasOwnProperty(t))return l[t]}return(0,a.t)("You're receiving updates because you are subscribed to workflow notifications for this project.")}function g(e){return r()([...e],(e=>{let{dateCreated:t}=e;return new Date(t)}),["desc"])[0]}let m;function f(e,t){const{status:s,count:o,activity:r}=e,i=Number(o);switch(s){case"reprocessing":return m.REPROCESSING;case"unresolved":return"reprocess"===(t??g(r))?.type?0===i?m.REPROCESSED_AND_HASNT_EVENT:m.REPROCESSED_AND_HAS_EVENT:m.NO_STATUS;default:return m.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(m||(m={}))}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupUserFeedback_tsx.3958073bd3282c17e4177b806f030a31.js.map