"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_errorPanel_tsx-app_views_performance_landing_widgets_utils_tsx-app_view-99e323"],{"./app/components/charts/chartZoom.tsx":(e,t,a)=>{a.d(t,{Z:()=>T});var s=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/react/index.js")),r=a("../node_modules/moment/moment.js"),i=a.n(r),n=a("../node_modules/query-string/index.js"),l=a("./app/actionCreators/pageFilters.tsx"),d=a("./app/components/charts/components/dataZoomInside.tsx");a("../node_modules/echarts/lib/component/dataZoomSlider.js");const p={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function c(e){return e&&Array.isArray(e)?e:[{...p,...e}]}var m=a("./app/components/charts/components/toolBox.tsx"),u=a("./app/utils/callIfFunction.tsx"),h=a("./app/utils/dates.tsx");const _=e=>e?i().utc(e).format(i().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class f extends o.Component{constructor(e){var t;super(e),t=this,(0,s.Z)(this,"history",void 0),(0,s.Z)(this,"currentPeriod",void 0),(0,s.Z)(this,"zooming",null),(0,s.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:_(e.start),end:_(e.end)}})),(0,s.Z)(this,"setPeriod",(function(e){let{period:a,start:s,end:o}=e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:i,onZoom:d,usePageDate:p}=t.props,c=_(s),m=_(o);r&&t.history.push(t.currentPeriod),d?.({period:a,start:c,end:m}),t.zooming=()=>{if(p&&i){const e={...i.location.query,pageStart:s?(0,h.v5)(s):void 0,pageEnd:o?(0,h.v5)(o):void 0,pageStatsPeriod:a??void 0};n.stringify(e)!==n.stringify(i.location.query)&&i.push({pathname:i.location.pathname,query:e})}else(0,l.dR)({period:a,start:c?(0,h.hC)(c):c,end:m?(0,h.hC)(m):m},i);t.saveCurrentPeriod({period:a,start:s,end:o})}})),(0,s.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,s.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,s.Z)(this,"handleDataZoom",((e,t)=>{const a=t.getModel(),{startValue:s,endValue:o}=a._payload.batch[0];if(null===s&&null===o){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=i().utc(s),t=i().utc(o);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,s.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const a=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));a&&!a._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,u.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:a,disabled:s,children:o,xAxisIndex:r,router:i,onZoom:n,onRestore:l,onChartReady:p,onDataZoom:u,onFinished:_,showSlider:f,chartZoomOptions:T,...g}=this.props,S=e??void 0,A=t?(0,h.hC)(t):void 0,y=a?(0,h.hC)(a):void 0;return o(s?{utc:S,start:A,end:y,...g}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:S,start:A,end:y,dataZoom:f?[...c({xAxisIndex:r,...T}),...(0,d.Z)({xAxisIndex:r,...T})]:(0,d.Z)({xAxisIndex:r,...T}),showTimeInTooltip:!0,toolBox:(0,m.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...g})}}f.displayName="ChartZoom";const T=f},"./app/components/charts/components/dataZoomInside.tsx":(e,t,a)=>{a.d(t,{Z:()=>o}),a("../node_modules/echarts/lib/component/dataZoomInside.js");const s={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function o(e){return e&&Array.isArray(e)?e:[{...s,...e}]}},"./app/components/charts/components/markArea.tsx":(e,t,a)=>{function s(e){return{...e}}a.d(t,{Z:()=>s}),a("../node_modules/echarts/lib/component/markArea.js")},"./app/components/charts/components/toolBox.tsx":(e,t,a)=>{function s(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function o(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:s(t),...e}}a.d(t,{Z:()=>o})},"./app/components/charts/errorPanel.tsx":(e,t,a)=>{a.d(t,{Z:()=>s});const s=(0,a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1t1x7f30"})("display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1;flex-shrink:0;overflow:hidden;height:",(e=>e.height||"200px"),";position:relative;border-color:transparent;margin-bottom:0;color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeExtraLarge),";")},"./app/components/charts/lineChart.tsx":(e,t,a)=>{a.d(t,{w:()=>i});var s=a("./app/components/charts/series/lineSeries.tsx"),o=a("./app/components/charts/baseChart.tsx"),r=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{series:t,seriesOptions:a,...i}=e;return(0,r.tZ)(o.Z,{...i,series:t.map((e=>{let{seriesName:t,data:o,dataArray:r,...i}=e;return(0,s.Z)({...a,...i,name:t,data:r||o?.map((e=>{let{value:t,name:a}=e;return[a,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}i.displayName="LineChart"},"./app/components/events/searchBar.tsx":(e,t,a)=>{a.d(t,{Z:()=>D}),a("../node_modules/core-js/modules/es.error.cause.js"),a("../node_modules/core-js/modules/es.array.includes.js");var s=a("../node_modules/react/index.js"),o=a("../node_modules/@sentry/core/esm/exports.js"),r=a("../node_modules/lodash/assign.js"),i=a.n(r),n=a("../node_modules/lodash/flatten.js"),l=a.n(n),d=a("../node_modules/lodash/memoize.js"),p=a.n(d),c=a("../node_modules/lodash/omit.js"),m=a.n(c),u=a("./app/actionCreators/tags.tsx"),h=a("./app/components/smartSearchBar/index.tsx"),_=a("./app/constants/index.tsx"),f=a("./app/types/index.tsx"),T=a("./app/utils.tsx"),g=a("./app/utils/discover/fields.tsx"),S=a("./app/utils/fields/index.ts"),A=a("./app/utils/measurements/measurements.tsx"),y=a("./app/utils/useApi.tsx"),x=a("./app/utils/withTags.tsx"),R=a("./app/views/dashboards/utils.tsx"),v=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const O=new RegExp(`^${_.c$}|\\${_.ir}`,"g"),w=new Set(Object.keys(g.wZ)),Z=Object.keys(g.wZ).reduce(((e,t)=>(e[t]={...g.wZ[t],kind:S.IV.FIELD},e)),{}),E=m()(Z,g.J8),P=g.$4.reduce(((e,t)=>(e[t]={name:t,kind:S.IV.METRICS},e)),{}),I=Object.keys(g.jg).reduce(((e,t)=>(e[t]={...g.jg[t],kind:S.IV.FIELD},e)),{});function C(e){const{maxSearchItems:t,organization:a,tags:r,omitTags:n,fields:d,projectIds:c,includeSessionTagsValues:_,maxMenuHeight:x,customMeasurements:C}=e,D=(0,y.Z)(),b=(0,s.useRef)(!1),L=(0,s.useMemo)((()=>(e=>e?.length?e.reduce(((e,t)=>(w.has(t.field)||(0,g.GO)(t.field)||(0,R.nk)(t.field)||(e[t.field]={key:t.field,name:t.field,kind:S.IV.FUNCTION}),e)),{}):[])(d)),[d]),M=(0,s.useMemo)((()=>Object.keys(r).reduce(((e,t)=>(e[t]={...r[t],kind:S.IV.TAG},e)),{})),[r]);(0,s.useEffect)((()=>{j.cache.clear?.()}),[c]);const j=p()(((e,t,s)=>{const o=c?.map(String);return(0,g.h1)(e.key)||(0,g.Xr)(e.key)?Promise.resolve([]):(0,u.Fo)({api:D,orgSlug:a.slug,tagKey:e.key,search:t,projectIds:o,endpointParams:s,includeTransactions:!0,includeSessions:_}).then((e=>l()(e.filter((e=>{let{name:t}=e;return(0,T.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:a}=e;return`${a}-${t}`})),$=e=>{let t;!b.current&&Object.keys(r).length>0&&(t=o.Yr({name:"SearchBar.getTagList"}),b.current=!0);const s=((e,t)=>{const a=Object.keys(e).reduce(((t,a)=>(t[a]={...e[a],kind:S.IV.MEASUREMENT},t)),{});return t?Object.keys(t).reduce(((e,a)=>(e[a]={...t[a],kind:S.IV.MEASUREMENT},e)),a):a})(e,C),l=a.features.includes("performance-view")?Object.assign({},s,L,P,Z):Object.assign({},E);i()(l,M,Z,I),l.has={key:S.Sh.HAS,name:"Has property",values:Object.keys(l).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),predefined:!0,kind:S.IV.FIELD};const d=n&&n.length>0?m()(l,n):l;if(t){const e=Object.keys(d).length;t.setTag("tags.totalCount",e);const a=[1,5,10,20,50,100,200,300,400,500,600,700,800,900,1e3,1e4].find((t=>e<=t));t.setTag("tags.totalCount.grouped",`<=${a}`),t.finish()}return d};return(0,v.tZ)(A.Z,{children:a=>{let{measurements:s}=a;return(0,v.tZ)(h.Z,{hasRecentSearches:!0,savedSearchType:f.L4.EVENT,onGetTagValues:j,supportedTags:$(s),prepareQuery:e=>e.replace(O,""),maxSearchItems:t,excludedTags:[S.Sh.ENVIRONMENT,S.Sh.TOTAL_COUNT],maxMenuHeight:x??300,customPerformanceMetrics:C,...e})}})}C.displayName="SearchBar";const D=(0,x.Z)(C)},"./app/components/gridEditable/sortLink.tsx":(e,t,a)=>{a.d(t,{Z:()=>h});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=a("../node_modules/react-router/es/index.js"),r=a("../node_modules/lodash/omit.js"),i=a.n(r),n=a("./app/components/links/link.tsx"),l=a("./app/icons/index.tsx"),d=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{align:t,title:a,canSort:s,generateSortLink:r,onClick:i,direction:n,replace:l}=e;const p=r();if(!p||!s)return(0,d.tZ)(m,{align:t,children:a});const h=n?(0,d.tZ)(u,{size:"xs",direction:"desc"===n?"down":"up"}):null;return(0,d.BX)(c,{align:t,to:p,onClick:e=>{l&&(e.preventDefault(),o.browserHistory.replace(p)),i?.(e)},children:[a," ",h]})}p.displayName="SortLink";const c=(0,s.Z)((e=>{const t=i()(e,["align","css"]);return(0,d.tZ)(n.Z,{...t})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),m=(0,s.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),u=(0,s.Z)(l.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),h=p},"./app/utils/performance/anomalies/anomaliesQuery.tsx":(e,t,a)=>{a.d(t,{Z:()=>d}),a("../node_modules/core-js/modules/es.array.includes.js");var s=a("./app/utils/discover/genericDiscoverQuery.tsx"),o=a("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx"),r=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){return e.data.forEach((e=>e[0]=1e3*e[0])),e}function n(e){const t={...e};return e.y&&e.yhat_lower&&e.yhat_upper&&e.anomalies?(t.y=i(e.y),t.yhat_upper=i(e.yhat_upper),t.yhat_lower=i(e.yhat_lower),t.anomalies=((a=e.anomalies).forEach((e=>{e.start=1e3*e.start,e.end=1e3*e.end})),a),t):t;var a}function l(e){return e.organization.features.includes(o.uT)?(0,r.tZ)(s.ZP,{route:"transaction-anomaly-detection",...e,children:t=>{let{tableData:a,...s}=t;return e.children({data:a&&a.y?n(a):null,...s})}}):(0,r.tZ)("div",{children:e.children({data:null,isLoading:!1,error:null,pageLinks:null})})}l.displayName="AnomaliesSeriesQuery";const d=l},"./app/utils/withTags.tsx":(e,t,a)=>{a.d(t,{Z:()=>l});var s=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=a("../node_modules/react/index.js"),r=a("./app/stores/tagStore.tsx"),i=a("./app/utils/getDisplayName.tsx"),n=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends o.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{tags:r.Z.getState()}),(0,s.Z)(this,"unsubscribe",r.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...a}=this.props;return(0,n.tZ)(e,{tags:t??this.state.tags,...a})}}return t.displayName="WithTags",(0,s.Z)(t,"displayName",`withTags(${(0,i.Z)(e)})`),t}},"./app/views/performance/landing/widgets/types.tsx":(e,t,a)=>{let s,o;a.d(t,{A:()=>o}),function(e){e.ERROR="error",e.LOADING="loading",e.EMPTY="empty",e.DATA="data"}(s||(s={})),function(e){e.histogram="histogram",e.area="area",e.vitals="vitals",e.line_list="line_list",e.trends="trends",e.stacked_bars="stacked_bars"}(o||(o={}))},"./app/views/performance/landing/widgets/utils.tsx":(e,t,a)=>{a.d(t,{CJ:()=>n,I2:()=>c,gM:()=>d,hD:()=>g,rp:()=>_,zM:()=>f,zS:()=>p}),a("../node_modules/core-js/modules/es.array.includes.js");var s=a("./app/utils.tsx"),o=a("./app/utils/localStorage.tsx"),r=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),i=a("./app/views/performance/landing/widgets/widgetDefinitions.tsx");const n=["children","organization","yAxis","period","start","end","environment","project","referrer"],l={};function d(e){let t={};const a=l;return e.shouldQueryProvideMEPAutoParams&&(t={...t,...a,dataset:"metricsEnhanced"}),e.shouldQueryProvideMEPTransactionParams&&(t={...t,...a,dataset:"discover"}),e.shouldQueryProvideMEPMetricParams&&(t={...t,...a,dataset:"metrics"}),(0,s.z)(t)?void 0:t}const p=[i.s.MOST_RELATED_ERRORS,i.s.MOST_RELATED_ISSUES];function c(e,t){if(!p.includes(t))return d(e)}const m="landing-chart-container",u=(e,t,a)=>`landing-chart-container#${t}#${a}#${e}`;function h(){return JSON.parse(o.Z.getItem(m)||"{}")}const _=(e,t,a,s,o)=>{if(o)return s;const r=u(e,a,t),n=h()?.[r];return n&&Object.values(i.s).includes(n)?n:s},f=(e,t,a,s)=>{const r=u(e,a,t),i=h();i[r]=s,function(e){o.Z.setItem(m,JSON.stringify(e))}(i)},T=[i.s.DURATION_HISTOGRAM,i.s.FCP_HISTOGRAM,i.s.LCP_HISTOGRAM,i.s.FID_HISTOGRAM];function g(e,t,a){return!(0,r.gp)(e)||e.features.includes("performance-mep-reintroduce-histograms")||a.metricSettingState===r.oR.transactionsOnly?t:t.filter((e=>!T.includes(e)))}},"./app/views/performance/landing/widgets/widgetDefinitions.tsx":(e,t,a)=>{a.d(t,{W:()=>p,s:()=>l});var s=a("./app/constants/chartPalette.tsx"),o=a("./app/locale.tsx"),r=a("./app/utils/discover/fields.tsx"),i=a("./app/views/performance/data.tsx"),n=a("./app/views/performance/landing/widgets/types.tsx");let l;!function(e){e.DURATION_HISTOGRAM="duration_histogram",e.LCP_HISTOGRAM="lcp_histogram",e.FCP_HISTOGRAM="fcp_histogram",e.FID_HISTOGRAM="fid_histogram",e.APDEX_AREA="apdex_area",e.P50_DURATION_AREA="p50_duration_area",e.P75_DURATION_AREA="p75_duration_area",e.P95_DURATION_AREA="p95_duration_area",e.P99_DURATION_AREA="p99_duration_area",e.P75_LCP_AREA="p75_lcp_area",e.TPM_AREA="tpm_area",e.FAILURE_RATE_AREA="failure_rate_area",e.USER_MISERY_AREA="user_misery_area",e.WORST_LCP_VITALS="worst_lcp_vitals",e.WORST_FCP_VITALS="worst_fcp_vitals",e.WORST_CLS_VITALS="worst_cls_vitals",e.WORST_FID_VITALS="worst_fid_vitals",e.MOST_IMPROVED="most_improved",e.MOST_REGRESSED="most_regressed",e.MOST_RELATED_ERRORS="most_related_errors",e.MOST_RELATED_ISSUES="most_related_issues",e.SLOW_HTTP_OPS="slow_http_ops",e.SLOW_DB_OPS="slow_db_ops",e.SLOW_RESOURCE_OPS="slow_resource_ops",e.SLOW_BROWSER_OPS="slow_browser_ops",e.COLD_STARTUP_AREA="cold_startup_area",e.WARM_STARTUP_AREA="warm_startup_area",e.SLOW_FRAMES_AREA="slow_frames_area",e.FROZEN_FRAMES_AREA="frozen_frames_area",e.MOST_SLOW_FRAMES="most_slow_frames",e.MOST_FROZEN_FRAMES="most_frozen_frames",e.SPAN_OPERATIONS="span_operations"}(l||(l={}));const d=s.Z[5],p=e=>{let{organization:t}=e;return{[l.DURATION_HISTOGRAM]:{title:(0,o.t)("Duration Distribution"),titleTooltip:(0,i.$r)(t,i.V$.DURATION_DISTRIBUTION),fields:["transaction.duration"],dataType:n.A.histogram,chartColor:d[5]},[l.LCP_HISTOGRAM]:{title:(0,o.t)("LCP Distribution"),titleTooltip:(0,i.$r)(t,i.V$.DURATION_DISTRIBUTION),fields:["measurements.lcp"],dataType:n.A.histogram,chartColor:d[5]},[l.FCP_HISTOGRAM]:{title:(0,o.t)("FCP Distribution"),titleTooltip:(0,i.$r)(t,i.V$.DURATION_DISTRIBUTION),fields:["measurements.fcp"],dataType:n.A.histogram,chartColor:d[5]},[l.FID_HISTOGRAM]:{title:(0,o.t)("FID Distribution"),titleTooltip:(0,i.$r)(t,i.V$.DURATION_DISTRIBUTION),fields:["measurements.fid"],dataType:n.A.histogram,chartColor:d[5]},[l.WORST_LCP_VITALS]:{title:(0,o.t)("Worst LCP Web Vitals"),titleTooltip:(0,i.$r)(t,i.V$.LCP),fields:["measurements.lcp"],vitalStops:{poor:4e3,meh:2500},dataType:n.A.vitals},[l.WORST_FCP_VITALS]:{title:(0,o.t)("Worst FCP Web Vitals"),titleTooltip:(0,i.$r)(t,i.V$.FCP),fields:["measurements.fcp"],vitalStops:{poor:3e3,meh:1e3},dataType:n.A.vitals},[l.WORST_FID_VITALS]:{title:(0,o.t)("Worst FID Web Vitals"),titleTooltip:(0,i.$r)(t,i.V$.FID),fields:["measurements.fid"],vitalStops:{poor:300,meh:100},dataType:n.A.vitals},[l.WORST_CLS_VITALS]:{title:(0,o.t)("Worst CLS Web Vitals"),titleTooltip:(0,i.$r)(t,i.V$.CLS),fields:["measurements.cls"],vitalStops:{poor:.25,meh:.1},dataType:n.A.vitals},[l.TPM_AREA]:{title:(0,o.t)("Transactions Per Minute"),titleTooltip:(0,i.$r)(t,i.V$.TPM),fields:["tpm()"],dataType:n.A.area,chartColor:d[1],allowsOpenInDiscover:!0},[l.APDEX_AREA]:{title:(0,o.t)("Apdex"),titleTooltip:(0,i.$r)(t,i.V$.APDEX),fields:["apdex()"],dataType:n.A.area,chartColor:d[4],allowsOpenInDiscover:!0},[l.P50_DURATION_AREA]:{title:(0,o.t)("p50 Duration"),titleTooltip:(0,i.$r)(t,i.V$.P50),fields:["p50(transaction.duration)"],dataType:n.A.area,chartColor:d[3],allowsOpenInDiscover:!0},[l.P75_DURATION_AREA]:{title:(0,o.t)("p75 Duration"),titleTooltip:(0,i.$r)(t,i.V$.P75),fields:["p75(transaction.duration)"],dataType:n.A.area,chartColor:d[3],allowsOpenInDiscover:!0},[l.P95_DURATION_AREA]:{title:(0,o.t)("p95 Duration"),titleTooltip:(0,i.$r)(t,i.V$.P95),fields:["p95(transaction.duration)"],dataType:n.A.area,chartColor:d[3],allowsOpenInDiscover:!0},[l.P99_DURATION_AREA]:{title:(0,o.t)("p99 Duration"),titleTooltip:(0,i.$r)(t,i.V$.P99),fields:["p99(transaction.duration)"],dataType:n.A.area,chartColor:d[3],allowsOpenInDiscover:!0},[l.P75_LCP_AREA]:{title:(0,o.t)("p75 LCP"),titleTooltip:(0,i.$r)(t,i.V$.P75),fields:["p75(measurements.lcp)"],dataType:n.A.area,chartColor:d[1],allowsOpenInDiscover:!0},[l.FAILURE_RATE_AREA]:{title:(0,o.t)("Failure Rate"),titleTooltip:(0,i.$r)(t,i.V$.FAILURE_RATE),fields:["failure_rate()"],dataType:n.A.area,chartColor:d[2],allowsOpenInDiscover:!0},[l.USER_MISERY_AREA]:{title:(0,o.t)("User Misery"),titleTooltip:(0,i.$r)(t,i.V$.USER_MISERY),fields:["user_misery()"],dataType:n.A.area,chartColor:d[0],allowsOpenInDiscover:!0},[l.COLD_STARTUP_AREA]:{title:(0,o.t)("Cold Startup Time"),titleTooltip:(0,i.$r)(t,i.V$.APP_START_COLD),fields:["p75(measurements.app_start_cold)"],dataType:n.A.area,chartColor:d[4],allowsOpenInDiscover:!0},[l.WARM_STARTUP_AREA]:{title:(0,o.t)("Warm Startup Time"),titleTooltip:(0,i.$r)(t,i.V$.APP_START_WARM),fields:["p75(measurements.app_start_warm)"],dataType:n.A.area,chartColor:d[3],allowsOpenInDiscover:!0},[l.SLOW_FRAMES_AREA]:{title:(0,o.t)("Slow Frames"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_FRAMES),fields:["p75(measurements.frames_slow_rate)"],dataType:n.A.area,chartColor:d[0],allowsOpenInDiscover:!0},[l.FROZEN_FRAMES_AREA]:{title:(0,o.t)("Frozen Frames"),titleTooltip:(0,i.$r)(t,i.V$.FROZEN_FRAMES),fields:["p75(measurements.frames_frozen_rate)"],dataType:n.A.area,chartColor:d[5],allowsOpenInDiscover:!0},[l.MOST_RELATED_ERRORS]:{title:(0,o.t)("Most Related Errors"),titleTooltip:(0,i.$r)(t,i.V$.MOST_ERRORS),fields:["failure_count()"],dataType:n.A.line_list,chartColor:d[0]},[l.MOST_RELATED_ISSUES]:{title:(0,o.t)("Most Related Issues"),titleTooltip:(0,i.$r)(t,i.V$.MOST_ISSUES),fields:["count()"],dataType:n.A.line_list,chartColor:d[0]},[l.SLOW_HTTP_OPS]:{title:(0,o.t)("Slow HTTP Ops"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.http)"],dataType:n.A.line_list,chartColor:d[0]},[l.SLOW_BROWSER_OPS]:{title:(0,o.t)("Slow Browser Ops"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.browser)"],dataType:n.A.line_list,chartColor:d[0]},[l.SLOW_RESOURCE_OPS]:{title:(0,o.t)("Slow Resource Ops"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.resource)"],dataType:n.A.line_list,chartColor:d[0]},[l.SLOW_DB_OPS]:{title:(0,o.t)("Slow DB Ops"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.db)"],dataType:n.A.line_list,chartColor:d[0]},[l.MOST_SLOW_FRAMES]:{title:(0,o.t)("Most Slow Frames"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_FRAMES),fields:["avg(measurements.frames_slow)"],dataType:n.A.line_list,chartColor:d[0]},[l.MOST_FROZEN_FRAMES]:{title:(0,o.t)("Most Frozen Frames"),titleTooltip:(0,i.$r)(t,i.V$.FROZEN_FRAMES),fields:["avg(measurements.frames_frozen)"],dataType:n.A.line_list,chartColor:d[0]},[l.MOST_IMPROVED]:{title:(0,o.t)("Most Improved"),titleTooltip:(0,o.t)("This compares the baseline (%s) of the past with the present.","improved"),fields:[],dataType:n.A.trends},[l.MOST_REGRESSED]:{title:(0,o.t)("Most Regressed"),titleTooltip:(0,o.t)("This compares the baseline (%s) of the past with the present.","regressed"),fields:[],dataType:n.A.trends},[l.SPAN_OPERATIONS]:{title:(0,o.t)("Span Operations"),titleTooltip:"",fields:r.$4.map((e=>`p75(${e})`)),dataType:n.A.stacked_bars}}}},"./app/views/performance/transactionSummary/transactionAnomalies/index.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>pe});var s=a("./app/locale.tsx"),o=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),r=a("./app/utils/withOrganization.tsx"),i=a("./app/utils/withProjects.tsx"),n=a("./app/views/performance/transactionSummary/pageLayout.tsx"),l=a("./app/views/performance/transactionSummary/tabs.tsx"),d=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/react/index.js")),c=a("../node_modules/react-router/es/index.js"),m=a("../node_modules/lodash/omit.js"),u=a.n(m),h=a("./app/components/charts/components/markArea.tsx"),_=a("./app/components/charts/components/markLine.tsx"),f=a("./app/components/datePageFilter.tsx"),T=a("./app/components/environmentPageFilter.tsx"),g=a("./app/components/events/searchBar.tsx"),S=a("./app/components/layouts/thirds.tsx"),A=a("./app/components/organizations/pageFilterBar.tsx"),y=a("./app/components/organizations/pageFilters/parse.tsx"),x=a("./app/styles/space.tsx"),R=a("./app/utils.tsx"),v=a("./app/utils/performance/anomalies/anomaliesQuery.tsx"),O=a("./app/utils/queryString.tsx"),w=a("./app/utils/theme.tsx"),Z=a("./app/views/performance/landing/widgets/components/performanceWidget.tsx"),E=a("./app/views/performance/landing/widgets/components/selectableList.tsx"),P=a("./app/views/performance/landing/widgets/widgetDefinitions.tsx"),I=a("./app/components/count.tsx"),C=a("./app/components/gridEditable/index.tsx"),D=a("./app/components/gridEditable/sortLink.tsx"),b=a("./app/icons/index.tsx"),L=a("./app/utils/discover/fieldRenderers.tsx"),M=a("./app/utils/discover/fields.tsx"),j=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const $=e=>({anomaly:`#${e.id}`,confidence:e.confidence,timestamp:new Date(e.start),timeInterval:e.end-e.start,expected:e.expected,received:e.received});function k(e){const{location:t,organization:a,isLoading:s,anomalies:o}=e,r=o?.map($)||[];return(0,j.tZ)(C.ZP,{isLoading:s,data:r,columnOrder:Object.values(H),columnSortBy:[],grid:{renderHeadCell:N,renderBodyCell:F(t,a)},location:t})}function N(e,t){const a=(0,M.qG)(e.key,B[e.key]);return(0,j.tZ)(D.Z,{title:e.name,align:a,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function F(e,t){return(a,o)=>{const r=(0,L.Js)(a.key,B);return"confidence"===a.key?(0,j.tZ)(U,{children:"low"===o.confidence?(0,j.tZ)(z,{children:(0,s.t)("Low Confidence")}):(0,j.tZ)(W,{children:(0,s.t)("High Confidence")})}):"expected"===a.key?(0,j.tZ)(V,{children:(0,j.tZ)(I.Z,{value:o.expected})}):"received"===a.key?(0,j.BX)(V,{children:[(0,j.tZ)(I.Z,{value:o.received}),(0,j.tZ)(b.CC,{size:"sm",direction:o.received>o.expected?"up":"down"})]}):r(o,{location:e,organization:t})}}k.displayName="AnomaliesTable",N.displayName="renderHeadCell";const V=(0,d.Z)("div",{target:"e1f42zpu3"})("display:flex;justify-content:flex-end;align-items:center;gap:",(0,x.Z)(.5),";"),z=(0,d.Z)("div",{target:"e1f42zpu2"})("color:",(e=>e.theme.yellow400),";"),W=(0,d.Z)("div",{target:"e1f42zpu1"})("color:",(e=>e.theme.red400),";"),U=(0,d.Z)("div",{target:"e1f42zpu0"})({name:"1qetfgc",styles:"text-align:left;justify-self:flex-end;flex-grow:1"}),H={anomaly:{key:"anomaly",name:(0,s.t)("Anomaly"),width:C.z7},confidence:{key:"confidence",name:(0,s.t)("Confidence"),width:C.z7},timeInterval:{key:"timeInterval",name:(0,s.t)("Time Interval"),width:C.z7},timestamp:{key:"timestamp",name:(0,s.t)("Timestamp"),width:C.z7},expected:{key:"expected",name:(0,s.t)("Expected"),width:C.z7},received:{key:"received",name:(0,s.t)("Received"),width:C.z7}},B={anomaly:"string",confidence:"string",timeInterval:"duration",timestamp:"date",expected:"number",received:"number"};var G=a("./app/components/charts/chartZoom.tsx"),q=a("./app/components/charts/lineChart.tsx"),X=a("./app/utils/dates.tsx"),Q=a("./app/utils/discover/charts.tsx"),J=a("./app/utils/useLocation.tsx"),Y=a("./app/utils/useRouter.tsx");function K(e){const t=(0,Y.Z)(),a=(0,J.T)(),{data:o,statsPeriod:r,height:i,start:n,end:l}=e,d=n?(0,X.hC)(n):null,p=l?(0,X.hC)(l):null,{utc:c}=(0,y.fK)(a.query),m={legend:{right:10,top:5,data:[(0,s.t)("High Confidence"),(0,s.t)("Low Confidence")]},seriesOptions:{showSymbol:!1},height:i,tooltip:{trigger:"axis",valueFormatter:(e,t)=>(0,Q.CX)(e,(0,M.Px)(t))},xAxis:void 0,yAxis:{axisLabel:{formatter:e=>(0,Q.gu)(e,"number")}}};return(0,j.tZ)(G.Z,{router:t,period:r,start:d,end:p,utc:"true"===c,children:e=>(0,j.tZ)(q.w,{...e,series:o,...m})})}K.displayName="AnomalyChart";const ee=e=>`#${e.id}`,te=e=>[{name:ee(e),xAxis:e.start},{xAxis:e.end}],ae=(e,t)=>{const a=[],s=t.data;if(!s)return{isLoading:t.isLoading,isErrored:!!t.error,data:void 0,hasData:!1,loading:t.isLoading};a.push({seriesName:"tpm()",data:s.y.data.map((e=>{let[t,[{count:a}]]=e;return{name:t,value:a}}))}),a.push({seriesName:"tpm() lower bound",data:s.yhat_lower.data.map((e=>{let[t,[{count:a}]]=e;return{name:t,value:a}}))}),a.push({seriesName:"tpm() upper bound",data:s.yhat_upper.data.map((e=>{let[t,[{count:a}]]=e;return{name:t,value:a}}))});const o=t.data.anomalies,r=o.filter((e=>"high"===e.confidence)).map(te),i=o.filter((e=>"high"===e.confidence)).map((e=>({xAxis:e.start,name:ee(e)}))),n=o.filter((e=>"low"===e.confidence)).map(te),l=o.filter((e=>"low"===e.confidence)).map((e=>({xAxis:e.start,name:ee(e)})));return a.push({seriesName:"High Confidence",color:w.ZP.red300,data:[],silent:!0,markLine:(0,_.Z)({animation:!1,lineStyle:{color:w.ZP.red300,type:"solid",width:1,opacity:1},data:i,label:{show:!0,rotate:90,color:w.ZP.red300,position:"insideEndBottom",fontSize:"10",offset:[5,5],formatter:e=>`${e.data.name}`}}),markArea:(0,h.Z)({itemStyle:{color:w.ZP.red300,opacity:.2},label:{show:!1},data:r})}),a.push({seriesName:"Low Confidence",color:w.ZP.yellow200,data:[],markLine:(0,_.Z)({animation:!1,lineStyle:{color:w.ZP.yellow200,type:"solid",width:1,opacity:1},data:l,label:{show:!0,rotate:90,color:w.ZP.yellow300,position:"insideEndBottom",fontSize:"10",offset:[5,5],formatter:e=>`${e.data.name}`}}),markArea:(0,h.Z)({itemStyle:{color:w.ZP.yellow200,opacity:.2},label:{show:!1},data:n})}),{isLoading:t.isLoading,isErrored:!!t.error,data:a,hasData:!0,loading:t.isLoading}};function se(e){const t=w.ZP.charts.colors[0],a=(0,p.useMemo)((()=>({fields:"",component:t=>(0,j.tZ)(p.Fragment,{children:t.children(e.queryData)}),transform:ae})),[e.queryData]);return(0,j.tZ)(Z.I,{...e,title:(0,s.t)("Transaction Count"),titleTooltip:(0,s.t)("Represents transaction count across time, with added visualizations to highlight anomalies in your data."),fields:[""],chartSetting:P.s.TPM_AREA,chartDefinition:P.W[P.s.TPM_AREA],Subtitle:()=>(0,j.tZ)("div",{}),HeaderActions:()=>(0,j.tZ)("div",{}),EmptyComponent:E.xq,Queries:{chart:a},Visualizations:[{component:e=>{const a=e.widgetData.chart.data?.map((e=>("tpm()"!==e.seriesName&&(e.lineStyle={type:"dashed",color:t,width:1.5}),"score"===e.seriesName&&(e.lineStyle={color:w.ZP.red400}),e)))??[];return(0,j.tZ)(K,{...e,data:a,height:250,statsPeriod:void 0,start:null,end:null})},height:250}]})}function oe(e){const{location:t,organization:a,eventView:s}=e,o=(0,O.ro)(t.query.query,"");return(0,j.BX)(S.or,{fullWidth:!0,children:[(0,j.BX)(re,{children:[(0,j.BX)(A.Z,{condensed:!0,children:[(0,j.tZ)(T.Z,{}),(0,j.tZ)(f.Z,{alignDropdown:"left"})]}),(0,j.tZ)(g.Z,{organization:a,projectIds:s.project,query:o,fields:s.fields,onSearch:(r="query",function(e){const a=(0,y.fK)({...t.query||{},[r]:e}),s=["cursor"];(0,R.ri)(e)||s.push(r);const o=u()(a,s);c.browserHistory.push({...t,query:o})})})]}),(0,j.tZ)(v.Z,{organization:a,location:t,eventView:s,children:t=>(0,j.BX)(p.Fragment,{children:[(0,j.tZ)(se,{...e,queryData:t}),(0,j.tZ)(k,{anomalies:t.data?.anomalies,...e,isLoading:t.isLoading})]})})]});var r}se.displayName="Anomalies",oe.displayName="AnomaliesContent";const re=(0,d.Z)("div",{target:"e1mll81g0"})("display:grid;gap:",(0,x.Z)(2),";margin-bottom:",(0,x.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:auto 1fr;}"),ie=oe;var ne=a("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx");function le(e){const{location:t,organization:a,projects:s}=e;return(0,j.tZ)(o.kP,{children:(0,j.tZ)(n.ZP,{location:t,organization:a,projects:s,tab:l.Z.Anomalies,generateEventView:ne.h2,getDocumentTitle:de,childComponent:ie})})}function de(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,s.t)("Performance")].join(" - "):[(0,s.t)("Summary"),(0,s.t)("Performance")].join(" - ")}le.displayName="TransactionAnomalies";const pe=(0,i.Z)((0,r.Z)(le))}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_errorPanel_tsx-app_views_performance_landing_widgets_utils_tsx-app_view-99e323.adca6b8b57fb416f1d777ac5c9b7d82e.js.map