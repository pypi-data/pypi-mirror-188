{"version":3,"file":"chunks/app_views_organizationGroupDetails_groupEvents_tsx-app_views_performance_transactionSummary_u-f2c8cb.xxxxxxxxxxxxxxxxxxxx.js","mappings":"qYAUO,SAASA,EAAgB,GAQ7B,IARgD,cACjDC,EAAa,YACbC,EAAW,YACXC,GAKD,EACC,MAAMC,EAAgBH,EAAcI,MAClCC,QAAsCC,IAA7BL,EAAYM,MAAMF,KAG7B,GAAIJ,EAAYO,WAAaN,IAAgBC,EAC3C,OAKF,MAAMI,EAAQP,EAAcS,QAC1B,CAACC,EAAUL,KACTK,EAASL,QAASC,EACXI,IAET,IAAIT,EAAYM,QAGlBI,EAAAA,eAAAA,QAAuB,CACrBH,SAAUP,EAAYO,SACtBD,SAEJ,CAqBA,QAnBA,SAAyC,GAAuB,IAAvB,cAACP,GAAoB,EAC5D,MAAMY,GAAWC,EAAAA,EAAAA,KAEXC,GAAeC,EAAAA,EAAAA,cACnBd,IACEF,EAAiB,CACfC,gBACAC,cACAC,YAAaU,EAASJ,UACtB,GAEJ,CAACI,EAASJ,SAAUR,KAGtBgB,EAAAA,EAAAA,YAAU,IACDL,EAAAA,eAAAA,OAAsBG,IAC5B,CAACA,GACN,C,6sCCxCA,MAAMG,EAAkBC,IACtB,MAAM,SAACN,EAAQ,aAAEO,EAAY,QAAEC,EAAO,aAAEC,EAAY,MAAEC,GAASJ,GACxDK,EAAOC,IAAYC,EAAAA,EAAAA,UAAiB,IACrCC,GAASC,EAAAA,EAAAA,MACT,OAACC,EAAM,aAAEC,GAAgBC,EAAWR,EAAOH,GAE3CY,EAAuBC,EAAAA,GAAAA,aAAuBd,EAAMN,UAC1DmB,EAAUH,OAASA,EAAOK,KAAIC,IAAa,CAAE7B,MAAO6B,MAEpDH,EAAUI,OAAQC,EAAAA,EAAAA,IAAYxB,GAAUyB,QAAOC,GAAQV,EAAOW,SAASD,EAAKjC,UAE5EW,EAAAA,EAAAA,YAAU,KACRQ,EAAS,GAAG,GACX,CAACO,EAAUxB,QAETwB,EAAUI,MAAMK,SACnBT,EAAUI,MAAQ,CAAC,CAAC9B,MAAO,YAAaoC,KAAM,UAGhD,MAAMC,EACJpB,EAAMqB,gBAAkBC,EAAAA,GAAAA,YACnB,yBAAwBxB,2BACxB,YAAWA,IAKlB,GAJAW,EAAUc,QAAU,CAACC,SAASxB,EAAMuB,QAAQE,GAAI,KAChDhB,EAAUxB,MAAS,GAAEmC,KAAWxB,EAAMN,SAASL,MAAMA,OAAS,KAC9DwB,EAAUiB,YAAc,MAEpBzB,EACF,OAAO,QAAC,IAAY,CAAC0B,QAAS1B,EAAO2B,QAAS,IAAM1B,EAAS,MAG/D,MAAM2B,EAAkBhC,EAAaiC,SAASb,SAAS,qBAEvD,OACE,QAAC,IAAW,CACVR,UAAWA,EACXnB,SAAUA,EACVQ,QAASA,EACTD,aAAcA,EACdO,OAAQA,EACRL,aAAcA,EACdgC,YAAa/B,EAAMuB,QAAQS,KAC3BC,cAAe,CAAC,YAChB/B,SAAWgC,GAA4BhC,EAASgC,GAAO,IACvDC,gBAAgB,GAChB5B,aAAcA,EAAa6B,QAC3BC,SAAS,0BACTC,cAAeT,GACf,EAhDAlC,EAAc,6BAsDpB,MAAMa,EAAa,CAACR,EAAcH,KAChC,MAAM0C,EAAcvC,EAAMqB,gBAAkBC,EAAAA,GAAAA,YACtCO,EAAkBhC,EAAaiC,SAASb,SAAS,sBAEhDX,OAAQkC,EAAwBjC,aAAckC,GACnDC,EAAmB1C,EAAMuB,QAAQoB,UAAY3C,EAAM2C,SAAU,CAACd,oBA+BhE,MAAO,CACLvB,OA9BuB,CACvB,KACA,cACA,QACA,UACA,cACA,eACA,SACA,QACGkC,KACCD,EAAc,CAAC,wBAA0B,GAC7C,aAoBAhC,aAjB6B,EAC7BqC,EAAAA,EAAAA,GAAE,aACFA,EAAAA,EAAAA,GAAE,gBACFA,EAAAA,EAAAA,GAAE,UACFA,EAAAA,EAAAA,GAAE,YACFA,EAAAA,EAAAA,GAAE,gBACFA,EAAAA,EAAAA,GAAE,SACFA,EAAAA,EAAAA,GAAE,WACFA,EAAAA,EAAAA,GAAE,SACCH,KACCF,EAAc,EAACK,EAAAA,EAAAA,GAAE,mBAAqB,IAC1CA,EAAAA,EAAAA,GAAE,cACFA,EAAAA,EAAAA,GAAE,aAMH,EAGGF,EAAqB,CACzBC,EACAE,KAEA,MAAMC,EAAcD,EAAQhB,gBAAkB,CAAC,YAAc,GACvDkB,EAAoBF,EAAQhB,gBAAkB,EAACe,EAAAA,EAAAA,GAAE,WAAa,GAE9DI,EAA8B,CAClC1C,OAAQ,CAAC,MAAO,WAChBC,aAAc,EAACqC,EAAAA,EAAAA,GAAE,QAAQA,EAAAA,EAAAA,GAAE,aA0B7B,MAvBkE,CAChE,CAACK,EAAAA,GAAAA,SAA2BD,EAC5B,CAACC,EAAAA,GAAAA,YAA8BD,EAC/B,CAACC,EAAAA,GAAAA,UAA4B,CAC3B3C,OAAQ,CAAC,MAAO,aAAcwC,GAC9BvC,aAAc,EAACqC,EAAAA,EAAAA,GAAE,QAAQA,EAAAA,EAAAA,GAAE,cAAeG,IAE5C,CAACE,EAAAA,GAAAA,QAA0B,CACzB3C,OAAQ,CAAC,OACTC,aAAc,EAACqC,EAAAA,EAAAA,GAAE,SAEnB,CAACK,EAAAA,GAAAA,SAA2B,CAC1B3C,OAAQ,GACRC,aAAc,IAEhB,CAAC0C,EAAAA,GAAAA,OAAyB,CACxB3C,OAAQ,GACRC,aAAc,MAIO2C,EAAAA,EAAAA,IAAmBP,GAEA,EAG9C,IC/HM5C,EAAe,CAAC,cAAe,QAAS,WAAY,yBAE1D,MAAMoD,UAAoBC,EAAAA,UACxBC,YAAYzD,GACV0D,MAAM1D,IAAO,gFAmCCX,IACd,MAAMsE,EAAoB,IAAIC,KAAK5D,MAAMN,SAASL,OAClDsE,EAAkBtE,MAAQA,EAC1B,MAAM,aAACY,GAAgB2D,KAAK5D,OACtB,QAAC6D,GAAWD,KAAK5D,MAAM8D,OAE7BrE,EAAAA,eAAAA,MACEsE,EAAAA,EAAAA,GAAa,CACXzE,SAAW,kBAAiBW,EAAamC,eAAeyB,YACxDxE,MAAOsE,IAEV,IA5CD,MAAMK,EAAcJ,KAAK5D,MAAMN,SAASL,MAExCuE,KAAKK,MAAQ,CACX5E,MAAO2E,EAAY3E,OAAS,GAEhC,CAEA6E,iCAAiCC,GAC/B,GAAIP,KAAK5D,MAAMN,SAAS0E,SAAWD,EAAUzE,SAAS0E,OAAQ,CAC5D,MAAMJ,EAAcG,EAAUzE,SAASL,MAEvCuE,KAAKS,SAAS,CACZhF,MAAO2E,EAAY3E,OAEvB,CACF,CAEAiF,2BACEV,KAAKW,6BAA+B9E,EAAAA,eAAAA,QAAsBV,IACxDF,EAAAA,EAAAA,GAAiB,CACfC,cAAe,CAAC,UAChBC,cACAC,YAAa4E,KAAK5D,MAAMN,SAASJ,YAGvC,CAEAkF,8BACEZ,KAAKW,gCACP,CAkBAE,kBAEE,MAAMC,EACJd,KAAK5D,MAAMC,aAAaiC,SAASb,SAAS,oBAEtCsD,GACJ,QAAC,IAAc,CACb1E,aAAc2D,KAAK5D,MAAMC,aACzB2E,aAAa,GACbC,SAAUjB,KAAKkB,aACf3E,aAAcA,EACdd,MAAOuE,KAAKK,MAAM5E,MAClB0F,mBAAmB,IAIvB,OAAIL,EACKC,GAGP,QAACK,EAAa,YACZ,QAAC,IAAqB,IACrBL,IAGP,CAEAM,SACE,OACE,QAAC,KAAW,WACV,QAAC,KAAW,CAACC,WAAS,aACpB,QAACC,EAAgB,UAAEvB,KAAKa,qBACxB,QAAC,EAAc,CACbvE,QAAS0D,KAAK5D,MAAMI,MAAMyB,GAC1BnC,SAAUkE,KAAK5D,MAAMN,SACrBO,aAAc2D,KAAK5D,MAAMC,aACzBG,MAAOwD,KAAK5D,MAAMI,MAClBD,aAAcA,QAKxB,EA7FIoD,EAAW,0BAgGjB,MAAMyB,GAAgB,OAAO,MAAK,qBAAZ,CAAa,qBAE1BI,EAAAA,EAAAA,GAAM,GAAE,2CAIXD,GAAmB,OAAO,MAAK,qBAAZ,CAAa,kBACnBC,EAAAA,EAAAA,GAAM,GAAE,KAK3B,GAAeC,EAAAA,EAAAA,IAAiBC,EAAAA,EAAAA,GAAQ/B,G,keC1HjC,IAAKgC,EAoBL,SAASC,EAA0BnG,GACxC,MAAMoG,EAAeC,EAA6CrG,GAKlE,OAFAoG,EAAaE,aAAa,eAEnBF,CACT,CAGO,SAASC,EACdrG,GAEA,MAAMoG,EAAe,IAAIG,EAAAA,GAAcvG,GAKvC,OAFAoG,EAAaE,aAAa,cAEnBF,CACT,CAEO,SAASI,EAAiC,GAwB9C,IAxB8C,QAC/CC,EAAO,YACPC,EAAW,UACXC,EAAS,MACT3G,EAAK,iBACL4G,EAAmB,SAAQ,QAC3BC,EAAO,cACPC,EAAa,YACbC,EAAW,iBACXC,EAAgB,gBAChBC,EAAe,QACfC,GAaD,EACC,MAAMjH,EA3DD,SAAyC,GAMrC,IANqC,QAC9CwG,EAAO,QACPS,GAID,EACC,MAAQ,kBAAiBT,yBAA+BS,EAAW,GAAEA,KAAa,IACpF,CAmDmBC,CAAgC,CAC/CV,UACAS,YAGF,IAAIE,EAOJ,OALEA,EADyB,iBAAhBpH,EAAMA,MACAmG,EAA0BnG,EAAMA,OAAOqH,eAEvCrH,EAAMA,MAGhB,CACLC,WACAD,MAAO,CACL0G,cACApE,QAASqE,EACTW,YAAatH,EAAMsH,YACnB7E,YAAazC,EAAMyC,YACnB8E,MAAOvH,EAAMuH,MACbC,IAAKxH,EAAMwH,IACXxH,MAAOoH,EACPR,mBACAI,mBACAH,UACAC,gBACAC,cACA3D,SAAU,qCACP6D,GAGT,CAEO,SAASQ,EAAkBC,GAChC,MAAO,CACL9G,EACA+G,EACAC,KAEA,MAAMC,EAAW,GAAEF,EAASG,QAC5B,OAAKD,GAIEE,EAAAA,EAAAA,IAAmBnH,EAAciH,EAASH,EAAe,CAAC,GAHxD,CAAC,CAGyD,CAEvE,CAEO,SAASM,EAAwB9E,GACtC,MAAO,CACLtC,EACA+G,EACA3H,EACAiI,KAEA,MAAMC,GAAYC,EAAAA,EAAAA,IAAkBR,GACpC,OAAOS,EAAAA,EAAAA,GACLxH,EAAamC,KACbmF,EACAhF,EACAlD,EACAiI,EACD,CAEL,CAEO,SAASI,EAAmBlH,GACjC,MAAMiC,GAAWkF,EAAAA,EAAAA,GAAyBnH,GAE1C,MAAO,CACLP,EACA+G,EACAC,KAEA,MAAMW,EAAWZ,EAASY,SAC1B,IAAKA,EACH,MAAO,CAAC,EAGV,MAAMC,EAAc,GAAEb,EAAS,mBAAmBY,IAElD,IAAKZ,EAASc,UACZ,MAAO,CACLxI,SAAW,kBAAiBW,EAAamC,gBAAgByF,KACzDxI,MAAO,CACLoD,aAKN,MAEMsF,EAFuB,IAAIC,KAAKhB,EAASc,WAAWG,UAGhCjB,EAAS,wBAEnC,MAAO,CACL1H,SAAW,kBAAiBW,EAAamC,gBAAgByF,KACzDxI,MAAO,CACL6I,QAASH,EACTtF,YAEH,CAEL,EApKC,SALW8C,GAAAA,EAAwB,kBAAxBA,EAAwB,YAAxBA,EAAwB,kBAAxBA,EAAwB,gBAKnC,CALWA,IAAAA,EAAwB,KA0K7B,MAAM4C,GAAgB,OAAO,MAAK,oBAAZ,CAAa,eAC1B/C,EAAAA,EAAAA,GAAM,GAAE,I","sources":["webpack:///./app/utils/useCleanQueryParamsOnRouteLeave.tsx","webpack:///./app/views/organizationGroupDetails/allEventsTable.tsx","webpack:///./app/views/organizationGroupDetails/groupEvents.tsx","webpack:///./app/views/performance/transactionSummary/utils.tsx"],"sourcesContent":["import {useCallback, useEffect} from 'react';\nimport {browserHistory} from 'react-router';\nimport type {Location} from 'history';\n\nimport {useLocation} from 'sentry/utils/useLocation';\n\ntype Opts = {\n  fieldsToClean: string[];\n};\n\nexport function handleRouteLeave<Q extends object>({\n  fieldsToClean,\n  newLocation,\n  oldPathname,\n}: {\n  fieldsToClean: string[];\n  newLocation: Location<Q>;\n  oldPathname: string;\n}) {\n  const hasSomeValues = fieldsToClean.some(\n    field => newLocation.query[field] !== undefined\n  );\n\n  if (newLocation.pathname === oldPathname || !hasSomeValues) {\n    return;\n  }\n\n  // Removes fields from the URL on route leave so that the parameters will\n  // not interfere with other pages\n  const query = fieldsToClean.reduce(\n    (newQuery, field) => {\n      newQuery[field] = undefined;\n      return newQuery;\n    },\n    {...newLocation.query}\n  );\n\n  browserHistory.replace({\n    pathname: newLocation.pathname,\n    query,\n  });\n}\n\nfunction useCleanQueryParamsOnRouteLeave({fieldsToClean}: Opts) {\n  const location = useLocation();\n\n  const onRouteLeave = useCallback(\n    newLocation => {\n      handleRouteLeave({\n        fieldsToClean,\n        newLocation,\n        oldPathname: location.pathname,\n      });\n    },\n    [location.pathname, fieldsToClean]\n  );\n\n  useEffect(() => {\n    return browserHistory.listen(onRouteLeave);\n  }, [onRouteLeave]);\n}\n\nexport default useCleanQueryParamsOnRouteLeave;\n","import {useEffect, useState} from 'react';\nimport {Location} from 'history';\n\nimport LoadingError from 'sentry/components/loadingError';\nimport {PlatformCategory, PlatformKey} from 'sentry/data/platformCategories';\nimport {t} from 'sentry/locale';\nimport {Group, IssueCategory, Organization} from 'sentry/types';\nimport EventView, {decodeSorts} from 'sentry/utils/discover/eventView';\nimport {platformToCategory} from 'sentry/utils/platform';\nimport {useRoutes} from 'sentry/utils/useRoutes';\nimport EventsTable from 'sentry/views/performance/transactionSummary/transactionEvents/eventsTable';\n\nexport interface Props {\n  group: Group;\n  issueId: string;\n  location: Location;\n  organization: Organization;\n  excludedTags?: string[];\n}\n\nconst AllEventsTable = (props: Props) => {\n  const {location, organization, issueId, excludedTags, group} = props;\n  const [error, setError] = useState<string>('');\n  const routes = useRoutes();\n  const {fields, columnTitles} = getColumns(group, organization);\n\n  const eventView: EventView = EventView.fromLocation(props.location);\n  eventView.fields = fields.map(fieldName => ({field: fieldName}));\n\n  eventView.sorts = decodeSorts(location).filter(sort => fields.includes(sort.field));\n\n  useEffect(() => {\n    setError('');\n  }, [eventView.query]);\n\n  if (!eventView.sorts.length) {\n    eventView.sorts = [{field: 'timestamp', kind: 'desc'}];\n  }\n\n  const idQuery =\n    group.issueCategory === IssueCategory.PERFORMANCE\n      ? `performance.issue_ids:${issueId} event.type:transaction`\n      : `issue.id:${issueId}`;\n  eventView.project = [parseInt(group.project.id, 10)];\n  eventView.query = `${idQuery} ${props.location.query.query || ''}`;\n  eventView.statsPeriod = '90d';\n\n  if (error) {\n    return <LoadingError message={error} onRetry={() => setError('')} />;\n  }\n\n  const isReplayEnabled = organization.features.includes('session-replay-ui');\n\n  return (\n    <EventsTable\n      eventView={eventView}\n      location={location}\n      issueId={issueId}\n      organization={organization}\n      routes={routes}\n      excludedTags={excludedTags}\n      projectSlug={group.project.slug}\n      customColumns={['minidump']}\n      setError={(msg: string | undefined) => setError(msg ?? '')}\n      transactionName=\"\"\n      columnTitles={columnTitles.slice()}\n      referrer=\"api.issues.issue_events\"\n      showReplayCol={isReplayEnabled}\n    />\n  );\n};\n\ntype ColumnInfo = {columnTitles: string[]; fields: string[]};\n\nconst getColumns = (group: Group, organization: Organization): ColumnInfo => {\n  const isPerfIssue = group.issueCategory === IssueCategory.PERFORMANCE;\n  const isReplayEnabled = organization.features.includes('session-replay-ui');\n\n  const {fields: platformSpecificFields, columnTitles: platformSpecificColumnTitles} =\n    getPlatformColumns(group.project.platform ?? group.platform, {isReplayEnabled});\n\n  const fields: string[] = [\n    'id',\n    'transaction',\n    'title',\n    'release',\n    'environment',\n    'user.display',\n    'device',\n    'os',\n    ...platformSpecificFields,\n    ...(isPerfIssue ? ['transaction.duration'] : []),\n    'timestamp',\n  ];\n\n  const columnTitles: string[] = [\n    t('event id'),\n    t('transaction'),\n    t('title'),\n    t('release'),\n    t('environment'),\n    t('user'),\n    t('device'),\n    t('os'),\n    ...platformSpecificColumnTitles,\n    ...(isPerfIssue ? [t('total duration')] : []),\n    t('timestamp'),\n    t('minidump'),\n  ];\n\n  return {\n    fields,\n    columnTitles,\n  };\n};\n\nconst getPlatformColumns = (\n  platform: PlatformKey | undefined,\n  options: {isReplayEnabled: boolean}\n): ColumnInfo => {\n  const replayField = options.isReplayEnabled ? ['replayId'] : [];\n  const replayColumnTitle = options.isReplayEnabled ? [t('replay')] : [];\n\n  const backendServerlessColumnInfo = {\n    fields: ['url', 'runtime'],\n    columnTitles: [t('url'), t('runtime')],\n  };\n\n  const categoryToColumnMap: Record<PlatformCategory, ColumnInfo> = {\n    [PlatformCategory.BACKEND]: backendServerlessColumnInfo,\n    [PlatformCategory.SERVERLESS]: backendServerlessColumnInfo,\n    [PlatformCategory.FRONTEND]: {\n      fields: ['url', 'browser', ...replayField],\n      columnTitles: [t('url'), t('browser'), ...replayColumnTitle],\n    },\n    [PlatformCategory.MOBILE]: {\n      fields: ['url'],\n      columnTitles: [t('url')],\n    },\n    [PlatformCategory.DESKTOP]: {\n      fields: [],\n      columnTitles: [],\n    },\n    [PlatformCategory.OTHER]: {\n      fields: [],\n      columnTitles: [],\n    },\n  };\n\n  const platformCategory = platformToCategory(platform);\n\n  return categoryToColumnMap[platformCategory];\n};\n\nexport default AllEventsTable;\n","import {Component} from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {Client} from 'sentry/api';\nimport EnvironmentPageFilter from 'sentry/components/environmentPageFilter';\nimport EventSearchBar from 'sentry/components/events/searchBar';\nimport * as Layout from 'sentry/components/layouts/thirds';\nimport space from 'sentry/styles/space';\nimport {Group, Organization} from 'sentry/types';\nimport {handleRouteLeave} from 'sentry/utils/useCleanQueryParamsOnRouteLeave';\nimport withApi from 'sentry/utils/withApi';\nimport {normalizeUrl} from 'sentry/utils/withDomainRequired';\nimport withOrganization from 'sentry/utils/withOrganization';\n\nimport AllEventsTable from './allEventsTable';\n\ntype Props = {\n  api: Client;\n  group: Group;\n  organization: Organization;\n} & RouteComponentProps<{groupId: string}, {}>;\n\ninterface State {\n  query: string;\n}\n\nconst excludedTags = ['environment', 'issue', 'issue.id', 'performance.issue_ids'];\n\nclass GroupEvents extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const queryParams = this.props.location.query;\n\n    this.state = {\n      query: queryParams.query || '',\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (this.props.location.search !== nextProps.location.search) {\n      const queryParams = nextProps.location.query;\n\n      this.setState({\n        query: queryParams.query,\n      });\n    }\n  }\n\n  UNSAFE_componentDidMount() {\n    this._unsubscribeHandleRouteLeave = browserHistory.listen(newLocation =>\n      handleRouteLeave({\n        fieldsToClean: ['cursor'],\n        newLocation,\n        oldPathname: this.props.location.pathname,\n      })\n    );\n  }\n\n  UNSAFE_componentWillUnmount() {\n    this._unsubscribeHandleRouteLeave?.();\n  }\n\n  _unsubscribeHandleRouteLeave: undefined | ReturnType<typeof browserHistory.listen>;\n\n  handleSearch = (query: string) => {\n    const targetQueryParams = {...this.props.location.query};\n    targetQueryParams.query = query;\n    const {organization} = this.props;\n    const {groupId} = this.props.params;\n\n    browserHistory.push(\n      normalizeUrl({\n        pathname: `/organizations/${organization.slug}/issues/${groupId}/events/`,\n        query: targetQueryParams,\n      })\n    );\n  };\n\n  renderSearchBar() {\n    // New issue actions moves the environment picker to the header\n    const hasIssueActionsV2 =\n      this.props.organization.features.includes('issue-actions-v2');\n\n    const searchBar = (\n      <EventSearchBar\n        organization={this.props.organization}\n        defaultQuery=\"\"\n        onSearch={this.handleSearch}\n        excludedTags={excludedTags}\n        query={this.state.query}\n        hasRecentSearches={false}\n      />\n    );\n\n    if (hasIssueActionsV2) {\n      return searchBar;\n    }\n    return (\n      <FilterSection>\n        <EnvironmentPageFilter />\n        {searchBar}\n      </FilterSection>\n    );\n  }\n\n  render() {\n    return (\n      <Layout.Body>\n        <Layout.Main fullWidth>\n          <AllEventsFilters>{this.renderSearchBar()}</AllEventsFilters>\n          <AllEventsTable\n            issueId={this.props.group.id}\n            location={this.props.location}\n            organization={this.props.organization}\n            group={this.props.group}\n            excludedTags={excludedTags}\n          />\n        </Layout.Main>\n      </Layout.Body>\n    );\n  }\n}\n\nconst FilterSection = styled('div')`\n  display: grid;\n  gap: ${space(1)};\n  grid-template-columns: max-content 1fr;\n`;\n\nconst AllEventsFilters = styled('div')`\n  margin-bottom: ${space(2)};\n`;\n\nexport {GroupEvents};\n\nexport default withOrganization(withApi(GroupEvents));\n","import {PlainRoute} from 'react-router';\nimport styled from '@emotion/styled';\nimport {LocationDescriptor, Query} from 'history';\n\nimport space from 'sentry/styles/space';\nimport {Organization} from 'sentry/types';\nimport {TableDataRow} from 'sentry/utils/discover/discoverQuery';\nimport {generateEventSlug} from 'sentry/utils/discover/urls';\nimport getRouteStringFromRoutes from 'sentry/utils/getRouteStringFromRoutes';\nimport {getTransactionDetailsUrl} from 'sentry/utils/performance/urls';\nimport {MutableSearch} from 'sentry/utils/tokenizeSearch';\nimport {getTraceDetailsUrl} from 'sentry/views/performance/traceDetails/utils';\n\nimport {DisplayModes} from './transactionOverview/charts';\n\nexport enum TransactionFilterOptions {\n  FASTEST = 'fastest',\n  SLOW = 'slow',\n  OUTLIER = 'outlier',\n  RECENT = 'recent',\n}\n\nexport function generateTransactionSummaryRoute({\n  orgSlug,\n  subPath,\n}: {\n  orgSlug: string;\n  subPath?: string;\n}): string {\n  return `/organizations/${orgSlug}/performance/summary/${subPath ? `${subPath}/` : ''}`;\n}\n\n// normalizes search conditions by removing any redundant search conditions before presenting them in:\n// - query strings\n// - search UI\nexport function normalizeSearchConditions(query: string): MutableSearch {\n  const filterParams = normalizeSearchConditionsWithTransactionName(query);\n\n  // no need to include transaction as its already in the query params\n  filterParams.removeFilter('transaction');\n\n  return filterParams;\n}\n\n// normalizes search conditions by removing any redundant search conditions, but retains any transaction name\nexport function normalizeSearchConditionsWithTransactionName(\n  query: string\n): MutableSearch {\n  const filterParams = new MutableSearch(query);\n\n  // remove any event.type queries since it is implied to apply to only transactions\n  filterParams.removeFilter('event.type');\n\n  return filterParams;\n}\n\nexport function transactionSummaryRouteWithQuery({\n  orgSlug,\n  transaction,\n  projectID,\n  query,\n  unselectedSeries = 'p100()',\n  display,\n  trendFunction,\n  trendColumn,\n  showTransactions,\n  additionalQuery,\n  subPath,\n}: {\n  orgSlug: string;\n  query: Query;\n  transaction: string;\n  additionalQuery?: Record<string, string>;\n  display?: DisplayModes;\n  projectID?: string | string[];\n  showTransactions?: TransactionFilterOptions;\n  subPath?: string;\n  trendColumn?: string;\n  trendFunction?: string;\n  unselectedSeries?: string | string[];\n}) {\n  const pathname = generateTransactionSummaryRoute({\n    orgSlug,\n    subPath,\n  });\n\n  let searchFilter: typeof query.query;\n  if (typeof query.query === 'string') {\n    searchFilter = normalizeSearchConditions(query.query).formatString();\n  } else {\n    searchFilter = query.query;\n  }\n\n  return {\n    pathname,\n    query: {\n      transaction,\n      project: projectID,\n      environment: query.environment,\n      statsPeriod: query.statsPeriod,\n      start: query.start,\n      end: query.end,\n      query: searchFilter,\n      unselectedSeries,\n      showTransactions,\n      display,\n      trendFunction,\n      trendColumn,\n      referrer: 'performance-transaction-summary',\n      ...additionalQuery,\n    },\n  };\n}\n\nexport function generateTraceLink(dateSelection) {\n  return (\n    organization: Organization,\n    tableRow: TableDataRow,\n    _query: Query\n  ): LocationDescriptor => {\n    const traceId = `${tableRow.trace}`;\n    if (!traceId) {\n      return {};\n    }\n\n    return getTraceDetailsUrl(organization, traceId, dateSelection, {});\n  };\n}\n\nexport function generateTransactionLink(transactionName: string) {\n  return (\n    organization: Organization,\n    tableRow: TableDataRow,\n    query: Query,\n    spanId?: string\n  ): LocationDescriptor => {\n    const eventSlug = generateEventSlug(tableRow);\n    return getTransactionDetailsUrl(\n      organization.slug,\n      eventSlug,\n      transactionName,\n      query,\n      spanId\n    );\n  };\n}\n\nexport function generateReplayLink(routes: PlainRoute<any>[]) {\n  const referrer = getRouteStringFromRoutes(routes);\n\n  return (\n    organization: Organization,\n    tableRow: TableDataRow,\n    _query: Query | undefined\n  ): LocationDescriptor => {\n    const replayId = tableRow.replayId;\n    if (!replayId) {\n      return {};\n    }\n\n    const replaySlug = `${tableRow['project.name']}:${replayId}`;\n\n    if (!tableRow.timestamp) {\n      return {\n        pathname: `/organizations/${organization.slug}/replays/${replaySlug}/`,\n        query: {\n          referrer,\n        },\n      };\n    }\n\n    const transactionTimestamp = new Date(tableRow.timestamp).getTime();\n\n    const transactionStartTimestamp =\n      transactionTimestamp - (tableRow['transaction.duration'] as number);\n\n    return {\n      pathname: `/organizations/${organization.slug}/replays/${replaySlug}/`,\n      query: {\n        event_t: transactionStartTimestamp,\n        referrer,\n      },\n    };\n  };\n}\nexport const SidebarSpacer = styled('div')`\n  margin-top: ${space(3)};\n`;\n"],"names":["handleRouteLeave","fieldsToClean","newLocation","oldPathname","hasSomeValues","some","field","undefined","query","pathname","reduce","newQuery","browserHistory","location","useLocation","onRouteLeave","useCallback","useEffect","AllEventsTable","props","organization","issueId","excludedTags","group","error","setError","useState","routes","useRoutes","fields","columnTitles","getColumns","eventView","EventView","map","fieldName","sorts","decodeSorts","filter","sort","includes","length","kind","idQuery","issueCategory","IssueCategory","project","parseInt","id","statsPeriod","message","onRetry","isReplayEnabled","features","projectSlug","slug","customColumns","msg","transactionName","slice","referrer","showReplayCol","isPerfIssue","platformSpecificFields","platformSpecificColumnTitles","getPlatformColumns","platform","t","options","replayField","replayColumnTitle","backendServerlessColumnInfo","PlatformCategory","platformToCategory","GroupEvents","Component","constructor","super","targetQueryParams","this","groupId","params","normalizeUrl","queryParams","state","UNSAFE_componentWillReceiveProps","nextProps","search","setState","UNSAFE_componentDidMount","_unsubscribeHandleRouteLeave","UNSAFE_componentWillUnmount","renderSearchBar","hasIssueActionsV2","searchBar","defaultQuery","onSearch","handleSearch","hasRecentSearches","FilterSection","render","fullWidth","AllEventsFilters","space","withOrganization","withApi","TransactionFilterOptions","normalizeSearchConditions","filterParams","normalizeSearchConditionsWithTransactionName","removeFilter","MutableSearch","transactionSummaryRouteWithQuery","orgSlug","transaction","projectID","unselectedSeries","display","trendFunction","trendColumn","showTransactions","additionalQuery","subPath","generateTransactionSummaryRoute","searchFilter","formatString","environment","start","end","generateTraceLink","dateSelection","tableRow","_query","traceId","trace","getTraceDetailsUrl","generateTransactionLink","spanId","eventSlug","generateEventSlug","getTransactionDetailsUrl","generateReplayLink","getRouteStringFromRoutes","replayId","replaySlug","timestamp","transactionStartTimestamp","Date","getTime","event_t","SidebarSpacer"],"sourceRoot":""}