(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[2319,109,4155,9897,1552],{25565:(t,e,s)=>{"use strict";s.r(e);s.d(e,{YBaseCell:()=>f,YCodeCell:()=>p,YDocument:()=>l,YFile:()=>c,YMarkdownCell:()=>_,YNotebook:()=>v,YRawCell:()=>y,convertYMapEventToMapChange:()=>n,createMutex:()=>a,createStandaloneCell:()=>g});function n(t){let e=new Map;t.changes.keys.forEach(((t,s)=>{e.set(s,{action:t.action,oldValue:t.oldValue,newValue:this.ymeta.get(s)})}));return e}const a=()=>{let t=true;return e=>{if(t){t=false;try{e()}finally{t=true}}}};var o=s(71348);var i=s(69236);var r=s(1057);var d=s(66350);class l{constructor(){this.ydoc=new d.Doc;this.ystate=this.ydoc.getMap("state");this.undoManager=new d.UndoManager([],{trackedOrigins:new Set([this]),doc:this.ydoc});this.awareness=new r.GL(this.ydoc);this.onStateChanged=t=>{const e=new Array;t.keysChanged.forEach((s=>{const n=t.changes.keys.get(s);if(n){e.push({name:s,oldValue:n.oldValue,newValue:this.ystate.get(s)})}}));this._changed.emit({stateChange:e})};this._changed=new i.Signal(this);this._isDisposed=false;this._disposed=new i.Signal(this);this.ystate.observe(this.onStateChanged)}static create(){return new l}get changed(){return this._changed}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}get state(){return o.JSONExt.deepCopy(this.ystate.toJSON())}canUndo(){return this.undoManager.undoStack.length>0}canRedo(){return this.undoManager.redoStack.length>0}dispose(){if(this._isDisposed){return}this._isDisposed=true;this.ystate.unobserve(this.onStateChanged);this.awareness.destroy();this.undoManager.destroy();this.ydoc.destroy();this._disposed.emit();i.Signal.clearData(this)}getState(t){const e=this.ystate.get(t);return typeof e==="undefined"?e:o.JSONExt.deepCopy(e)}setState(t,e){if(!o.JSONExt.deepEqual(this.ystate.get(t),e)){this.ystate.set(t,e)}}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}clearUndoHistory(){this.undoManager.clear()}transact(t,e=true){this.ydoc.transact(t,e?this:null)}}class c extends l{constructor(){super();this.ysource=this.ydoc.getText("source");this._modelObserver=t=>{this._changed.emit({sourceChange:t.changes.delta})};this.undoManager.addToScope(this.ysource);this.ysource.observe(this._modelObserver)}static create(){return new c}get source(){return this.getSource()}set source(t){this.setSource(t)}dispose(){if(this.isDisposed){return}this.ysource.unobserve(this._modelObserver);super.dispose()}getSource(){return this.ysource.toString()}setSource(t){this.transact((()=>{const e=this.ysource;e.delete(0,e.length);e.insert(0,t)}))}updateSource(t,e,s=""){this.transact((()=>{const n=this.ysource;n.insert(t,s);n.delete(t+s.length,e-t)}))}}const h=(t,e={})=>{switch(t.get("cell_type")){case"code":return new p(t,t.get("source"),t.get("outputs"),e);case"markdown":return new _(t,t.get("source"),e);case"raw":return new y(t,t.get("source"),e);default:throw new Error("Found unknown cell type")}};const u=(t,e)=>{var s,n;const a=new d.Map;const i=new d.Text;const r=new d.Map;a.set("source",i);a.set("metadata",r);a.set("cell_type",t.cell_type);a.set("id",(s=t.id)!==null&&s!==void 0?s:o.UUID.uuid4());let l;switch(t.cell_type){case"markdown":{l=new _(a,i,{notebook:e},r);if(t.attachments!=null){l.setAttachments(t.attachments)}break}case"code":{const s=new d.Array;a.set("outputs",s);l=new p(a,i,s,{notebook:e},r);const o=t;l.execution_count=(n=o.execution_count)!==null&&n!==void 0?n:null;if(o.outputs){l.setOutputs(o.outputs)}break}default:{l=new y(a,i,{notebook:e},r);if(t.attachments){l.setAttachments(t.attachments)}break}}if(t.metadata!=null){l.setMetadata(t.metadata)}if(t.source!=null){l.setSource(typeof t.source==="string"?t.source:t.source.join("\n"))}return l};const g=t=>u(t);class f{static create(t){return u({id:t,cell_type:this.prototype.cell_type})}constructor(t,e,s={},n){this._modelObserver=t=>{this._changed.emit(this.getChanges(t))};this._metadataChanged=new i.Signal(this);this._notebook=null;this._changed=new i.Signal(this);this._disposed=new i.Signal(this);this._isDisposed=false;this._undoManager=null;this.ymodel=t;this._ysource=e;this._ymetadata=n!==null&&n!==void 0?n:this.ymodel.get("metadata");this._prevSourceLength=e?e.length:0;this._notebook=null;this._awareness=null;this._undoManager=null;if(s.notebook){this._notebook=s.notebook}else{const t=new d.Doc;t.getArray().insert(0,[this.ymodel]);this._awareness=new r.GL(t);this._undoManager=new d.UndoManager([this.ymodel],{trackedOrigins:new Set([this])})}this.ymodel.observeDeep(this._modelObserver)}get awareness(){var t,e,s;return(s=(t=this._awareness)!==null&&t!==void 0?t:(e=this.notebook)===null||e===void 0?void 0:e.awareness)!==null&&s!==void 0?s:null}get cell_type(){throw new Error("A YBaseCell must not be constructed")}get changed(){return this._changed}get disposed(){return this._disposed}get id(){return this.getId()}get isDisposed(){return this._isDisposed}get isStandalone(){return this._notebook!==null}get metadata(){return this.getMetadata()}set metadata(t){this.setMetadata(t)}get metadataChanged(){return this._metadataChanged}get notebook(){return this._notebook}get source(){return this.getSource()}set source(t){this.setSource(t)}get undoManager(){var t;if(!this.notebook){return this._undoManager}return((t=this.notebook)===null||t===void 0?void 0:t.disableDocumentWideUndoRedo)?this._undoManager:this.notebook.undoManager}setUndoManager(){if(this._undoManager){throw new Error("The cell undo manager is already set.")}if(this._notebook&&this._notebook.disableDocumentWideUndoRedo){this._undoManager=new d.UndoManager([this.ymodel],{trackedOrigins:new Set([this])})}}get ysource(){return this._ysource}canUndo(){return!!this.undoManager&&this.undoManager.undoStack.length>0}canRedo(){return!!this.undoManager&&this.undoManager.redoStack.length>0}clearUndoHistory(){var t;(t=this.undoManager)===null||t===void 0?void 0:t.clear()}undo(){var t;(t=this.undoManager)===null||t===void 0?void 0:t.undo()}redo(){var t;(t=this.undoManager)===null||t===void 0?void 0:t.redo()}dispose(){var t;if(this._isDisposed)return;this._isDisposed=true;this.ymodel.unobserveDeep(this._modelObserver);if(this._awareness){const t=this._awareness.doc;this._awareness.destroy();t.destroy()}if(this._undoManager){if(this._undoManager===((t=this.notebook)===null||t===void 0?void 0:t.undoManager)){this._undoManager=null}else{this._undoManager.destroy()}}this._disposed.emit();i.Signal.clearData(this)}getId(){return this.ymodel.get("id")}getSource(){return this.ysource.toString()}setSource(t){this.transact((()=>{this.ysource.delete(0,this.ysource.length);this.ysource.insert(0,t)}))}updateSource(t,e,s=""){this.transact((()=>{const n=this.ysource;n.insert(t,s);n.delete(t+s.length,e-t)}))}deleteMetadata(t){if(typeof this.getMetadata(t)==="undefined"){return}this._ymetadata.delete(t);const e=this.getMetadata("jupyter");if(t==="collapsed"&&e){const{outputs_hidden:t,...s}=e;if(Object.keys(s).length===0){this._ymetadata.delete("jupyter")}else{this._ymetadata.set("jupyter",s)}}else if(t==="jupyter"){this._ymetadata.delete("collapsed")}}getMetadata(t){const e=this._ymetadata;if(e===undefined){return undefined}if(typeof t==="string"){const s=e.get(t);return typeof s==="undefined"?undefined:o.JSONExt.deepCopy(e.get(t))}else{return o.JSONExt.deepCopy(e.toJSON())}}setMetadata(t,e){var s,n;if(typeof t==="string"){if(typeof e==="undefined"){throw new TypeError(`Metadata value for ${t} cannot be 'undefined'; use deleteMetadata.`)}const n=t;if(o.JSONExt.deepEqual((s=this.getMetadata(n))!==null&&s!==void 0?s:null,e)){return}this.transact((()=>{var t;this._ymetadata.set(n,e);if(n==="collapsed"){const s=(t=this.getMetadata("jupyter"))!==null&&t!==void 0?t:{};if(s.outputs_hidden!==e){this.setMetadata("jupyter",{...s,outputs_hidden:e})}}else if(n==="jupyter"){const t=e["outputs_hidden"];if(typeof t!=="undefined"){if(this.getMetadata("collapsed")!==t){this.setMetadata("collapsed",t)}}else{this.deleteMetadata("collapsed")}}}))}else{const e=o.JSONExt.deepCopy(t);if(e.collapsed!=null){e.jupyter=e.jupyter||{};e.jupyter.outputs_hidden=e.collapsed}else if(((n=e===null||e===void 0?void 0:e.jupyter)===null||n===void 0?void 0:n.outputs_hidden)!=null){e.collapsed=e.jupyter.outputs_hidden}if(!o.JSONExt.deepEqual(e,this.getMetadata())){this.transact((()=>{for(const[t,s]of Object.entries(e)){this._ymetadata.set(t,s)}}))}}}toJSON(){return{id:this.getId(),cell_type:this.cell_type,source:this.getSource(),metadata:this.getMetadata()}}transact(t,e=true){this.notebook&&e?this.notebook.transact(t):this.ymodel.doc==null?t():this.ymodel.doc.transact(t,this)}getChanges(t){const e={};const s=t.find((t=>t.target===this.ymodel.get("source")));if(s){e.sourceChange=s.changes.delta}const n=t.find((t=>t.target===this._ymetadata));if(n){e.metadataChange=n.changes.keys;n.changes.keys.forEach(((t,e)=>{switch(t.action){case"add":this._metadataChanged.emit({key:e,newValue:this._ymetadata.get(e),type:"add"});break;case"delete":this._metadataChanged.emit({key:e,oldValue:t.oldValue,type:"remove"});break;case"update":const s=this._ymetadata.get(e);const n=t.oldValue;let a=true;if(typeof n=="object"&&typeof s=="object"){a=o.JSONExt.deepEqual(n,s)}else{a=n===s}if(!a){this._metadataChanged.emit({key:e,type:"change",oldValue:n,newValue:s})}break}}))}const a=t.find((t=>t.target===this.ymodel));const i=this.ymodel.get("source");if(a&&a.keysChanged.has("source")){e.sourceChange=[{delete:this._prevSourceLength},{insert:i.toString()}]}this._prevSourceLength=i.length;return e}}class p extends f{static create(t){return super.create(t)}constructor(t,e,s,n={},a){super(t,e,n,a);this._youtputs=s}get cell_type(){return"code"}get execution_count(){return this.ymodel.get("execution_count")||null}set execution_count(t){if(this.ymodel.get("execution_count")!==t){this.transact((()=>{this.ymodel.set("execution_count",t)}))}}get outputs(){return this.getOutputs()}set outputs(t){this.setOutputs(t)}getOutputs(){return o.JSONExt.deepCopy(this._youtputs.toArray())}setOutputs(t){this.transact((()=>{this._youtputs.delete(0,this._youtputs.length);this._youtputs.insert(0,t)}),false)}updateOutputs(t,e,s=[]){const n=e<this._youtputs.length?e-t:this._youtputs.length-t;this.transact((()=>{this._youtputs.delete(t,n);this._youtputs.insert(t,s)}),false)}toJSON(){return{...super.toJSON(),outputs:this.getOutputs(),execution_count:this.execution_count}}getChanges(t){const e=super.getChanges(t);const s=t.find((t=>t.target===this.ymodel.get("outputs")));if(s){e.outputsChange=s.changes.delta}const n=t.find((t=>t.target===this.ymodel));if(n&&n.keysChanged.has("execution_count")){const t=n.changes.keys.get("execution_count");e.executionCountChange={oldValue:t.oldValue,newValue:this.ymodel.get("execution_count")}}return e}}class m extends f{get attachments(){return this.getAttachments()}set attachments(t){this.setAttachments(t)}getAttachments(){return this.ymodel.get("attachments")}setAttachments(t){this.transact((()=>{if(t==null){this.ymodel.delete("attachments")}else{this.ymodel.set("attachments",t)}}))}getChanges(t){const e=super.getChanges(t);const s=t.find((t=>t.target===this.ymodel));if(s&&s.keysChanged.has("attachments")){const t=s.changes.keys.get("attachments");e.executionCountChange={oldValue:t.oldValue,newValue:this.ymodel.get("attachments")}}return e}}class y extends m{static create(t){return super.create(t)}get cell_type(){return"raw"}toJSON(){return{id:this.getId(),cell_type:"raw",source:this.getSource(),metadata:this.getMetadata(),attachments:this.getAttachments()}}}class _ extends m{static create(t){return super.create(t)}get cell_type(){return"markdown"}toJSON(){return{id:this.getId(),cell_type:"markdown",source:this.getSource(),metadata:this.getMetadata(),attachments:this.getAttachments()}}}class v extends l{constructor(t={}){var e;super();this.ymeta=this.ydoc.getMap("meta");this._onMetaChanged=t=>{const e=t.find((t=>t.target===this.ymeta.get("metadata")));if(e){const t=e.changes.keys;const s=this.ymeta.get("metadata");e.changes.keys.forEach(((t,e)=>{switch(t.action){case"add":this._metadataChanged.emit({key:e,type:"add",newValue:s.get(e)});break;case"delete":this._metadataChanged.emit({key:e,type:"remove",oldValue:t.oldValue});break;case"update":const n=s.get(e);const a=t.oldValue;let i=true;if(typeof a=="object"&&typeof n=="object"){i=o.JSONExt.deepEqual(a,n)}else{i=a===n}if(!i){this._metadataChanged.emit({key:e,type:"change",oldValue:a,newValue:n})}break}}));this._changed.emit({metadataChange:t})}const s=t.find((t=>t.target===this.ymeta));if(!s){return}if(s.keysChanged.has("metadata")){const t=s.changes.keys.get("metadata");if((t===null||t===void 0?void 0:t.action)==="add"&&!t.oldValue){const t=new Map;for(const e of Object.keys(this.metadata)){t.set(e,{action:"add",oldValue:undefined});this._metadataChanged.emit({key:e,type:"add",newValue:this.getMetadata(e)})}this._changed.emit({metadataChange:t})}}if(s.keysChanged.has("nbformat")){const t=s.changes.keys.get("nbformat");const e={key:"nbformat",oldValue:(t===null||t===void 0?void 0:t.oldValue)?t.oldValue:undefined,newValue:this.nbformat};this._changed.emit({nbformatChanged:e})}if(s.keysChanged.has("nbformat_minor")){const t=s.changes.keys.get("nbformat_minor");const e={key:"nbformat_minor",oldValue:(t===null||t===void 0?void 0:t.oldValue)?t.oldValue:undefined,newValue:this.nbformat_minor};this._changed.emit({nbformatChanged:e})}};this._onYCellsChanged=t=>{t.changes.added.forEach((t=>{const e=t.content.type;if(!this._ycellMapping.has(e)){const t=h(e,{notebook:this});t.setUndoManager();this._ycellMapping.set(e,t)}}));t.changes.deleted.forEach((t=>{const e=t.content.type;const s=this._ycellMapping.get(e);if(s){s.dispose();this._ycellMapping.delete(e)}}));let e=0;const s=[];t.changes.delta.forEach((t=>{if(t.insert!=null){const n=t.insert.map((t=>this._ycellMapping.get(t)));s.push({insert:n});this.cells.splice(e,0,...n);e+=t.insert.length}else if(t.delete!=null){s.push(t);this.cells.splice(e,t.delete)}else if(t.retain!=null){s.push(t);e+=t.retain}}));this._changed.emit({cellsChange:s})};this._metadataChanged=new i.Signal(this);this._ycells=this.ydoc.getArray("cells");this._ycellMapping=new WeakMap;this._disableDocumentWideUndoRedo=(e=t.disableDocumentWideUndoRedo)!==null&&e!==void 0?e:false;this.cells=this._ycells.toArray().map((t=>{if(!this._ycellMapping.has(t)){this._ycellMapping.set(t,h(t,{notebook:this}))}return this._ycellMapping.get(t)}));this.undoManager.addToScope(this._ycells);this._ycells.observe(this._onYCellsChanged);this.ymeta.observeDeep(this._onMetaChanged)}static create(t={}){var e,s,n,a,o,i,r,d,l;const c=new v({disableDocumentWideUndoRedo:(e=t.disableDocumentWideUndoRedo)!==null&&e!==void 0?e:false});const h={cells:(n=(s=t.data)===null||s===void 0?void 0:s.cells)!==null&&n!==void 0?n:[],nbformat:(o=(a=t.data)===null||a===void 0?void 0:a.nbformat)!==null&&o!==void 0?o:4,nbformat_minor:(r=(i=t.data)===null||i===void 0?void 0:i.nbformat_minor)!==null&&r!==void 0?r:5,metadata:(l=(d=t.data)===null||d===void 0?void 0:d.metadata)!==null&&l!==void 0?l:{}};c.fromJSON(h);return c}get disableDocumentWideUndoRedo(){return this._disableDocumentWideUndoRedo}get metadata(){return this.getMetadata()}set metadata(t){this.setMetadata(t)}get metadataChanged(){return this._metadataChanged}get nbformat(){return this.ymeta.get("nbformat")}set nbformat(t){this.transact((()=>{this.ymeta.set("nbformat",t)}),false)}get nbformat_minor(){return this.ymeta.get("nbformat_minor")}set nbformat_minor(t){this.transact((()=>{this.ymeta.set("nbformat_minor",t)}),false)}dispose(){if(this.isDisposed){return}this._ycells.unobserve(this._onYCellsChanged);this.ymeta.unobserveDeep(this._onMetaChanged);super.dispose()}getCell(t){return this.cells[t]}addCell(t){return this.insertCell(this._ycells.length,t)}insertCell(t,e){return this.insertCells(t,[e])[0]}insertCells(t,e){const s=e.map((t=>{const e=u(t,this);this._ycellMapping.set(e.ymodel,e);return e}));this.transact((()=>{this._ycells.insert(t,s.map((t=>t.ymodel)))}));s.forEach((t=>{t.setUndoManager()}));return s}moveCell(t,e){this.moveCells(t,e)}moveCells(t,e,s=1){const n=new Array(s).fill(true).map(((e,s)=>this.getCell(t+s).toJSON()));this.transact((()=>{this._ycells.delete(t,s);this._ycells.insert(t>e?e:e-s+1,n.map((t=>u(t,this).ymodel)))}))}deleteCell(t){this.deleteCellRange(t,t+1)}deleteCellRange(t,e){this.transact((()=>{this._ycells.delete(t,e-t)}))}deleteMetadata(t){if(typeof this.getMetadata(t)==="undefined"){return}const e=this.metadata;delete e[t];this.setMetadata(e)}getMetadata(t){const e=this.ymeta.get("metadata");if(e===undefined){return undefined}if(typeof t==="string"){const s=e.get(t);return typeof s==="undefined"?undefined:o.JSONExt.deepCopy(s)}else{return o.JSONExt.deepCopy(e.toJSON())}}setMetadata(t,e){var s;if(typeof t==="string"){if(typeof e==="undefined"){throw new TypeError(`Metadata value for ${t} cannot be 'undefined'; use deleteMetadata.`)}if(o.JSONExt.deepEqual((s=this.getMetadata(t))!==null&&s!==void 0?s:null,e)){return}const n={};n[t]=e;this.updateMetadata(n)}else{if(!this.metadata||!o.JSONExt.deepEqual(this.metadata,t)){const e=o.JSONExt.deepCopy(t);const s=this.ymeta.get("metadata");if(s===undefined){return undefined}this.transact((()=>{s.clear();for(const[t,n]of Object.entries(e)){s.set(t,n)}}))}}}updateMetadata(t){const e=o.JSONExt.deepCopy(t);const s=this.ymeta.get("metadata");if(s===undefined){return undefined}this.transact((()=>{for(const[t,n]of Object.entries(e)){s.set(t,n)}}))}fromJSON(t){this.transact((()=>{this.nbformat=t.nbformat;this.nbformat_minor=t.nbformat_minor;const e=t.metadata;if(e["orig_nbformat"]!==undefined){delete e["orig_nbformat"]}if(!this.metadata){const t=new d.Map;for(const[s,n]of Object.entries(e)){t.set(s,n)}this.ymeta.set("metadata",t)}else{this.metadata=e}const s=t.nbformat===4&&t.nbformat_minor>=5;const n=t.cells.map((t=>{if(!s){delete t.id}return t}));this.insertCells(this.cells.length,n);this.deleteCellRange(0,this.cells.length)}))}toJSON(){const t=this.nbformat===4&&this.nbformat_minor<=4;return{metadata:this.metadata,nbformat_minor:this.nbformat_minor,nbformat:this.nbformat,cells:this.cells.map((e=>{const s=e.toJSON();if(t){delete s.id}return s}))}}}},72382:(t,e,s)=>{"use strict";s.d(e,{JG:()=>a,UI:()=>i,Ue:()=>n,Yj:()=>r,Yu:()=>o});const n=()=>new Map;const a=t=>{const e=n();t.forEach(((t,s)=>{e.set(s,t)}));return e};const o=(t,e,s)=>{let n=t.get(e);if(n===undefined){t.set(e,n=s())}return n};const i=(t,e)=>{const s=[];for(const[n,a]of t){s.push(e(a,n))}return s};const r=(t,e)=>{for(const[s,n]of t){if(e(n,s)){return true}}return false};const d=(t,e)=>{for(const[s,n]of t){if(!e(n,s)){return false}}return true}},14247:(t,e,s)=>{"use strict";s.d(e,{Fp:()=>f,GR:()=>v,GW:()=>n,VV:()=>g,Wn:()=>o,sQ:()=>m});const n=Math.floor;const a=Math.ceil;const o=Math.abs;const i=Math.imul;const r=Math.round;const d=Math.log10;const l=Math.log2;const c=Math.log;const h=Math.sqrt;const u=(t,e)=>t+e;const g=(t,e)=>t<e?t:e;const f=(t,e)=>t>e?t:e;const p=Number.isNaN;const m=Math.pow;const y=t=>Math.pow(10,t);const _=Math.sign;const v=t=>t!==0?t<0:1/t<0},34155:t=>{var e=t.exports={};var s;var n;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){s=setTimeout}else{s=a}}catch(t){s=a}try{if(typeof clearTimeout==="function"){n=clearTimeout}else{n=o}}catch(t){n=o}})();function i(t){if(s===setTimeout){return setTimeout(t,0)}if((s===a||!s)&&setTimeout){s=setTimeout;return setTimeout(t,0)}try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}function r(t){if(n===clearTimeout){return clearTimeout(t)}if((n===o||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(t)}try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}var d=[];var l=false;var c;var h=-1;function u(){if(!l||!c){return}l=false;if(c.length){d=c.concat(d)}else{h=-1}if(d.length){g()}}function g(){if(l){return}var t=i(u);l=true;var e=d.length;while(e){c=d;d=[];while(++h<e){if(c){c[h].run()}}h=-1;e=d.length}c=null;l=false;r(t)}e.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1){for(var s=1;s<arguments.length;s++){e[s-1]=arguments[s]}}d.push(new f(t,e));if(d.length===1&&!l){i(g)}};function f(t,e){this.fun=t;this.array=e}f.prototype.run=function(){this.fun.apply(null,this.array)};e.title="browser";e.browser=true;e.env={};e.argv=[];e.version="";e.versions={};function p(){}e.on=p;e.addListener=p;e.once=p;e.off=p;e.removeListener=p;e.removeAllListeners=p;e.emit=p;e.prependListener=p;e.prependOnceListener=p;e.listeners=function(t){return[]};e.binding=function(t){throw new Error("process.binding is not supported")};e.cwd=function(){return"/"};e.chdir=function(t){throw new Error("process.chdir is not supported")};e.umask=function(){return 0}},1057:(t,e,s)=>{"use strict";s.d(e,{Ag:()=>g,GL:()=>u,oy:()=>m,xq:()=>f});var n=s(88534);var a=s(64485);var o=s(20817);var i=s(14247);var r=s(58290);var d=s(97027);var l=s(66350);var c=s.n(l);const h=3e4;class u extends r.y{constructor(t){super();this.doc=t;this.clientID=t.clientID;this.states=new Map;this.meta=new Map;this._checkInterval=setInterval((()=>{const t=o.ZG();if(this.getLocalState()!==null&&h/2<=t-this.meta.get(this.clientID).lastUpdated){this.setLocalState(this.getLocalState())}const e=[];this.meta.forEach(((s,n)=>{if(n!==this.clientID&&h<=t-s.lastUpdated&&this.states.has(n)){e.push(n)}}));if(e.length>0){g(this,e,"timeout")}}),i.GW(h/10));t.on("destroy",(()=>{this.destroy()}));this.setLocalState({})}destroy(){this.emit("destroy",[this]);this.setLocalState(null);super.destroy();clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID;const s=this.meta.get(e);const n=s===undefined?0:s.clock+1;const a=this.states.get(e);if(t===null){this.states.delete(e)}else{this.states.set(e,t)}this.meta.set(e,{clock:n,lastUpdated:o.ZG()});const i=[];const r=[];const l=[];const c=[];if(t===null){c.push(e)}else if(a==null){if(t!=null){i.push(e)}}else{r.push(e);if(!d.Hi(a,t)){l.push(e)}}if(i.length>0||l.length>0||c.length>0){this.emit("change",[{added:i,updated:l,removed:c},"local"])}this.emit("update",[{added:i,updated:r,removed:c},"local"])}setLocalStateField(t,e){const s=this.getLocalState();if(s!==null){this.setLocalState({...s,[t]:e})}}getStates(){return this.states}}const g=(t,e,s)=>{const n=[];for(let a=0;a<e.length;a++){const s=e[a];if(t.states.has(s)){t.states.delete(s);if(s===t.clientID){const e=t.meta.get(s);t.meta.set(s,{clock:e.clock+1,lastUpdated:o.ZG()})}n.push(s)}}if(n.length>0){t.emit("change",[{added:[],updated:[],removed:n},s]);t.emit("update",[{added:[],updated:[],removed:n},s])}};const f=(t,e,s=t.states)=>{const a=e.length;const o=n.Mf();n.uE(o,a);for(let i=0;i<a;i++){const a=e[i];const r=s.get(a)||null;const d=t.meta.get(a).clock;n.uE(o,a);n.uE(o,d);n.uw(o,JSON.stringify(r))}return n._f(o)};const p=(t,e)=>{const s=decoding.createDecoder(t);const n=encoding.createEncoder();const a=decoding.readVarUint(s);encoding.writeVarUint(n,a);for(let o=0;o<a;o++){const t=decoding.readVarUint(s);const a=decoding.readVarUint(s);const o=JSON.parse(decoding.readVarString(s));const i=e(o);encoding.writeVarUint(n,t);encoding.writeVarUint(n,a);encoding.writeVarString(n,JSON.stringify(i))}return encoding.toUint8Array(n)};const m=(t,e,s)=>{const n=a.l1(e);const i=o.ZG();const r=[];const l=[];const c=[];const h=[];const u=a.yg(n);for(let o=0;o<u;o++){const e=a.yg(n);let s=a.yg(n);const o=JSON.parse(a.kf(n));const u=t.meta.get(e);const g=t.states.get(e);const f=u===undefined?0:u.clock;if(f<s||f===s&&o===null&&t.states.has(e)){if(o===null){if(e===t.clientID&&t.getLocalState()!=null){s++}else{t.states.delete(e)}}else{t.states.set(e,o)}t.meta.set(e,{clock:s,lastUpdated:i});if(u===undefined&&o!==null){r.push(e)}else if(u!==undefined&&o===null){h.push(e)}else if(o!==null){if(!d.Hi(o,g)){c.push(e)}l.push(e)}}}if(r.length>0||c.length>0||h.length>0){t.emit("change",[{added:r,updated:c,removed:h},s])}if(r.length>0||l.length>0||h.length>0){t.emit("update",[{added:r,updated:l,removed:h},s])}}}}]);
//# sourceMappingURL=2319.7ef35b4a4a5d7690ba4a.js.map?v=7ef35b4a4a5d7690ba4a